<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Nova</title>
    <meta name="description" content="منصة Nova الرائدة للبث المباشر والمحتوى الرياضي بجودة عالية">
    
    

    <!-- Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">



    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-storage-compat.js"></script>

    <style>

        /* ===== GLOBAL PROTECTION STYLES ===== */
/* منع التحديد والنسخ لجميع العناصر */
* {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    -webkit-user-drag: none;
    -khtml-user-drag: none;
    -moz-user-drag: none;
    -o-user-drag: none;
    user-drag: none;
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: transparent;
}

/* السماح للعناصر التفاعلية المطلوبة فقط */
input, textarea, button, select {
    -webkit-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;
}

/* ===== CSS VARIABLES ===== */
:root {
    --primary-bg: #10141a;
    --secondary-bg: #1c1f24;
    --tertiary-bg: #24262c;
    --accent-primary: #f6c000;
    --accent-secondary: #ffd700;
    --accent-gold: #f6c000;
    --text-primary: #ffffff;
    --text-secondary: #b8bcc8;
    --text-muted: #6c7293;
    --border-primary: rgba(255, 255, 255, 0.1);
    --shadow-light: rgba(0, 0, 0, 0.1);
    --shadow-dark: rgba(0, 0, 0, 0.3);
    --gradient-card: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%);
    --border-radius: 12px;
    --transition: all 0.2s ease;
}

/* Dynamic Color System */
:root.theme-red {
    --accent-primary: #dc2626;
    --accent-secondary: #ef4444;
}

:root.theme-blue {
    --accent-primary: #2563eb;
    --accent-secondary: #3b82f6;
}

:root.theme-green {
    --accent-primary: #16a34a;
    --accent-secondary: #22c55e;
}

:root.theme-purple {
    --accent-primary: #9333ea;
    --accent-secondary: #a855f7;
}

:root.theme-orange {
    --accent-primary: #ea580c;
    --accent-secondary: #f97316;
}

:root.theme-pink {
    --accent-primary: #db2777;
    --accent-secondary: #ec4899;
}

:root.theme-cyan {
    --accent-primary: #0891b2;
    --accent-secondary: #06b6d4;
}

:root.theme-yellow {
    --accent-primary: #ca8a04;
    --accent-secondary: #eab308;
}

:root.theme-indigo {
    --accent-primary: #4f46e5;
    --accent-secondary: #6366f1;
}

:root.theme-emerald {
    --accent-primary: #059669;
    --accent-secondary: #10b981;
}

:root.theme-teal {
    --accent-primary: #0d9488;
    --accent-secondary: #14b8a6;
}

:root.theme-rose {
    --accent-primary: #e11d48;
    --accent-secondary: #f43f5e;
}

:root.theme-violet {
    --accent-primary: #7c3aed;
    --accent-secondary: #8b5cf6;
}

:root.theme-amber {
    --accent-primary: #d97706;
    --accent-secondary: #f59e0b;
}

:root.theme-lime {
    --accent-primary: #65a30d;
    --accent-secondary: #84cc16;
}

:root.theme-sky {
    --accent-primary: #0284c7;
    --accent-secondary: #0ea5e9;
}

:root.theme-fuchsia {
    --accent-primary: #c026d3;
    --accent-secondary: #d946ef;
}

:root.theme-slate {
    --accent-primary: #475569;
    --accent-secondary: #64748b;
}



/* ===== GLOBAL STYLES ===== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html {
    font-size: 16px;
    scroll-behavior: smooth;
}

body {
    font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;
    background: var(--primary-bg);
    color: var(--text-primary);
    line-height: 1.6;
    overflow-x: hidden;
    transition: var(--transition);
    min-height: 100vh;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
}

/* ===== LOADING SCREEN ===== */
.loading-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: transparent;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    transition: opacity 0.3s ease;
}

.loading-container {
    text-align: center;
    position: relative;
}

.loading-logo {
    width: 120px;
    height: 120px;
    margin: 0 auto;
    position: relative;
}

.loading-logo img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 20px;
}

/* ===== HEADER STYLES ===== */
.header {
    background: rgba(11, 14, 19, 0.95);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--border-primary);
    padding: 0.5rem 0;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
    min-height: 60px;
}

.header.header-hidden {
    transform: translateY(-100%);
    opacity: 0;
    box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.3);
}

.header.header-scrolled {
    background: rgba(11, 14, 19, 0.98);
    backdrop-filter: blur(25px);
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.15);
    padding: 0.25rem 0;
    min-height: 50px;
}



.header-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 1rem;
    max-width: 1400px;
    margin: 0 auto;
    width: 100%;
    height: 100%;
}

.header-left {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex: 0 0 auto;
    min-width: 0;
}

.header-center {
    display: flex;
    align-items: center;
    justify-content: center;
    flex: 1;
    min-width: 0;
}

.header-right {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: 0.75rem;
    flex: 0 0 auto;
    min-width: 0;
}

.logo {
    display: flex;
    align-items: center;
    cursor: pointer;
    transition: var(--transition);
    text-decoration: none;
    min-width: 0;
}

.logo img {
    height: 35px;
    width: auto;
    object-fit: contain;
    transition: all 0.3s ease;
}

.logo:hover img {
    transform: scale(1.05);
}

.user-profile-simple {
    cursor: pointer;
    transition: all 0.3s ease;
}

.user-profile-simple:hover {
    transform: scale(1.05);
}

.user-avatar-simple {
    width: 38px;
    height: 38px;
    border-radius: 25%;
    background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    color: #000;
    font-size: 1.1rem;
    background-size: cover;
    background-position: center;
    overflow: hidden;
    box-shadow: 0 3px 12px rgba(var(--accent-primary), 0.3);
    border: 2px solid rgba(255, 255, 255, 0.1);
    transition: all 0.3s ease;
}

.user-avatar-simple:hover {
    box-shadow: 0 5px 20px rgba(var(--accent-primary), 0.5);
    transform: translateY(-1px);
}

.premium-btn {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 25px;
    color: var(--text-primary);
    padding: 0.6rem 1.2rem;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
    white-space: nowrap;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.premium-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    border-color: var(--accent-primary);
    transform: translateY(-1px);
    box-shadow: 0 4px 15px rgba(var(--accent-primary), 0.3);
}

.nav-btn {
    width: 42px;
    height: 42px;
    border-radius: 12px;
    background: rgba(var(--accent-primary), 0.1);
    border: 1px solid rgba(var(--accent-primary), 0.2);
    color: var(--accent-primary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    transition: var(--transition);
    flex-shrink: 0;
}

.nav-btn:hover {
    background: var(--accent-primary);
    color: white;
    transform: translateY(-1px);
    box-shadow: 0 4px 15px rgba(var(--accent-primary), 0.3);
}

/* Responsive Header Styles */
@media (max-width: 1200px) {
    .header-content {
        max-width: 100%;
        padding: 0 1rem;
    }
}

@media (max-width: 768px) {
    .header {
        padding: 0.4rem 0;
        min-height: 55px;
    }

    .header.header-scrolled {
        padding: 0.2rem 0;
        min-height: 50px;
    }

    .header-content {
        padding: 0 0.75rem;
        gap: 0.5rem;
    }

    .header-left {
        gap: 0.75rem;
    }

    .header-right {
        gap: 0.5rem;
    }

    .logo img {
        height: 32px;
    }

    .user-avatar-simple {
        width: 35px;
        height: 35px;
        font-size: 1rem;
    }

    .premium-btn {
        padding: 0.5rem 1rem;
        font-size: 0.85rem;
    }

    .nav-btn {
        width: 38px;
        height: 38px;
        font-size: 1.1rem;
    }
}

@media (max-width: 480px) {
    .header {
        padding: 0.3rem 0;
        min-height: 50px;
    }

    .header.header-scrolled {
        padding: 0.2rem 0;
        min-height: 45px;
    }

    .header-content {
        padding: 0 0.5rem;
    }

    .header-left {
        gap: 0.5rem;
    }

    .header-right {
        gap: 0.4rem;
    }

    .logo img {
        height: 28px;
    }

    .user-avatar-simple {
        width: 32px;
        height: 32px;
        font-size: 0.9rem;
    }

    .premium-btn {
        padding: 0.4rem 0.8rem;
        font-size: 0.8rem;
    }

    .nav-btn {
        width: 35px;
        height: 35px;
        font-size: 1rem;
    }
}

@media (max-width: 360px) {
    .header-content {
        padding: 0 0.4rem;
    }

    .premium-btn {
        padding: 0.3rem 0.6rem;
        font-size: 0.75rem;
    }

  .nav-btn {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(var(--accent-primary), 0.2);
    color: var(--text-primary);
    padding: 1rem;
    border-radius: 12px;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
    text-decoration: none;
    position: relative;
    overflow: hidden;
}

    .nav-btn {
        width: 32px;
        height: 32px;
        font-size: 0.9rem;
    }

    .logo img {
        height: 26px;
    }

    .user-avatar-simple {
        width: 30px;
        height: 30px;
        font-size: 0.85rem;
    }
}

/* ===== SIDEBAR STYLES ===== */
.sidebar {
    position: fixed;
    top: 0;
    right: -350px;
    width: 350px;
    height: 100vh;
    background: #000000;
    border-left: 1px solid #333333;
    z-index: 2000;
    padding: 2rem;
    transition: right 0.3s ease;
    overflow-y: auto;
}

/* Customer Service Section Styles */
.customer-service-section {
    padding: 1rem 0;
}

.social-links {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.social-link {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0.875rem 1rem;
    border-radius: 12px;
    color: var(--text-primary);
    text-decoration: none;
    font-weight: 500;
    transition: all 0.3s ease;
    border: 1px solid transparent;
    background: rgba(255, 255, 255, 0.05);
    position: relative;
    overflow: hidden;
}

.social-link::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transition: left 0.6s ease;
}

.social-link:hover::before {
    left: 100%;
}

.social-link i {
    width: 28px;
    text-align: center;
    font-size: 1.4rem;
    transition: all 0.3s ease;
}

.social-link span {
    font-size: 0.95rem;
    transition: color 0.3s ease;
}

.social-link.telegram {
    border-color: rgba(0, 136, 204, 0.3);
}

.social-link.telegram:hover {
    background: rgba(0, 136, 204, 0.1);
    border-color: #0088cc;
    color: #0088cc;
    transform: translateX(-5px);
    box-shadow: 0 4px 15px rgba(0, 136, 204, 0.3);
}

.social-link.telegram i {
    color: #0088cc;
}

.social-link.youtube {
    border-color: rgba(255, 0, 0, 0.3);
}

.social-link.youtube:hover {
    background: rgba(255, 0, 0, 0.1);
    border-color: #ff0000;
    color: #ff0000;
    transform: translateX(-5px);
    box-shadow: 0 4px 15px rgba(255, 0, 0, 0.3);
}

.social-link.youtube i {
    color: #ff0000;
}

.social-link.instagram {
    border-color: rgba(225, 48, 108, 0.3);
}

.social-link.instagram:hover {
    background: linear-gradient(45deg, rgba(225, 48, 108, 0.1), rgba(253, 29, 29, 0.1), rgba(245, 96, 64, 0.1));
    border-color: #e1306c;
    color: #e1306c;
    transform: translateX(-5px);
    box-shadow: 0 4px 15px rgba(225, 48, 108, 0.3);
}

.social-link.instagram i {
    background: linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

/* Responsive Social Links */
@media (max-width: 768px) {
    .social-link {
        padding: 0.75rem;
        font-size: 0.9rem;
    }

    .social-link i {
        font-size: 1.2rem;
        width: 24px;
    }

    .social-link span {
        font-size: 0.85rem;
    }
}



.sidebar.active {
    right: 0;
}

.sidebar-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border-primary);
}

.sidebar-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--accent-primary);
}

.close-btn {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: rgba(255, 71, 87, 0.1);
    border: 1px solid #ff4757;
    color: #ff4757;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.1rem;
    transition: var(--transition);
}

.close-btn:hover {
    background: #ff4757;
    color: white;
    transform: rotate(90deg);
}

.sidebar-menu {
    list-style: none;
    margin-bottom: 2rem;
}

.sidebar-menu li {
    margin-bottom: 0.5rem;
}

.sidebar-menu a {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    border-radius: var(--border-radius);
    color: var(--text-primary);
    text-decoration: none;
    font-weight: 500;
    transition: var(--transition);
    border: 1px solid transparent;
}

.sidebar-menu a:hover {
    background: rgba(var(--accent-primary), 0.1);
    border-color: var(--accent-primary);
    transform: translateX(-5px);
}

/* Expandable Menu Styles */
.expandable-menu {
    position: relative;
}

.expandable-menu > a {
    position: relative;
    justify-content: space-between;
}

.league-stats-header .menu-item-content {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex: 1;
}

.menu-icon-wrapper {
    width: 35px;
    height: 35px;
    border-radius: 10px;
    background: linear-gradient(135deg, rgba(var(--accent-primary), 0.2), rgba(var(--accent-secondary), 0.1));
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
}

.league-stats-header:hover .menu-icon-wrapper {
    background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
    transform: scale(1.1);
}

.league-stats-header:hover .menu-icon-wrapper i {
    color: #000 !important;
}

.menu-text {
    font-weight: 600;
    font-size: 1rem;
}

.expand-arrow {
    transition: transform 0.3s ease;
    font-size: 0.8rem !important;
    margin-left: auto;
    color: var(--accent-primary);
}

.expandable-menu.expanded .expand-arrow {
    transform: rotate(180deg);
}

.submenu {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease;
    background: linear-gradient(135deg, rgba(0, 0, 0, 0.4), rgba(25, 27, 32, 0.6));
    border-radius: 0 0 16px 16px;
    margin-top: 0.5rem;
    border: 1px solid rgba(var(--accent-primary), 0.1);
    border-top: none;
}

.submenu.open {
    max-height: 400px;
}

.league-link {
    display: block !important;
    padding: 0 !important;
    margin: 0.5rem !important;
    border: none !important;
    background: transparent !important;
    text-decoration: none !important;
    border-radius: 12px !important;
    transition: all 0.3s ease !important;
    position: relative;
    overflow: hidden;
}

.league-link::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transition: left 0.6s ease;
}

.league-link:hover::before {
    left: 100%;
}

.league-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    transition: all 0.3s ease;
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid transparent;
}

.league-link:hover .league-item {
    background: rgba(var(--accent-primary), 0.1);
    border-color: rgba(var(--accent-primary), 0.3);
    transform: translateX(-5px);
}

.league-flag {
    font-size: 1.8rem;
    line-height: 1;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

.league-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0.2rem;
}

.league-name {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.95rem;
    line-height: 1.2;
}

.league-subtitle {
    font-size: 0.75rem;
    color: var(--text-muted);
    font-weight: 500;
    opacity: 0.8;
}

.league-arrow {
    font-size: 0.8rem !important;
    color: var(--text-muted);
    transition: all 0.3s ease;
    opacity: 0.6;
}

.league-link:hover .league-arrow {
    color: var(--accent-primary);
    opacity: 1;
    transform: translateX(3px);
}

/* League specific colors */
.premier-league:hover .league-item {
    border-color: rgba(128, 0, 128, 0.4);
    background: rgba(128, 0, 128, 0.1);
}

.premier-league:hover .league-name {
    color: #800080;
}

.la-liga:hover .league-item {
    border-color: rgba(255, 140, 0, 0.4);
    background: rgba(255, 140, 0, 0.1);
}

.la-liga:hover .league-name {
    color: #ff8c00;
}

.bundesliga:hover .league-item {
    border-color: rgba(220, 20, 60, 0.4);
    background: rgba(220, 20, 60, 0.1);
}

.bundesliga:hover .league-name {
    color: #dc143c;
}

.ligue1:hover .league-item {
    border-color: rgba(0, 100, 200, 0.4);
    background: rgba(0, 100, 200, 0.1);
}

.ligue1:hover .league-name {
    color: #0064c8;
}

.serie-a:hover .league-item {
    border-color: rgba(0, 128, 0, 0.4);
    background: rgba(0, 128, 0, 0.1);
}

.serie-a:hover .league-name {
    color: #008000;
}

.submenu .icon {
    width: 20px;
    font-size: 1rem !important;
}

/* Responsive design for leagues */
@media (max-width: 768px) {
    .league-item {
        padding: 0.875rem;
    }

    .league-flag {
        font-size: 1.6rem;
    }

    .league-name {
        font-size: 0.9rem;
    }

    .league-subtitle {
        font-size: 0.7rem;
    }
}

.sidebar-menu .icon {
    width: 28px;
    text-align: center;
    font-size: 1.4rem;
}

.theme-toggle {
    padding: 1rem;
    border-top: 1px solid var(--border-primary);
}

.theme-btn {
    width: 100%;
    padding: 0.75rem 1rem;
    border-radius: var(--border-radius);
    background: var(--gradient-card);
    border: 1px solid var(--border-primary);
    color: var(--text-primary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    font-weight: 600;
    transition: var(--transition);
}

.theme-btn:hover {
    background: var(--accent-primary);
    color: #000000;
    transform: scale(1.02);
}

/* ===== MAIN CONTENT ===== */
.main-app {
    margin-top: 60px;
    transition: margin-top 0.3s ease;
}

.main-content {
    padding: 2rem;
    min-height: calc(100vh - 80px);
    transition: padding-top 0.3s ease;
}

.main-content.header-hidden {
    padding-top: 1rem;
}

/* Responsive Main Content */
@media (max-width: 768px) {
    .main-app {
        margin-top: 55px;
    }

    .main-content {
        padding: 1.5rem;
    }
}

@media (max-width: 480px) {
    .main-app {
        margin-top: 50px;
    }

    .main-content {
        padding: 1rem;
    }
}

.section {
    margin-bottom: 3rem;
}

.section-title {
    font-size: 2.2rem;
    font-weight: 900;
    margin-bottom: 2.5rem;
    background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-align: center;
    letter-spacing: -0.5px;
    position: relative;
}



/* ===== ENHANCED LOGIN PAGE ===== */
.login-page {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    background: linear-gradient(135deg, var(--primary-bg) 0%, var(--secondary-bg) 100%);
    padding: 2rem;
    position: relative;
    overflow: hidden;
}

.login-page::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: radial-gradient(circle at 30% 20%, rgba(255, 255, 255, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 70% 80%, rgba(255, 255, 255, 0.02) 0%, transparent 50%);
    z-index: 0;
}

.login-container {
    width: 100%;
    max-width: 500px;
    position: relative;
    z-index: 2;
}

.dazn-login-box {
    background: rgba(25, 27, 32, 0.95);
    backdrop-filter: blur(20px);
    border: 1px solid var(--border-primary);
    border-radius: 20px;
    padding: 3rem 2rem;
    text-align: center;
    animation: slideUpFade 1s ease-out;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    position: relative;
    overflow: hidden;
}

.dazn-login-box::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, rgba(255, 255, 255, 0.6) 0%, rgba(255, 255, 255, 0.3) 100%);
    z-index: 1;
}

/* Enhanced Logo Style */
.dazn-logo {
    display: flex;
    justify-content: center;
    margin-bottom: 3rem;
    position: relative;
    z-index: 2;
}

.dazn-logo-box {
    width: 100px;
    height: 100px;
    border-radius: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    transition: all 0.3s ease;
    overflow: hidden;
}

.dazn-logo-box:hover {
    transform: scale(1.05);
}

.nova-logo-img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 16px;
}

/* Enhanced Title */
.dazn-title {
    font-size: 2.2rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 1.5rem;
    line-height: 1.2;
    position: relative;
    z-index: 2;
}

/* Enhanced Description */
.dazn-description {
    color: var(--text-secondary);
    font-size: 1.1rem;
    line-height: 1.6;
    margin-bottom: 3rem;
    max-width: 450px;
    margin-left: auto;
    margin-right: auto;
    position: relative;
    z-index: 2;
}

/* Enhanced Form */
.dazn-form {
    width: 100%;
    position: relative;
    z-index: 2;
}

.dazn-input-group {
    margin-bottom: 2rem;
    position: relative;
}

.dazn-input {
    width: 100%;
    padding: 1.2rem 1.5rem;
    font-size: 1rem;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-primary);
    border-radius: 12px;
    color: var(--text-primary);
    outline: none;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
}

.dazn-input::placeholder {
    color: var(--text-muted);
}

.dazn-input:focus {
    border-color: rgba(255, 255, 255, 0.4);
    background: rgba(255, 255, 255, 0.1);
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.1);
    transform: translateY(-2px);
}

.dazn-continue-btn {
    width: 100%;
    padding: 1.2rem;
    font-size: 1rem;
    font-weight: 700;
    background: #ffffff;
    color: #000000;
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    position: relative;
    overflow: hidden;
}

.dazn-continue-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.1), transparent);
    transition: left 0.6s ease;
}

.dazn-continue-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(255, 255, 255, 0.3);
    background: rgba(255, 255, 255, 0.95);
}

.dazn-continue-btn:hover::before {
    left: 100%;
}

.dazn-continue-btn:active {
    transform: translateY(-1px);
}

/* Enhanced Animations */
@keyframes logoFloat {
    0%, 100% { 
        transform: translateY(0px);
    }
    50% { 
        transform: translateY(-5px);
    }
}

@keyframes slideUpFade {
    0% { 
        opacity: 0; 
        transform: translateY(50px) scale(0.9); 
    }
    100% { 
        opacity: 1; 
        transform: translateY(0) scale(1); 
    }
}

@keyframes inputFocus {
    0% { transform: scale(1); }
    50% { transform: scale(1.02); }
    100% { transform: scale(1); }
}

/* Loading Animation Enhancement */
.loading-overlay {
    background: linear-gradient(135deg, var(--primary-bg) 0%, var(--secondary-bg) 50%, var(--tertiary-bg) 100%);
}

.loading-logo {
    animation: loadingPulse 1.5s ease-in-out infinite;
}

.loading-text {
    animation: textFade 2s ease-in-out infinite;
}

/* Mobile Responsiveness */
@media (max-width: 768px) {
    .login-page {
        padding: 1rem;
    }

    .dazn-login-box {
        padding: 2rem 1.5rem;
        margin: 0 1rem;
    }

    .dazn-logo-box {
        width: 80px;
        height: 80px;
    }

    .dazn-title {
        font-size: 1.8rem;
    }

    .dazn-description {
        font-size: 1rem;
        margin-bottom: 2rem;
    }

    .dazn-input {
        padding: 1rem 1.2rem;
    }

    .dazn-continue-btn {
        padding: 1rem;
    }
}

@media (max-width: 480px) {
    .dazn-login-box {
        padding: 1.5rem 1rem;
    }

    .dazn-logo-box {
        width: 70px;
        height: 70px;
    }

    .nova-logo-text {
        font-size: 0.9rem;
    }

    .dazn-title {
        font-size: 1.6rem;
    }
}

.form-group {
    margin-bottom: 1.5rem;
    text-align: right;
}

.form-label {
    display: block;
    margin-bottom: 0.5rem;
    color: var(--text-primary);
    font-weight: 600;
}

.form-input {
    width: 100%;
    padding: 1rem;
    border: 1px solid var(--border-primary);
    border-radius: var(--border-radius);
    background: rgba(255, 255, 255, 0.05);
    color: var(--text-primary);
    font-size: 1rem;
    transition: var(--transition);
}

.form-input:focus {
    outline: none;
    border-color: var(--accent-primary);
    background: rgba(255, 255, 255, 0.1);
    box-shadow: 0 0 20px rgba(var(--accent-primary), 0.3);
}



.btn {
    padding: 1rem 2rem;
    border: none;
    border-radius: var(--border-radius);
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    transition: var(--transition);
    position: relative;
    overflow: hidden;
}

.btn-primary {
    background: var(--accent-primary);
    color: #000000;
    width: 100%;
    margin-bottom: 1rem;
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 30px rgba(246, 192, 0, 0.4);
    background: #ffd700;
}

.btn-secondary {
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
    border: 1px solid var(--border-primary);
    width: 100%;
}

.btn-secondary:hover {
    background: rgba(255, 255, 255, 0.15);
    border-color: var(--accent-primary);
    transform: translateY(-2px);
}

/* ===== HERO SECTION ===== */
.hero-section {
    background: var(--primary-bg);
    border: none;
    border-radius: 0;
    padding: 4rem 2.5rem 3rem;
    margin-bottom: 3rem;
    margin-top: 40px;
    position: relative;
    overflow: hidden;
    min-height: 0vh;
}

.hero-header {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 2rem;
}

.hero-badge {
    background: rgba(var(--accent-primary), 0.15);
    color: var(--accent-primary);
    padding: 0.75rem 1.5rem;
    border-radius: 25px;
    font-size: 2rem;
    font-weight: 700;
    border: 1px solid rgba(var(--accent-primary), 0.3);
    display: flex;
    align-items: center;
    gap: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.hero-players-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 3rem;
    align-items: center;
}

.hero-players-image {
    position: relative;
    border-radius: 20px;
    overflow: hidden;
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
}

.hero-players-image::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(45deg, rgba(var(--accent-primary), 0.2) 0%, rgba(var(--accent-secondary), 0.1) 100%);
    pointer-events: none;
}

.hero-content h2 {
    font-size: 2.5rem;
    font-weight: 800;
    margin-bottom: 1.5rem;
    background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    line-height: 1.2;
}

.hero-content p {
    color: var(--text-secondary);
    font-size: 1.2rem;
    line-height: 1.7;
    margin-bottom: 2rem;
    font-weight: 500;
}

.hero-features {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    margin-bottom: 2.5rem;
}

.hero-feature {
    display: flex;
    align-items: center;
    gap: 1rem;
    color: var(--text-primary);
    font-weight: 600;
    font-size: 1rem;
}

.hero-feature i {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    background: rgba(var(--accent-primary), 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--accent-primary);
    font-size: 1.2rem;
}

.hero-channels-btn {
    background: linear-gradient(135deg, var(--accent-primary) 0%, #ffd700 100%);
    color: #000000;
    border: none;
    padding: 1.2rem 2.5rem;
    border-radius: 12px;
    font-size: 1.1rem;
    font-weight: 700;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 1rem;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    position: relative;
    overflow: hidden;
}

.hero-channels-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    transition: left 0.6s ease;
}

.hero-channels-btn:hover {
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    background: linear-gradient(135deg, #ffd700 0%, var(--accent-primary) 100%);
}

.hero-channels-btn:hover::before {
    left: 100%;
}

.hero-channels-btn i:last-child {
    transition: var(--transition);
}

.hero-channels-btn:hover i:last-child {
    transform: translateX(5px);
}

/* ===== CONTENT GRID ===== */
.content-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 2rem;
    margin-bottom: 3rem;
}

/* ===== DAZN Style Match Cards ===== */
.matches-section {
    margin-bottom: 3rem;
}

.section-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1.5rem;
}

.section-category {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
}

.section-subtitle {
    font-size: 0.9rem;
    color: var(--text-secondary);
    margin-bottom: 0.5rem;
}

.matches-slider-container {
    position: relative;
    overflow: hidden;
}

.matches-slider {
    display: flex;
    gap: 1rem;
    overflow-x: auto;
    scroll-behavior: smooth;
    scrollbar-width: none;
    -ms-overflow-style: none;
    cursor: grab;
    user-select: none;
    padding-bottom: 1rem;
}

.matches-slider::-webkit-scrollbar {
    display: none;
}

.matches-slider.dragging {
    cursor: grabbing;
    scroll-behavior: auto;
}

.dazn-card {
    flex: 0 0 420px;
    height: 240px;
    border-radius: 4px;
    overflow: hidden;
    position: relative;
    cursor: pointer;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    text-decoration: none;
    color: inherit;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
}

.dazn-card:hover {
    transform: scale(1.02);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    text-decoration: none;
    color: inherit;
}

.dazn-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.6) 100%);
    z-index: 1;
}

.dazn-card-content {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 1.25rem;
    z-index: 2;
    background: linear-gradient(transparent, rgba(0, 0, 0, 0.85));
}

.dazn-card-date {
    position: absolute;
    top: 0.75rem;
    left: 0.75rem;
    background: var(--accent-primary);
    color: #000000;
    padding: 0.25rem 0.5rem;
    border-radius: 2px;
    font-size: 0.75rem;
    font-weight: 700;
    z-index: 3;
    text-transform: uppercase;
}

.dazn-card-title {
    color: white;
    font-size: 1.1rem;
    font-weight: 700;
    margin-bottom: 0.4rem;
    line-height: 1.3;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
}

.dazn-card-subtitle {
    color: rgba(255, 255, 255, 0.9);
    font-size: 0.9rem;
    line-height: 1.3;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

/* تصميم البطاقات الملونة */
.dazn-card-green {
    background: linear-gradient(135deg, #2c5530 0%, #1e3a1f 100%);
}

.dazn-card-red {
    background: linear-gradient(135deg, #c23616 0%, #8b2635 100%);
}

.dazn-card-blue {
    background: linear-gradient(135deg, #2f3542 0%, #1e2a3a 100%);
}

.dazn-card-purple {
    background: linear-gradient(135deg, #5f27cd 0%, #341f97 100%);
}

/* تأثيرات خاصة للبطاقات مع الصور */
.dazn-card.with-bg-image::before {
    background: linear-gradient(135deg, rgba(0, 0, 0, 0.4) 0%, rgba(0, 0, 0, 0.7) 100%);
}

.dazn-card.fifa-card {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 180"><defs><pattern id="stripes" patternUnits="userSpaceOnUse" width="4" height="4" patternTransform="rotate(45)"><rect width="2" height="4" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100%" height="100%" fill="%23c23616"/><rect width="100%" height="100%" fill="url(%23stripes)"/></svg>');
}

.dazn-card.transfer-card {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 180"><defs><pattern id="grid" patternUnits="userSpaceOnUse" width="20" height="20"><path d="M 20 0 L 0 0 0 20" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="%235f27cd"/><rect width="100%" height="100%" fill="url(%23grid)"/></svg>');
}

.dazn-card.golden-ball-card {
    background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 180"><defs><radialGradient id="goldGrad" cx="50%" cy="50%" r="50%"><stop offset="0%" style="stop-color:rgba(255,215,0,0.3)"/><stop offset="100%" style="stop-color:rgba(255,215,0,0)"/></radialGradient></defs><rect width="100%" height="100%" fill="%232f3542"/><rect width="100%" height="100%" fill="url(%23goldGrad)"/></svg>');
}

/* ===== COMPETITION CARDS ===== */
.competition-card {
    flex: 0 0 160px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
    text-align: center;
}

.competition-card:hover {
    transform: translateY(-5px);
}

.competition-link {
    display: block;
    text-decoration: none;
    color: inherit;
    text-align: center;
    pointer-events: auto;
}

.competition-image {
    width: 160px;
    height: 160px;
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 0.75rem;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    transition: all 0.3s ease;
    position: relative;
}

.competition-card:hover .competition-image {
    box-shadow: 0 8px 25px rgba(var(--accent-primary), 0.3);
    border-color: var(--accent-primary);
    transform: scale(1.02);
}

.competition-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    transition: transform 0.3s ease;
    user-select: none;
    pointer-events: none;
}

.competition-card:hover .competition-image img {
    transform: scale(1.05);
}

.competition-name {
    color: var(--text-primary);
    font-size: 0.95rem;
    font-weight: 600;
    margin: 0;
    line-height: 1.3;
    max-width: 160px;
    word-wrap: break-word;
    transition: color 0.3s ease;
}

.competition-card:hover .competition-name {
    color: var(--accent-primary);
}

/* تحسينات إضافية للسلايدر */
.matches-slider-container {
    position: relative;
    overflow: hidden;
    margin-bottom: 1rem;
}

.matches-slider {
    display: flex;
    gap: 1rem;
    overflow-x: auto;
    scroll-behavior: smooth;
    scrollbar-width: none;
    -ms-overflow-style: none;
    cursor: grab;
    user-select: none;
    padding: 1rem 0;
}

.matches-slider::-webkit-scrollbar {
    display: none;
}

.matches-slider.dragging {
    cursor: grabbing;
    scroll-behavior: auto;
}

/* تحسين عرض البطاقات على الشاشات المختلفة */
@media (max-width: 768px) {
    .competition-card {
        flex: 0 0 140px;
    }

    .competition-image {
        width: 140px;
        height: 140px;
    }

    .competition-name {
        font-size: 0.9rem;
        max-width: 140px;
    }
}

@media (max-width: 480px) {
    .competition-card {
        flex: 0 0 120px;
    }

    .competition-image {
        width: 120px;
        height: 120px;
    }

    .competition-name {
        font-size: 0.85rem;
        max-width: 120px;
    }
}



/* تجاوب مع الشاشات المتوسطة */
@media (max-width: 1024px) {
    .dazn-card {
        flex: 0 0 380px;
        height: 220px;
    }
}

/* تجاوب مع الشاشات الصغيرة */
@media (max-width: 768px) {
    .dazn-card {
        flex: 0 0 340px;
        height: 200px;
    }

    .dazn-card-title {
        font-size: 1rem;
    }

    .dazn-card-subtitle {
        font-size: 0.85rem;
    }
}

@media (max-width: 480px) {
    .dazn-card {
        flex: 0 0 300px;
        height: 180px;
    }

    .dazn-card-content {
        padding: 1rem;
    }

    .dazn-card-title {
        font-size: 0.95rem;
    }

    .dazn-card-subtitle {
        font-size: 0.8rem;
    }
}

.card {
    background: var(--gradient-card);
    border: 1px solid var(--border-primary);
    border-radius: 24px;
    padding: 0;
    cursor: pointer;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    overflow: hidden;
    min-height: 300px;
    display: flex;
    flex-direction: column;
    text-decoration: none;
    color: inherit;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.12);
    backdrop-filter: blur(15px);
}

.card-image {
    position: relative;
    transition: var(--transition);
}

.card:hover .card-image {
    transform: scale(1.02);
}

.hero-image-container {
    transition: var(--transition);
}

.hero-image-container:hover > div > div {
    transform: scale(1.02);
}

.card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    border-color: rgba(var(--accent-primary), 0.4);
}

.card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(246, 192, 0, 0.03) 0%, transparent 50%);
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: 1;
}

.card:hover::before {
    opacity: 1;
}

.card-header {
    position: relative;
    background: linear-gradient(135deg, rgba(var(--accent-primary), 0.08) 0%, rgba(var(--accent-secondary), 0.04) 100%);
    padding: 2rem 1.5rem;
    border-bottom: 1px solid rgba(var(--accent-primary), 0.1);
}

.card-icon {
    width: 85px;
    height: 85px;
    border-radius: 20px;
    background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5rem;
    color: #000000;
    box-shadow: 0 8px 25px rgba(var(--accent-primary), 0.4);
    margin-bottom: 1.5rem;
    transition: all 0.3s ease;
}

.card-content {
    padding: 2rem 1.5rem;
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.card-title {
    font-size: 1.4rem;
    font-weight: 800;
    color: var(--text-primary);
    margin-bottom: 1rem;
    line-height: 1.2;
    background: linear-gradient(135deg, var(--text-primary) 0%, rgba(var(--accent-primary), 0.8) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.card-description {
    color: var(--text-secondary);
    line-height: 1.6;
    margin-bottom: 1.5rem;
    font-size: 0.95rem;
}

.card-footer {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-top: 1rem;
    border-top: 1px solid var(--border-primary);
}

.card-count {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-muted);
    font-size: 0.9rem;
    font-weight: 500;
}

.card-count i {
    color: var(--accent-primary);
    font-size: 1rem;
}

.card-arrow {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    background: rgba(var(--accent-primary), 0.1);
    border: 1px solid rgba(var(--accent-primary), 0.3);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--accent-primary);
    font-size: 1.1rem;
    transition: var(--transition);
}

.card:hover .card-arrow {
    background: var(--accent-primary);
    color: #000000;
    transform: scale(1.1);
}

.card:hover .card-icon {
    transform: scale(1.1) rotate(5deg);
    box-shadow: 0 12px 35px rgba(var(--accent-primary), 0.5);
}

/* Live Indicator */
.card-live-indicator {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: #ff4757;
    color: white;
    padding: 0.4rem 0.8rem;
    border-radius: 15px;
    font-size: 0.8rem;
    font-weight: 600;
    text-transform: uppercase;
    z-index: 3;
    display: flex;
    align-items: center;
    gap: 0.4rem;
}

.card-live-indicator::before {
    content: '';
    width: 6px;
    height: 6px;
    background: white;
    border-radius: 50%;
    animation: pulse 2s infinite;
}

/* ===== SETTINGS SECTION ===== */
.settings-container {
    max-width: 800px;
    margin: 0 auto;
    padding: 0 1rem;
}

.settings-section {
    margin-bottom: 2rem;
    border-radius: 12px;
    overflow: hidden;            
    border: 1px solid var(--border-primary);
    background: rgba(255, 255, 255, 0.03);
}

.settings-section-header {
    background: rgba(255, 255, 255, 0.05);
    padding: 1rem;
    border-bottom: 1px solid var(--border-primary);
}

.settings-section-title {
    color: var(--text-primary);
    font-size: 1.2rem;
    font-weight: 600;
    margin: 0;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.settings-section-title i {
    color: var(--accent-primary);
    font-size: 1rem;
}

.settings-item {
    padding: 1rem;
    border-bottom: 1px solid var(--border-primary);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.settings-item:last-child {
    border-bottom: none;
}

.settings-item .info {
    flex-grow: 1;
    padding-right: 1rem;
}

.settings-item .title {
    font-weight: 600;
    margin-bottom: 0.25rem;
    color: var(--text-primary);
    font-size: 1rem;
}

.settings-item .desc {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.settings-item .value {
    color: var(--accent-primary);
    margin-left: 1rem;
    font-weight: 600;
    font-size: 0.9rem;
}

/* Settings Footer Styles */
.settings-footer {
    margin-top: 3rem;
    margin-bottom: 2rem;
}

.footer-separator {
    height: 2px;
    background: linear-gradient(90deg, 
        transparent 0%, 
        var(--accent-primary) 20%, 
        var(--accent-secondary) 50%, 
        var(--accent-primary) 80%, 
        transparent 100%);
    margin-bottom: 2rem;
    border-radius: 1px;
    opacity: 0.7;
}

.footer-content {
    background: var(--gradient-card);
    border: 1px solid var(--border-primary);
    border-radius: 20px;
    padding: 2rem;
    text-align: center;
    backdrop-filter: blur(15px);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

.footer-logo {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.footer-logo-img {
    width: 50px;
    height: 50px;
    border-radius: 12px;
    object-fit: contain;
    box-shadow: 0 4px 15px rgba(var(--accent-primary), 0.3);
}

.footer-text {
    text-align: right;
}

.footer-app-name {
    color: var(--accent-primary);
    font-size: 1.8rem;
    font-weight: 800;
    margin: 0;
    line-height: 1;
}

.footer-version {
    color: var(--text-secondary);
    font-size: 0.9rem;
    margin: 0.25rem 0 0 0;
    font-weight: 500;
}

.footer-copyright {
    border-top: 1px solid var(--border-primary);
    padding-top: 1.5rem;
}

.footer-copyright p {
    color: var(--text-secondary);
    margin: 0.5rem 0;
    font-size: 0.95rem;
    line-height: 1.4;
}

.footer-copyright p:first-child {
    color: var(--text-primary);
    font-weight: 600;
    font-size: 1rem;
}

.footer-subtitle {
    opacity: 0.8;
    font-size: 0.85rem !important;
}

.switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 24px;
}

.switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(255, 255, 255, 0.2);
    transition: .4s;
    border-radius: 24px;
}

.slider:before {
    position: absolute;
    content: "";
    height: 16px;
    width: 16px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
    border-radius: 50%;
}

input:checked + .slider {
    background-color: var(--accent-primary);
}

input:checked + .slider:before {
    transform: translateX(26px);
}

.color-picker {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 8px;
    margin-top: 10px;
    justify-content: center;
    max-width: 160px;
}

.quality-selector-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    backdrop-filter: blur(5px);
    z-index: 3000;
    display: flex;
    align-items: center;
    justify-content: center;
}

.quality-option:hover {
    border-color: var(--accent-primary) !important;
    background: rgba(var(--accent-primary), 0.1) !important;
    transform: translateY(-2px);
}

.color-option {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    cursor: pointer;
    border: 2px solid transparent;
    transition: transform 0.2s, border-color 0.3s, box-shadow 0.3s;
    position: relative;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.color-option:hover {
    transform: scale(1.1);
}

.color-option:active {
    transform: scale(0.9);
}

.color-option.selected {
    border-color: var(--text-primary);
    transform: scale(1.1);
}

.color-option.selected::after {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: white;
    font-weight: bold;
    font-size: 14px;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
}

.about-section {
    padding: 15px;
    text-align: center;
    font-size: 12px;
    color: var(--text-secondary);
    background: var(--secondary-bg);
    margin: 15px;
    border-radius: 8px;
    border: 1px solid var(--border-primary);
}

.about-section p {
    margin: 8px 0;
    line-height: 1.5;
}



/* Responsive Settings */
@media (max-width: 768px) {
    .settings-container {
        padding: 0 0.5rem;
    }

    .settings-section {
        margin-bottom: 1.5rem;
    }

    .settings-section-header {
        padding: 1.25rem;
    }

    .settings-section-title {
        font-size: 1.2rem;
    }

    .settings-item {
        padding: 1.25rem;
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }

    .settings-item .info {
        padding-right: 0;
        width: 100%;
    }

    .settings-item .title {
        font-size: 1rem;
    }

    .settings-item .desc {
        font-size: 0.85rem;
    }

    .color-picker {
        grid-template-columns: repeat(4, 1fr);
        gap: 8px;
        max-width: 200px;
        margin: 1rem auto 0;
        justify-self: center;
    }

    .color-option {
        width: 32px;
        height: 32px;
    }

    .footer-content {
        padding: 1.5rem;
    }

    .footer-logo {
        flex-direction: column;
        gap: 0.75rem;
    }

    .footer-text {
        text-align: center;
    }

    .footer-app-name {
        font-size: 1.6rem;
    }
}

@media (max-width: 480px) {
    .settings-section-header {
        padding: 1rem;
    }

    .settings-section-title {
        font-size: 1.1rem;
    }

    .settings-item {
        padding: 1rem;
    }

    .settings-item .title {
        font-size: 0.95rem;
    }

    .settings-item .desc {
        font-size: 0.8rem;
    }

    .color-picker {
        grid-template-columns: repeat(4, 1fr);
        gap: 6px;
        max-width: 160px;
    }

    .color-option {
        width: 28px;
        height: 28px;
    }

    .footer-content {
        padding: 1.25rem;
    }

    .footer-app-name {
        font-size: 1.4rem;
    }

    .footer-version {
        font-size: 0.8rem;
    }

    .footer-copyright p {
        font-size: 0.85rem;
    }

    .footer-subtitle {
        font-size: 0.75rem !important;
    }
}

/* ===== CHANNEL CATEGORIES ===== */
.channel-categories-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
    margin-bottom: 3rem;
}

.channel-category-card {
    background: var(--gradient-card);
    border: 1px solid var(--border-primary);
    border-radius: 20px;
    cursor: pointer;
    transition: var(--transition);
    position: relative;
    overflow: hidden;
    min-height: 200px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    padding: 2rem;
    text-align: center;
    box-shadow: 0 6px 20px var(--shadow-light);
}

.channel-category-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 40px var(--shadow-dark);
}

.channel-category-icon {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    color: white;
    margin: 0 auto 1rem;
    transition: var(--transition);
    box-shadow: 0 8px 25px rgba(var(--accent-primary), 0.3);
}

.channel-category-card:hover .channel-category-icon {
    transform: scale(1.1);
}

.channel-category-name {
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
}

.channel-category-desc {
    color: var(--text-secondary);
    font-size: 0.95rem;
    margin-bottom: 1rem;
}

.channel-category-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    background: rgba(var(--accent-primary), 0.1);
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 600;
    color: var(--accent-primary);
    border: 1px solid rgba(var(--accent-primary), 0.3);
}

/* ===== CHANNEL SUB PAGE ===== */
.channel-sub-page {
    display: none;
}

.channel-sub-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--border-primary);
}

.back-btn {
    padding: 0.75rem 1.5rem;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-primary);
    border-radius: var(--border-radius);
    color: var(--text-primary);
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-weight: 600;
    transition: var(--transition);
    text-decoration: none;
}

.back-btn:hover {
    background: var(--accent-primary);
    color: white;
    transform: translateX(5px);
}

.channel-sub-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 1rem;
}

.channel-item-wrapper {
    position: relative;
    width: 100%;
}

.channel-item {
    background: var(--gradient-card);
    border: 1px solid var(--border-primary);
    border-radius: 10px;
    padding: 0.875rem;
    text-decoration: none;
    color: inherit;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    gap: 0.875rem;
    position: relative;
    cursor: pointer;
    width: 100%;
    box-sizing: border-box;
}

.channel-item:hover {
    background: rgba(var(--accent-primary), 0.05);
    border-color: rgba(var(--accent-primary), 0.3);
    text-decoration: none;
    color: inherit;
}

.channel-logo {
    width: 58px;
    height: 58px;
    border-radius: 12px;
    background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    flex-shrink: 0;
    font-size: 1.2rem;
    box-shadow: 0 3px 12px rgba(0, 0, 0, 0.15);
    overflow: hidden;
    position: relative;
}

.channel-logo img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
    border-radius: 12px;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
}

.channel-info {
    flex: 1;
}

.channel-name {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.95rem;
    margin-bottom: 0.25rem;
    line-height: 1.3;
}

.channel-quality {
    font-size: 0.75rem;
    color: var(--accent-primary);
    background: rgba(var(--accent-primary), 0.08);
    padding: 0.15rem 0.5rem;
    border-radius: 6px;
    display: inline-block;
    font-weight: 500;
    border: 1px solid rgba(var(--accent-primary), 0.15);
}

.channel-status {
    width: 6px;
    height: 6px;
    background: #22c55e;
    border-radius: 50%;
    position: absolute;
    bottom: 8px;
    left: 8px;
    z-index: 15;
    border: 1px solid rgba(34, 197, 94, 0.3);
    box-shadow: 0 0 4px rgba(34, 197, 94, 0.4);
}

.channel-status::after {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: #22c55e;
    border-radius: 50%;
    opacity: 0.3;
    animation: statusGlow 2s ease-in-out infinite;
}

@keyframes statusGlow {
    0%, 100% { 
        transform: scale(1); 
        opacity: 0.4; 
    }
    50% { 
        transform: scale(1.3); 
        opacity: 0.1; 
    }
}



/* ===== SIMPLE PROFILE STYLES ===== */
.simple-profile-container {
    max-width: 500px;
    margin: 0 auto;
    padding: 1rem;
}

.profile-main-card {
    background: var(--gradient-card);
    border: 1px solid var(--border-primary);
    border-radius: 20px;
    padding: 0;
    position: relative;
    overflow: hidden;
    margin-bottom: 2rem;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);
}

.profile-card-background {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 80px;
    background: linear-gradient(135deg, 
        rgba(var(--accent-primary), 0.8) 0%, 
        rgba(var(--accent-secondary), 0.6) 100%),
        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 300"><defs><pattern id="dots" patternUnits="userSpaceOnUse" width="50" height="50"><circle cx="25" cy="25" r="2" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100%" height="100%" fill="url(%23dots)"/></svg>');
    z-index: 1;
}

.profile-card-content {
    position: relative;
    z-index: 2;
    padding: 1rem 2rem 2rem 2rem;
    text-align: center;
    margin-top: 40px;
}

.profile-avatar-large {
    width: 90px;
    height: 90px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 2.2rem;
    font-weight: 700;
    margin: 0 auto 1.5rem;
    border: 4px solid var(--secondary-bg);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    background-size: cover;
    background-position: center;
    transition: all 0.3s ease;
}

.profile-name {
    font-size: 1.6rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 0.5rem 0;
}

.profile-subtitle {
    color: var(--text-secondary);
    font-size: 0.95rem;
    margin: 0 0 2rem 0;
}

.profile-actions {
    margin-bottom: 2rem;
}

.edit-profile-btn {
    background: rgba(var(--accent-primary), 0.1);
    border: 2px solid rgba(var(--accent-primary), 0.3);
    color: var(--accent-primary);
    padding: 0.875rem 2rem;
    border-radius: 12px;
    font-size: 0.95rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
}

.edit-profile-btn:hover {
    background: var(--accent-primary);
    color: #000;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(var(--accent-primary), 0.3);
}

.profile-stats {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 2rem;
    padding: 1.5rem 0;
    border-top: 1px solid var(--border-primary);
}

.stat-item {
    text-align: center;
}

.stat-number {
    font-size: 1.8rem;
    font-weight: 800;
    color: var(--accent-primary);
    line-height: 1;
    margin-bottom: 0.25rem;
}

.stat-label {
    font-size: 0.85rem;
    color: var(--text-secondary);
    font-weight: 500;
}

.stat-divider {
    width: 1px;
    height: 40px;
    background: var(--border-primary);
}

.profile-quick-actions {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
}

.quick-action-btn {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem 1.5rem;
    background: var(--gradient-card);
    border: 1px solid var(--border-primary);
    border-radius: 12px;
    color: var(--text-primary);
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.95rem;
    font-weight: 500;
    text-align: right;
    width: 100%;
}

.quick-action-btn:hover {
    background: rgba(var(--accent-primary), 0.05);
    border-color: rgba(var(--accent-primary), 0.3);
    transform: translateY(-1px);
    box-shadow: 0 3px 12px rgba(0, 0, 0, 0.1);
}

.quick-action-btn i {
    color: var(--accent-primary);
    font-size: 1rem;
    width: 20px;
    text-align: center;
}

.quick-action-btn span {
    flex: 1;
}

.quick-action-btn.danger {
    border-color: rgba(255, 71, 87, 0.2);
}

.quick-action-btn.danger:hover {
    background: rgba(255, 71, 87, 0.05);
    border-color: rgba(255, 71, 87, 0.3);
}

.quick-action-btn.danger i {
    color: #ff4757;
}

.quick-action-btn.danger span {
    color: #ff4757;
}

/* Mobile Responsive */
@media (max-width: 768px) {
    .simple-profile-container {
        padding: 0.5rem;
    }

    .profile-card-content {
        padding: 1.5rem;
    }

    .profile-avatar-large {
        width: 80px;
        height: 80px;
        font-size: 2rem;
        margin: -40px auto 1.5rem;
    }

    .profile-name {
        font-size: 1.4rem;
    }

    .profile-stats {
        gap: 1.5rem;
    }

    .stat-number {
        font-size: 1.5rem;
    }

    .quick-action-btn {
        padding: 0.875rem 1.25rem;
        font-size: 0.9rem;
    }
}

@media (max-width: 480px) {
    .profile-card-content {
        padding: 1rem;
    }

    .profile-avatar-large {
        width: 70px;
        height: 70px;
        font-size: 1.8rem;
        margin: -35px auto 1rem;
    }

    .profile-name {
        font-size: 1.3rem;
    }

    .edit-profile-btn {
        padding: 0.75rem 1.5rem;
        font-size: 0.9rem;
    }

    .profile-stats {
        gap: 1rem;
        padding: 1rem 0;
    }

    .stat-number {
        font-size: 1.3rem;
    }

    .quick-action-btn {
        padding: 0.75rem 1rem;
        font-size: 0.85rem;
    }
}



/* Boost Experience Section */
.boost-experience-card {
    background: rgba(var(--accent-primary), 0.05);
    border: 1px solid rgba(var(--accent-primary), 0.15);
    border-radius: 16px;
    padding: 2rem;
    text-align: center;
    margin-bottom: 2rem;
}

.boost-title {
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 1rem;
}

.boost-description {
    color: var(--text-secondary);
    font-size: 0.95rem;
    line-height: 1.6;
    margin-bottom: 2rem;
}

.boost-progress-section {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 2rem;
}

.progress-circle-container {
    position: relative;
}

.circular-progress {
    position: relative;
    width: 100px;
    height: 100px;
}

.progress-ring {
    width: 100%;
    height: 100%;
    transform: rotate(-90deg);
}

.progress-ring-background {
    fill: none;
    stroke: rgba(255, 255, 255, 0.1);
    stroke-width: 8;
}

.progress-ring-fill {
    fill: none;
    stroke: var(--accent-primary);
    stroke-width: 8;
    stroke-linecap: round;
    transition: stroke-dashoffset 0.3s ease;
}

.progress-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: flex;
    align-items: baseline;
    gap: 2px;
}

.progress-current {
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--text-primary);
}

.progress-separator {
    font-size: 1rem;
    color: var(--text-secondary);
}

.progress-total {
    font-size: 1rem;
    color: var(--text-secondary);
}

.get-started-button {
    background: var(--accent-primary);
    color: #000000;
    border: none;
    padding: 1rem 2rem;
    border-radius: 12px;
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    min-width: 140px;
}

.get-started-button:hover {
    background: var(--accent-secondary);
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(var(--accent-primary), 0.4);
}

/* Edit Profile Modal */
.edit-profile-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(15px);
    z-index: 4000;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
}

.edit-profile-container {
    background: var(--secondary-bg);
    border: 1px solid var(--border-primary);
    border-radius: 20px;
    width: 100%;
    max-width: 500px;
    max-height: 90vh;
    overflow: hidden;
    position: relative;
    box-shadow: 0 25px 60px rgba(0, 0, 0, 0.4);
    animation: modalSlideUp 0.4s ease-out;
}

.edit-profile-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1.5rem 2rem;
    border-bottom: 1px solid var(--border-primary);
    background: var(--tertiary-bg);
}

.edit-profile-header h2 {
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0;
}

.edit-profile-close {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    transition: all 0.3s ease;
}

.edit-profile-close:hover {
    background: rgba(255, 71, 87, 0.2);
    color: #ff4757;
    transform: scale(1.1);
}

.edit-profile-content {
    padding: 2rem;
    max-height: calc(90vh - 100px);
    overflow-y: auto;
}

.avatar-remove-btn {
    position: absolute;
    top: -5px;
    left: -5px;
    width: 30px;
    height: 30px;
    background: #ff4757;
    border: 3px solid var(--secondary-bg);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.8rem;
    color: white;
    z-index: 5;
}

.avatar-remove-btn:hover {
    background: #ff3742;
    transform: scale(1.1);
}



.avatar-help-section {
    text-align: center;
    margin-top: 1rem;
}

.avatar-help-text {
    color: var(--text-muted);
    font-size: 0.9rem;
    margin: 0 0 0.5rem 0;
}

.avatar-size-info {
    color: var(--text-muted);
    font-size: 0.8rem;
    margin: 0;
    opacity: 0.8;
}

.character-count {
    text-align: left;
    margin-top: 0.3rem;
    font-size: 0.8rem;
    color: var(--text-muted);
}

.form-input:focus + .character-count {
    color: var(--accent-primary);
}

.current-avatar-display {
    position: relative;
    display: inline-block;
    margin-bottom: 1rem;
}

.current-avatar-display::before {
    content: '';
    position: absolute;
    top: -10px;
    left: -10px;
    right: -10px;
    bottom: -10px;
    border: 2px dashed transparent;
    border-radius: 50%;
    transition: all 0.3s ease;
    z-index: -1;
}

.current-avatar-display:hover::before {
    border-color: var(--accent-primary);
    background: rgba(var(--accent-primary), 0.05);
}

.edit-avatar-section {
    text-align: center;
    margin-bottom: 2rem;
}

.current-avatar-display {
    position: relative;
    display: inline-block;
    margin-bottom: 1rem;
}

.current-avatar {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5rem;
    color: white;
    font-weight: 700;
    border: 3px solid var(--accent-primary);
    box-shadow: 0 8px 25px rgba(var(--accent-primary), 0.3);
    cursor: pointer;
    transition: all 0.3s ease;
    background-size: cover;
    background-position: center;
}

.current-avatar:hover {
    transform: scale(1.05);
}

.avatar-edit-overlay {
    position: absolute;
    bottom: 0;
    right: 0;
    width: 30px;
    height: 30px;
    background: var(--accent-primary);
    border: 3px solid var(--secondary-bg);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 0.9rem;
    color: #000;
}

.avatar-edit-overlay:hover {
    background: var(--accent-secondary);
    transform: scale(1.1);
}

.avatar-help-text {
    color: var(--text-muted);
    font-size: 0.9rem;
    margin: 0;
}

.edit-profile-form {
    margin-top: 1rem;
}

.form-actions {
    display: flex;
    gap: 1rem;
    margin-top: 2rem;
}

.btn-cancel, .btn-save {
    flex: 1;
    padding: 1rem;
    border: none;
    border-radius: 12px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
}

.btn-cancel {
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid var(--border-primary);
    color: var(--text-secondary);
}

.btn-cancel:hover {
    background: rgba(255, 255, 255, 0.15);
    color: var(--text-primary);
}

.btn-save {
    background: var(--accent-primary);
    color: #000000;
    font-weight: 700;
}

.btn-save:hover {
    background: var(--accent-secondary);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(var(--accent-primary), 0.4);
}

@keyframes modalSlideUp {
    from {
        opacity: 0;
        transform: translateY(50px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

/* Responsive for Edit Profile Modal */
@media (max-width: 768px) {
    .edit-profile-container {
        width: 95%;
        margin: 1rem;
    }

    .edit-profile-content {
        padding: 1.5rem;
    }

    .current-avatar {
        width: 80px;
        height: 80px;
        font-size: 2rem;
    }

    .avatar-edit-overlay {
        width: 25px;
        height: 25px;
        font-size: 0.8rem;
    }

    .boost-progress-section {
        flex-direction: column;
        gap: 1.5rem;
    }

    .circular-progress {
        width: 80px;
        height: 80px;
    }

    .progress-current {
        font-size: 1.5rem;
    }

    .get-started-button {
        width: 100%;
    }
}



/* ===== PROFILE MODAL ===== */
.profile-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(15px);
    z-index: 3000;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 1rem;
}

.profile-container {
    background: var(--secondary-bg);
    border: 1px solid var(--border-primary);
    border-radius: 20px;
    width: 100%;
    max-width: 500px;
    max-height: 90vh;
    overflow: hidden;
    position: relative;
    box-shadow: 0 25px 60px rgba(0, 0, 0, 0.4);
    animation: profileSlideUp 0.4s ease-out;
}

@keyframes profileSlideUp {
    from {
        opacity: 0;
        transform: translateY(50px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

.profile-header-bar {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem 1.5rem;
    border-bottom: 1px solid var(--border-primary);
    background: var(--tertiary-bg);
}

.profile-header-title {
    font-size: 1.2rem;
    font-weight: 700;
    color: var(--text-primary);
}

.profile-close {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    transition: all 0.3s ease;
}

.profile-close:hover {
    background: rgba(255, 71, 87, 0.2);
    color: #ff4757;
    transform: scale(1.1);
}

.profile-main-content {
    padding: 2rem;
    max-height: calc(90vh - 80px);
    overflow-y: auto;
}

.profile-info-section {
    text-align: center;
    margin-bottom: 2.5rem;
}

.profile-avatar-container {
    position: relative;
    display: inline-block;
    margin-bottom: 1.5rem;
}

.profile-avatar-large {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    color: white;
    font-weight: 700;
    border: 3px solid var(--accent-primary);
    box-shadow: 0 8px 25px rgba(var(--accent-primary), 0.3);
}



@keyframes statusPulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

.profile-name {
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
    line-height: 1.2;
}





.edit-profile-btn {
    width: 100%;
    padding: 1rem;
    background: rgba(255, 255, 255, 0.1);
    border: 2px solid var(--border-primary);
    border-radius: 12px;
    color: var(--text-primary);
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    margin-bottom: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.edit-profile-btn:hover {
    background: rgba(255, 255, 255, 0.15);
    border-color: var(--accent-primary);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
}

.profile-edit-description {
    color: var(--text-muted);
    font-size: 0.85rem;
    line-height: 1.4;
}

.boost-experience-section {
    background: rgba(var(--accent-primary), 0.05);
    border: 1px solid rgba(var(--accent-primary), 0.15);
    border-radius: 16px;
    padding: 2rem;
    text-align: center;
    margin-bottom: 2rem;
}

.boost-title {
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: 1rem;
}

.boost-description {
    color: var(--text-secondary);
    font-size: 0.95rem;
    line-height: 1.6;
    margin-bottom: 2rem;
}

.progress-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 2rem;
}

.progress-circle {
    position: relative;
    width: 100px;
    height: 100px;
}

.progress-svg {
    width: 100%;
    height: 100%;
    transform: rotate(-90deg);
}

.progress-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: flex;
    align-items: baseline;
    gap: 2px;
}

.progress-number {
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--text-primary);
}

.progress-total {
    font-size: 1rem;
    color: var(--text-secondary);
}

.get-started-btn {
    background: var(--accent-primary);
    color: #000000;
    border: none;
    padding: 1rem 2rem;
    border-radius: 12px;
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    min-width: 120px;
}

.get-started-btn:hover {
    background: var(--accent-secondary);
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(var(--accent-primary), 0.4);
}

.profile-logout-section {
    text-align: center;
    padding-top: 1rem;
    border-top: 1px solid var(--border-primary);
}

.logout-btn {
    background: rgba(255, 71, 87, 0.1);
    border: 1px solid rgba(255, 71, 87, 0.3);
    color: #ff4757;
    padding: 0.75rem 2rem;
    border-radius: 12px;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin: 0 auto;
}

.logout-btn:hover {
    background: rgba(255, 71, 87, 0.2);
    border-color: #ff4757;
    transform: translateY(-2px);
}

/* الاستجابة للهواتف المحمولة */
@media (max-width: 768px) {
    .profile-overlay {
        padding: 0.5rem;
    }

    .profile-container {
        width: 100%;
        max-width: none;
        max-height: 95vh;
        border-radius: 16px;
    }

    .profile-main-content {
        padding: 1.5rem;
    }

    .profile-avatar-large {
        width: 70px;
        height: 70px;
        font-size: 1.8rem;
    }

    .profile-name {
        font-size: 1.5rem;
    }

    .boost-experience-section {
        padding: 1.5rem;
    }

    .progress-container {
        flex-direction: column;
        gap: 1.5rem;
    }

    .progress-circle {
        width: 80px;
        height: 80px;
    }

    .progress-number {
        font-size: 1.5rem;
    }

    .get-started-btn {
        width: 100%;
        padding: 1rem;
    }


}

@media (max-width: 480px) {
    .profile-main-content {
        padding: 1rem;
    }

    .boost-experience-section {
        padding: 1rem;
    }

    .boost-title {
        font-size: 1.2rem;
    }

    .boost-description {
        font-size: 0.9rem;
    }

    .edit-profile-btn {
        padding: 0.875rem;
        font-size: 0.9rem;
    }
}

/* ===== SIMPLE NOTIFICATION SYSTEM ===== */
.notification-container {
    position: fixed;
    top: 80px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 5000;
    max-width: 400px;
    width: 100%;
    pointer-events: none;
}

.notification {
    background: var(--secondary-bg);
    border: 1px solid var(--border-primary);
    border-radius: 12px;
    padding: 1rem 1.5rem;
    margin-bottom: 1rem;
    color: var(--text-primary);
    font-size: 0.95rem;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    transform: translateY(-50px);
    opacity: 0;
    transition: all 0.3s ease;
    pointer-events: auto;
    position: relative;
    display: flex;
    align-items: center;
    gap: 1rem;
}

.notification.show {
    transform: translateY(0);
    opacity: 1;
}

.notification-icon {
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    flex-shrink: 0;
}

.notification.success {
    border-left: 4px solid #10b981;
}

.notification.success .notification-icon {
    color: #10b981;
}

.notification.error {
    border-left: 4px solid #ff4757;
}

.notification.error .notification-icon {
    color: #ff4757;
}

.notification.info {
    border-left: 4px solid var(--accent-primary);
}

.notification.info .notification-icon {
    color: var(--accent-primary);
}

.notification-text {
    flex: 1;
    line-height: 1.4;
}

.notification-close {
    width: 20px;
    height: 20px;
    border: none;
    background: none;
    color: var(--text-muted);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.9rem;
    transition: color 0.2s ease;
    flex-shrink: 0;
}

.notification-close:hover {
    color: var(--text-primary);
}



/* Mobile responsive */
@media (max-width: 768px) {
    .notification-container {
        top: 70px;
        left: 1rem;
        right: 1rem;
        transform: none;
        max-width: none;
    }

    .islamic-notification {
        padding: 1.25rem !important;
        font-size: 0.95rem !important;
    }
}

/* ===== PERFORMANCE OPTIMIZATIONS ===== */
/* تحسينات الأداء للأجهزة المختلفة */

/* وضع الأداء المنخفض للأجهزة الضعيفة */
.low-performance-mode * {
    transition-duration: 0.1s !important;
    animation-duration: 0.1s !important;
}

.low-performance-mode .card:hover,
.low-performance-mode .channel-item:hover,
.low-performance-mode .nav-btn:hover {
    transform: none !important;
    box-shadow: none !important;
}

/* تحسينات للتلفاز */
.tv-optimized {
    font-size: 18px;
}

.tv-optimized .card,
.tv-optimized .channel-item,
.tv-optimized .nav-btn {
    padding: 1.5rem;
    border-radius: 8px;
}

/* تقليل الرسوم المتحركة للأجهزة الضعيفة */
@media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        transform: none !important;
    }
}

/* تحسين الأداء للشاشات اللمسية */
@media (hover: none) and (pointer: coarse) {
    .card:hover, .channel-item:hover, .nav-btn:hover {
        transform: none;
        box-shadow: none;
    }
}

/* تحسينات للذاكرة والأداء */
.card, .channel-item, .nav-btn {
    will-change: auto;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
}

/* ===== TV AND LARGE SCREEN SUPPORT ===== */
/* دعم الشاشات الكبيرة مثل Android TV و Smart TV */
@media (min-width: 1920px) {
    html {
        font-size: 20px;
    }
    
    .main-content {
        padding: 3rem 4rem;
    }
    
    .header {
        min-height: 80px;
    }
    
    .header-content {
        padding: 0 4rem;
    }
    
    .logo img {
        height: 50px;
    }
    
    .nav-btn {
        width: 60px;
        height: 60px;
        font-size: 1.5rem;
    }
    
    .user-avatar-simple {
        width: 55px;
        height: 55px;
        font-size: 1.4rem;
    }
    
    .premium-btn {
        padding: 1rem 2rem;
        font-size: 1.2rem;
    }
}

@media (min-width: 2560px) {
    html {
        font-size: 24px;
    }
    
    .main-content {
        padding: 4rem 6rem;
    }
}

/* ===== FOCUS STYLES REMOVED ===== */
/* تم حذف أنماط التحكم بالريموت والإطار الملون */

/* ===== RESPONSIVE DESIGN ===== */
@media (max-width: 768px) {
    html {
        font-size: 14px;
    }

    .section-title {
        font-size: 1.8rem;
    }

    .hero-section {
        padding: 1.5rem;
    }

    .hero-players-container {
        grid-template-columns: 1fr;
        gap: 2rem;
        text-align: center;
    }

    .hero-players-image {
        order: 2;
    }

    .hero-content {
        order: 1;
    }

    .hero-content h2 {
        font-size: 2rem;
    }

    .hero-features {
        align-items: center;
    }

    .hero-channels-btn {
        align-self: center;
    }

    .content-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
    }

    .settings-grid {
        grid-template-columns: 1fr;
    }

    .channel-categories-grid {
        grid-template-columns: 1fr;
    }

    .sidebar {
        width: 100%;
        right: -100%;
    }

    .profile-container {
        width: 95%;
        margin: 1rem;
    }

    .notification-container {
        top: 70px;
        left: 1rem;
        right: 1rem;
        transform: none;
        max-width: none;
    }

    .color-themes {
        grid-template-columns: repeat(5, 1fr);
    }
}

@media (max-width: 480px) {
    .header {
        padding: 0.3rem 0;
    }

    .header-content {
        padding: 0 0.5rem;
    }

    .logo {
        font-size: 1.2rem;
    }

    .user-info {
        padding: 0.4rem 0.6rem;
        gap: 0.4rem;
    }

    .user-avatar {
        width: 30px;
        height: 30px;
        font-size: 0.75rem;
        box-shadow: 0 2px 10px rgba(var(--accent-primary), 0.3), 
                    0 1px 4px rgba(0, 0, 0, 0.15);
    }

    .nav-btn {
        width: 32px;
        height: 32px;
        font-size: 0.85rem;
    }

    .main-app {
        margin-top: 45px;
    }

    .login-box {
        padding: 2rem 1.5rem;
    }

    .hero-info h2 {
        font-size: 1.6rem;
    }

    .card-content {
        padding: 1.2rem;
    }

    .team-logo {
        width: 50px;
        height: 50px;
        font-size: 1.3rem;
    }

    .color-themes {
        grid-template-columns: repeat(3, 1fr);
    }

    .color-theme {
        width: 40px;
        height: 40px;
    }
}

/* ===== OPTIMIZED ANIMATIONS ===== */
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.8; }
}

.animate-fade-in {
    animation: fadeIn 0.3s ease forwards;
}

/* ===== SEARCH STYLES ===== */
.search-container {
    max-width: 800px;
    margin: 0 auto;
}

.search-box {
    position: relative;
    background: var(--gradient-card);
    border: 1px solid var(--border-primary);
    border-radius: 50px;
    padding: 0.75rem 1.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    transition: var(--transition);
    margin-bottom: 1.5rem;
}

.search-box:focus-within {
    border-color: var(--accent-primary);
    box-shadow: 0 0 20px rgba(var(--accent-primary), 0.2);
}

.search-icon {
    color: var(--text-muted);
    font-size: 1.1rem;
}

.search-input {
    flex: 1;
    border: none;
    background: transparent;
    color: var(--text-primary);
    font-size: 1rem;
    outline: none;
    padding: 0.5rem 0;
}

.search-input::placeholder {
    color: var(--text-muted);
}

.search-clear {
    background: none;
    border: none;
    color: var(--text-muted);
    cursor: pointer;
    padding: 0.25rem;
    border-radius: 50%;
    transition: var(--transition);
}

.search-clear:hover {
    color: var(--accent-primary);
    background: rgba(var(--accent-primary), 0.1);
}



.search-results {
    margin-bottom: 2rem;
}

.search-results-title {
    font-size: 1.3rem;
    font-weight: 700;
    color: var(--accent-primary);
    margin-bottom: 1rem;
    text-align: center;
}

.search-results-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 1rem;
}

.search-result-item {
    background: var(--gradient-card);
    border: 1px solid var(--border-primary);
    border-radius: var(--border-radius);
    padding: 1rem;
    text-decoration: none;
    color: inherit;
    transition: var(--transition);
    display: flex;
    align-items: center;
    gap: 1rem;
    position: relative;
}

.search-result-item:hover {
    background: rgba(var(--accent-primary), 0.05);
    border-color: var(--accent-primary);
    transform: translateY(-3px);
}

.search-result-icon {
    width: 45px;
    height: 45px;
    border-radius: 10px;
    background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.1rem;
    flex-shrink: 0;
}

.search-result-info {
    flex: 1;
    min-width: 0;
}

.search-result-name {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.95rem;
    margin-bottom: 0.3rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.search-result-category {
    font-size: 0.8rem;
    color: var(--text-muted);
    background: rgba(var(--accent-primary), 0.1);
    padding: 0.2rem 0.6rem;
    border-radius: 10px;
    display: inline-block;
}

/* Performance Optimizations */
.lazy-load {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease, transform 0.6s ease;
}

.lazy-load.loaded {
    opacity: 1;
    transform: translateY(0);
}

/* Enhanced Mobile Responsiveness */
@media (max-width: 768px) {
    .search-box {
        padding: 0.6rem 1rem;
        margin-bottom: 1rem;
    }

    .search-input {
        font-size: 0.9rem;
    }

    .filter-btn {
        padding: 0.4rem 0.8rem;
        font-size: 0.8rem;
    }

    .search-results-grid {
        grid-template-columns: 1fr;
    }

    .search-result-item {
        padding: 0.75rem;
    }

    .search-result-icon {
        width: 40px;
        height: 40px;
        font-size: 1rem;
    }

    .hero-players-container {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }

    .hero-content h2 {
        font-size: 1.8rem;
        line-height: 1.3;
    }

    .hero-content p {
        font-size: 1rem;
        line-height: 1.6;
    }

    .hero-channels-btn {
        padding: 1rem 2rem;
        font-size: 1rem;
    }

    .content-grid {
        grid-template-columns: 1fr;
    }

    .channel-categories-grid {
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    }

    .channel-sub-grid {
        grid-template-columns: 1fr;
    }

    .sidebar {
        width: 100vw;
        right: -100vw;
    }
}

@media (max-width: 480px) {
    .hero-content h2 {
        font-size: 1.5rem;
    }

    .channel-categories-grid {
        grid-template-columns: 1fr;
    }

    .search-container {
        padding: 0 0.5rem;
    }

    .filter-btn {
        padding: 0.3rem 0.6rem;
        font-size: 0.75rem;
    }
}

/* Touch Improvements for Mobile */
@media (hover: none) {
    .card:hover,
    .channel-item:hover,
    .search-result-item:hover {
        transform: none;
    }

    .card:active,
    .channel-item:active,
    .search-result-item:active {
        transform: scale(0.98);
    }
}

/* ===== BEST OF FOOTBALL SECTION STYLES ===== */
.best-football-section {
    margin-bottom: 4rem;
}

.best-football-slider-container {
    position: relative;
    overflow: hidden;
}

.best-football-slider {
    display: flex;
    gap: 1.5rem;
    overflow-x: auto;
    scroll-behavior: smooth;
    padding: 1rem 0 2rem 0;
    scrollbar-width: none;
    -ms-overflow-style: none;
    cursor: grab;
    user-select: none;
}

.best-football-slider::-webkit-scrollbar {
    display: none;
}

.best-football-slider.dragging {
    cursor: grabbing;
    scroll-behavior: auto;
}

.football-event-card {
    flex: 0 0 420px;
    position: relative;
    border-radius: 12px;
    overflow: hidden;
    cursor: pointer;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    background: var(--gradient-card);
    border: 1px solid var(--border-primary);
    height: 250px;
    margin-bottom: 10px;
}

.football-event-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    border-color: var(--accent-primary);
}

.card-background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 60%;
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    z-index: 1;
    border-radius: 12px 12px 0 0;
}

.live-badge-football {
    position: absolute;
    top: 15px;
    right: 15px;
    background: #ff0000;
    color: white;
    padding: 6px 12px;
    border-radius: 15px;
    font-weight: 600;
    font-size: 0.8rem;
    text-transform: uppercase;
    z-index: 10;
    box-shadow: 0 2px 8px rgba(255, 0, 0, 0.3);
}

.logo-container-football {
    position: absolute;
    top: 20px;
    left: 20px;
    z-index: 10;
}

.football-logo {
    font-size: 1.5rem;
    font-weight: 700;
    color: white;
    text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.7);
    background: rgba(0, 0, 0, 0.3);
    padding: 8px 12px;
    border-radius: 8px;
    backdrop-filter: blur(5px);
}

.football-logo .sport {
    display: block;
    line-height: 1;
}

.football-logo .vision {
    display: block;
    line-height: 1;
}

.football-info {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(transparent, rgba(0, 0, 0, 0.85));
    padding: 15px 20px;
    z-index: 10;
}

.football-title {
    font-size: 1.3rem;
    font-weight: 700;
    margin-bottom: 8px;
    color: var(--text-primary);
    line-height: 1.3;
}

.football-subtitle {
    font-size: 0.95rem;
    color: var(--text-secondary);
    line-height: 1.4;
}

/* Responsive Design for Best of Football Section */
@media (max-width: 768px) {
    .football-event-card {
        flex: 0 0 340px;
        height: 220px;
    }

    .football-logo {
        font-size: 2rem;
    }

    .logo-container-football {
        left: 20px;
    }

    .football-title {
        font-size: 1.5rem;
    }

    .ball-container {
        width: 60px;
        height: 60px;
        bottom: 20px;
        right: 20px;
    }

    .best-football-slider {
        gap: 1rem;
    }
}

@media (max-width: 480px) {
    .football-event-card {
        flex: 0 0 300px;
        height: 200px;
    }

    .football-logo {
        font-size: 1.8rem;
    }

    .football-title {
        font-size: 1.3rem;
    }

    .football-subtitle {
        font-size: 1rem;
    }

    .ball-container {
        width: 50px;
        height: 50px;
    }
}

/* ===== ENHANCED SIMPLE WELCOME SECTION STYLES ===== */
.simple-welcome-section {
    background: linear-gradient(135deg, 
        rgba(255, 255, 255, 0.12) 0%, 
        rgba(255, 255, 255, 0.06) 30%,
        rgba(var(--accent-primary), 0.08) 70%,
        rgba(0, 0, 0, 0.05) 100%);
    border: 2px solid rgba(255, 255, 255, 0.2);
    border-radius: 35px;
    padding: 5rem 3rem;
    margin: 4rem 0 6rem;
    text-align: center;
    box-shadow: 
        0 30px 80px rgba(0, 0, 0, 0.2),
        0 15px 40px rgba(var(--accent-primary), 0.1),
        inset 0 2px 0 rgba(255, 255, 255, 0.15),
        inset 0 -2px 0 rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(25px);
    position: relative;
    overflow: hidden;
    animation: welcomeSectionFadeIn 1.2s ease-out;
}

.simple-welcome-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, 
        transparent 0%, 
        rgba(var(--accent-primary), 0.8) 15%, 
        var(--accent-primary) 30%, 
        var(--accent-secondary) 70%, 
        rgba(var(--accent-secondary), 0.8) 85%, 
        transparent 100%);
    border-radius: 35px 35px 0 0;
}

.simple-welcome-section::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: 
        radial-gradient(circle at 20% 30%, rgba(var(--accent-primary), 0.08) 0%, transparent 40%),
        radial-gradient(circle at 80% 70%, rgba(var(--accent-secondary), 0.06) 0%, transparent 40%),
        radial-gradient(circle at 50% 50%, rgba(255, 255, 255, 0.03) 0%, transparent 60%);
    z-index: 1;
    pointer-events: none;
}

.welcome-container {
    max-width: 900px;
    margin: 0 auto;
    position: relative;
    z-index: 2;
    display: grid;
    grid-template-columns: 1fr 1.2fr;
    gap: 4rem;
    align-items: center;
}

.welcome-content {
    text-align: right;
    animation: welcomeContentSlide 1s ease-out 0.3s both;
}

.app-logo {
    margin-bottom: 2.5rem;
    position: relative;
    display: inline-block;
}

.app-logo::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 140px;
    height: 140px;
    background: radial-gradient(circle, 
        rgba(var(--accent-primary), 0.2) 0%, 
        rgba(var(--accent-secondary), 0.1) 40%,
        transparent 70%);
    border-radius: 50%;
    z-index: -1;
    animation: logoGlow 4s ease-in-out infinite alternate;
}

.app-logo img {
    width: 110px;
    height: 110px;
    border-radius: 25px;
    box-shadow: 
        0 15px 45px rgba(var(--accent-primary), 0.5),
        0 8px 25px rgba(0, 0, 0, 0.3),
        0 0 0 3px rgba(255, 255, 255, 0.1),
        0 0 0 6px rgba(var(--accent-primary), 0.2);
    transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    filter: brightness(1.05) contrast(1.1);
}

.app-logo img:hover {
    transform: scale(1.1) rotate(3deg);
    box-shadow: 
        0 20px 60px rgba(var(--accent-primary), 0.6),
        0 12px 35px rgba(0, 0, 0, 0.4),
        0 0 0 3px rgba(255, 255, 255, 0.2),
        0 0 0 8px rgba(var(--accent-primary), 0.3);
    filter: brightness(1.1) contrast(1.15);
}

.welcome-title {
    font-size: 3.2rem;
    font-weight: 900;
    background: linear-gradient(135deg, 
        var(--text-primary) 0%, 
        var(--accent-primary) 30%,
        var(--accent-secondary) 70%,
        var(--text-primary) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin: 0 0 1.8rem 0;
    line-height: 1.1;
    letter-spacing: -0.03em;
    text-shadow: 0 2px 10px rgba(var(--accent-primary), 0.3);
}

.welcome-subtitle {
    font-size: 1.3rem;
    color: var(--text-secondary);
    margin: 0 0 3rem 0;
    line-height: 1.7;
    font-weight: 500;
    opacity: 0.9;
}

.welcome-image-section {
    text-align: center;
    animation: welcomeImageSlide 1s ease-out 0.5s both;
}

.welcome-main-image {
    position: relative;
    width: 100%;
    max-width: 600px;
    margin: 0 auto;
    border-radius: 18px;
    overflow: hidden;
    box-shadow: 
        0 25px 70px rgba(0, 0, 0, 0.4),
        0 15px 35px rgba(0, 0, 0, 0.2),
        0 0 0 2px rgba(255, 255, 255, 0.1),
        0 0 0 4px rgba(var(--accent-primary), 0.2);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    transform: perspective(1000px) rotateY(-5deg) rotateX(2deg);
}

.welcome-main-image:hover {
    transform: perspective(1000px) rotateY(0deg) rotateX(0deg) translateY(-8px);
    box-shadow: 
        0 35px 90px rgba(0, 0, 0, 0.5),
        0 20px 45px rgba(0, 0, 0, 0.3),
        0 0 0 2px rgba(255, 255, 255, 0.15),
        0 0 0 6px rgba(var(--accent-primary), 0.3);
}

.welcome-main-image::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, 
        rgba(var(--accent-primary), 0.15) 0%, 
        transparent 30%,
        transparent 70%,
        rgba(var(--accent-secondary), 0.1) 100%);
    z-index: 1;
    pointer-events: none;
    opacity: 0.8;
}

.welcome-main-image img {
    width: 100%;
    height: auto;
    display: block;
    transition: transform 0.4s ease;
    filter: brightness(1.05) contrast(1.1) saturate(1.1);
}

.welcome-main-image:hover img {
    transform: scale(1.03);
    filter: brightness(1.1) contrast(1.15) saturate(1.15);
}

.welcome-image-text {
    position: absolute;
    bottom: 25px;
    left: 25px;
    right: 25px;
    color: white;
    z-index: 10;
    text-shadow: 0 4px 15px rgba(0, 0, 0, 0.9);
    background: linear-gradient(135deg, 
        rgba(0, 0, 0, 0.7) 0%, 
        rgba(0, 0, 0, 0.5) 50%,
        rgba(var(--accent-primary), 0.2) 100%);
    padding: 1.5rem 2rem;
    border-radius: 15px;
    backdrop-filter: blur(15px);
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.welcome-image-text h3 {
    font-size: 1.4rem;
    font-weight: 700;
    margin: 0;
    line-height: 1.3;
}

.welcome-action {
    margin-top: 3rem;
    animation: welcomeActionSlide 1s ease-out 0.7s both;
}

.welcome-channels-btn {
    background: linear-gradient(135deg, 
        var(--accent-primary) 0%, 
        var(--accent-secondary) 50%,
        var(--accent-primary) 100%);
    color: #000000;
    border: none;
    padding: 1.5rem 3rem;
    border-radius: 60px;
    font-size: 1.2rem;
    font-weight: 800;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    gap: 1.2rem;
    transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    box-shadow: 
        0 12px 35px rgba(var(--accent-primary), 0.5),
        0 6px 20px rgba(0, 0, 0, 0.2),
        inset 0 2px 0 rgba(255, 255, 255, 0.3),
        inset 0 -2px 0 rgba(0, 0, 0, 0.1);
    text-transform: none;
    letter-spacing: 0.5px;
    position: relative;
    overflow: hidden;
    background-size: 200% 200%;
    animation: gradientShift 3s ease infinite;
}

.welcome-channels-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(255, 255, 255, 0.4), 
        transparent);
    transition: left 0.8s ease;
}

.welcome-channels-btn:hover::before {
    left: 100%;
}

.welcome-channels-btn:hover {
    transform: translateY(-5px) scale(1.05);
    box-shadow: 
        0 18px 50px rgba(var(--accent-primary), 0.6),
        0 10px 30px rgba(0, 0, 0, 0.3),
        inset 0 3px 0 rgba(255, 255, 255, 0.4),
        inset 0 -3px 0 rgba(0, 0, 0, 0.15);
    background: linear-gradient(135deg, 
        var(--accent-secondary) 0%, 
        var(--accent-primary) 50%,
        var(--accent-secondary) 100%);
}

.welcome-channels-btn:active {
    transform: translateY(-2px) scale(1.02);
}

.welcome-channels-btn i {
    font-size: 1.3rem;
    transition: transform 0.3s ease;
    filter: drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3));
}

.welcome-channels-btn:hover i:last-child {
    transform: translateX(8px);
}

/* Enhanced Animations */
@keyframes welcomeSectionFadeIn {
    from {
        opacity: 0;
        transform: translateY(40px) scale(0.98);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes welcomeContentSlide {
    from {
        opacity: 0;
        transform: translateX(30px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes welcomeImageSlide {
    from {
        opacity: 0;
        transform: translateX(-30px) scale(0.9) perspective(1000px) rotateY(-15deg);
    }
    to {
        opacity: 1;
        transform: translateX(0) scale(1) perspective(1000px) rotateY(-5deg);
    }
}

@keyframes welcomeActionSlide {
    from {
        opacity: 0;
        transform: translateY(25px) scale(0.95);
    }
    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}

@keyframes logoGlow {
    0% {
        opacity: 0.6;
        transform: translate(-50%, -50%) scale(1);
    }
    50% {
        opacity: 0.9;
        transform: translate(-50%, -50%) scale(1.05);
    }
    100% {
        opacity: 0.6;
        transform: translate(-50%, -50%) scale(1);
    }
}

@keyframes gradientShift {
    0% {
        background-position: 0% 50%;
    }
    50% {
        background-position: 100% 50%;
    }
    100% {
        background-position: 0% 50%;
    }
}

/* Responsive Design for Welcome Section */
/* شاشات كبيرة جداً - 4K و 8K */
@media (min-width: 2560px) {
    .simple-welcome-section {
        padding: 8rem 5rem;
        margin: 6rem 0 8rem;
        border-radius: 50px;
    }

    .welcome-container {
        max-width: 1400px;
        gap: 6rem;
    }

    .app-logo img {
        width: 140px;
        height: 140px;
        border-radius: 35px;
    }

    .welcome-title {
        font-size: 4.5rem;
    }

    .welcome-subtitle {
        font-size: 1.8rem;
    }

    .welcome-channels-btn {
        padding: 2rem 4rem;
        font-size: 1.5rem;
        border-radius: 80px;
    }

    .welcome-image-text h3 {
        font-size: 1.8rem;
    }
}

/* شاشات التلفاز الكبيرة */
@media (min-width: 1920px) and (max-width: 2559px) {
    .simple-welcome-section {
        padding: 6rem 4rem;
        margin: 5rem 0 7rem;
        border-radius: 45px;
    }

    .welcome-container {
        max-width: 1200px;
        gap: 5rem;
    }

    .app-logo img {
        width: 130px;
        height: 130px;
        border-radius: 30px;
    }

    .welcome-title {
        font-size: 4rem;
    }

    .welcome-subtitle {
        font-size: 1.6rem;
    }

    .welcome-channels-btn {
        padding: 1.8rem 3.5rem;
        font-size: 1.4rem;
        border-radius: 70px;
    }
}

/* شاشات الكمبيوتر والتلفاز المتوسط */
@media (min-width: 1200px) and (max-width: 1919px) {
    .simple-welcome-section {
        padding: 5rem 3rem;
        border-radius: 40px;
    }

    .welcome-container {
        gap: 4rem;
    }

    .welcome-title {
        font-size: 3.5rem;
    }

    .welcome-subtitle {
        font-size: 1.4rem;
    }
}

/* الأجهزة اللوحية الكبيرة */
@media (max-width: 1199px) {
    .welcome-container {
        grid-template-columns: 1fr;
        gap: 3rem;
        text-align: center;
    }

    .welcome-content {
        text-align: center;
        order: 1;
    }

    .welcome-image-section {
        order: 2;
    }

    .welcome-main-image {
        transform: perspective(1000px) rotateY(0deg) rotateX(0deg);
        max-width: 500px;
    }
}

/* الأجهزة اللوحية المتوسطة */
@media (max-width: 768px) {
    .simple-welcome-section {
        padding: 3.5rem 2.5rem;
        margin: 2.5rem 0 4.5rem;
        border-radius: 30px;
    }

    .welcome-container {
        gap: 2.5rem;
    }

    .app-logo img {
        width: 90px;
        height: 90px;
        border-radius: 22px;
    }

    .welcome-title {
        font-size: 2.5rem;
        line-height: 1.2;
    }

    .welcome-subtitle {
        font-size: 1.15rem;
        margin-bottom: 2.5rem;
    }

    .welcome-main-image {
        max-width: 400px;
    }

    .welcome-image-text {
        padding: 1.2rem 1.5rem;
        bottom: 20px;
        left: 20px;
        right: 20px;
        border-radius: 12px;
    }

    .welcome-image-text h3 {
        font-size: 1.25rem;
    }

    .welcome-channels-btn {
        padding: 1.3rem 2.5rem;
        font-size: 1.1rem;
        border-radius: 50px;
    }
}

/* الهواتف الذكية */
@media (max-width: 480px) {
    .simple-welcome-section {
        padding: 2.5rem 1.5rem;
        margin: 1.5rem 0 3.5rem;
        border-radius: 25px;
    }

    .welcome-container {
        gap: 2rem;
    }

    .app-logo img {
        width: 80px;
        height: 80px;
        border-radius: 20px;
    }

    .welcome-title {
        font-size: 2.2rem;
        line-height: 1.15;
    }

    .welcome-subtitle {
        font-size: 1.05rem;
        margin-bottom: 2rem;
    }

    .welcome-main-image {
        max-width: 320px;
        border-radius: 20px;
    }

    .welcome-image-text {
        padding: 1rem 1.25rem;
        bottom: 15px;
        left: 15px;
        right: 15px;
        border-radius: 10px;
    }

    .welcome-image-text h3 {
        font-size: 1.1rem;
    }

    .welcome-channels-btn {
        padding: 1.2rem 2rem;
        font-size: 1rem;
        width: 100%;
        max-width: 280px;
        border-radius: 45px;
    }
}

/* الهواتف الصغيرة جداً */
@media (max-width: 360px) {
    .simple-welcome-section {
        padding: 2rem 1rem;
        border-radius: 20px;
    }

    .app-logo img {
        width: 70px;
        height: 70px;
        border-radius: 18px;
    }

    .welcome-title {
        font-size: 1.9rem;
    }

    .welcome-subtitle {
        font-size: 0.95rem;
    }

    .welcome-channels-btn {
        padding: 1rem 1.5rem;
        font-size: 0.9rem;
        max-width: 250px;
    }
}

/* Live Matches Section */
.live-matches-section {
    margin-bottom: 4rem;
}

.section-header-enhanced {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 2rem;
}

.section-title-group {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.section-icon {
    width: 65px;
    height: 65px;
    border-radius: 16px;
    background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #000;
    font-size: 1.8rem;
    box-shadow: 0 6px 20px rgba(var(--accent-primary), 0.3);
}

.section-title {
    font-size: 1.8rem;
    font-weight: 800;
    color: var(--text-primary);
    margin: 0;
}

.section-subtitle {
    color: var(--text-secondary);
    font-size: 0.95rem;
    margin: 0;
}

.live-indicator-group {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    background: rgba(255, 71, 87, 0.1);
    padding: 0.5rem 1rem;
    border-radius: 20px;
    border: 1px solid rgba(255, 71, 87, 0.3);
}

.live-dot {
    width: 8px;
    height: 8px;
    background: #ff4757;
    border-radius: 50%;
    animation: livePulse 2s infinite;
}

.live-text {
    color: #ff4757;
    font-weight: 600;
    font-size: 0.9rem;
}

.live-matches-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
    gap: 1.5rem;
}

.live-match-card {
    background: var(--gradient-card);
    border: 1px solid var(--border-primary);
    border-radius: 16px;
    padding: 1.5rem;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.live-match-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
    border-color: var(--accent-primary);
}

.match-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
}

.match-league {
    color: var(--text-secondary);
    font-size: 0.85rem;
    font-weight: 600;
}

.live-badge {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    background: rgba(255, 71, 87, 0.1);
    color: #ff4757;
    padding: 0.3rem 0.8rem;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 600;
}

.live-badge i {
    animation: livePulse 2s infinite;
}

.match-teams {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1.5rem;
}

.team {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.75rem;
    flex: 1;
}

.team-logo {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #000;
    font-size: 1.1rem;
}

.team-name {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.9rem;
    text-align: center;
}

.match-score {
    text-align: center;
    margin: 0 1rem;
}

.score {
    font-size: 1.8rem;
    font-weight: 900;
    color: var(--accent-primary);
    line-height: 1;
    margin-bottom: 0.5rem;
}

.match-time {
    color: var(--text-secondary);
    font-size: 0.85rem;
    font-weight: 600;
}

.match-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.match-viewers {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-muted);
    font-size: 0.85rem;
}

.favorite-btn {
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid var(--border-primary);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--text-muted);
    cursor: pointer;
    transition: all 0.3s ease;
}

.favorite-btn:hover {
    background: rgba(255, 71, 87, 0.2);
    border-color: #ff4757;
    color: #ff4757;
    transform: scale(1.1);
}

.favorite-btn.active {
    background: #ff4757;
    border-color: #ff4757;
    color: white;
}

/* Competitions Section */
.competitions-section {
    margin-bottom: 4rem;
}

.competitions-slider-container {
    position: relative;
    overflow: hidden;
}

.competitions-slider {
    display: flex;
    gap: 1.5rem;
    overflow-x: auto;
    scroll-behavior: smooth;
    padding: 1rem 0 2rem 0;
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.competitions-slider::-webkit-scrollbar {
    display: none;
}

.competition-card-enhanced {
    flex: 0 0 200px;
    cursor: pointer;
    transition: transform 0.3s ease;
}

.competition-card-enhanced:hover {
    transform: translateY(-5px);
}

.competition-image-wrapper {
    position: relative;
    width: 200px;
    height: 200px;
    border-radius: 16px;
    overflow: hidden;
    margin-bottom: 1rem;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
}

.competition-image-wrapper img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
}



.competition-info {
    text-align: center;
}

.competition-name {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 0.5rem 0;
    line-height: 1.3;
}

.competition-desc {
    color: var(--text-secondary);
    font-size: 0.85rem;
    margin: 0;
    line-height: 1.4;
}

/* Responsive Design for Enhanced Live Section */
@media (max-width: 768px) {
    .hero-main-title {
        font-size: 2.5rem;
    }

    .hero-description {
        font-size: 1.1rem;
    }

    .hero-stats {
        gap: 2rem;
    }

    .stat-number {
        font-size: 2rem;
    }

    .hero-action-buttons {
        flex-direction: column;
        align-items: center;
    }

    .primary-action-btn,
    .secondary-action-btn {
        width: 100%;
        max-width: 300px;
        justify-content: center;
    }

    .live-matches-grid {
        grid-template-columns: 1fr;
    }

    .competitions-slider {
        gap: 1rem;
    }

    .competition-card-enhanced {
        flex: 0 0 160px;
    }

    .competition-image-wrapper {
        width: 160px;
        height: 160px;
    }


}

@media (max-width: 480px) {
    .enhanced-hero-section {
        min-height: 70vh;
    }

    .hero-main-title {
        font-size: 2rem;
    }

    .hero-stats {
        gap: 1.5rem;
    }

    .stat-number {
        font-size: 1.8rem;
    }

    .section-title {
        font-size: 1.5rem;
    }

    .live-match-card {
        padding: 1rem;
    }

    .score {
        font-size: 1.5rem;
    }
}

/* ===== ENHANCED LEAGUE STATISTICS STYLES ===== */
.league-stats-container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 1.5rem;
}

/* League selector styles */
.league-selector-normal {
    position: relative;
    background: transparent;
    z-index: auto;
    overflow: visible;
    display: block;
    padding: 0;
}

.league-stats-scrollable {
    height: auto;
    overflow-y: visible;
    padding-top: 0;
}

/* Advanced League Selector Styles */
.advanced-league-selector {
    background: var(--gradient-card);
    border: 1px solid var(--border-primary);
    border-radius: 20px;
    padding: 2rem;
    margin-bottom: 2rem;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
}

.selector-header {
    text-align: center;
    margin-bottom: 2rem;
}

.selector-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 0.5rem 0;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
}

.selector-title i {
    color: var(--accent-primary);
    font-size: 1.3rem;
}

.selector-description {
    color: var(--text-secondary);
    font-size: 0.95rem;
    margin: 0;
}

.leagues-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1rem;
}

.league-card {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid var(--border-primary);
    border-radius: 16px;
    padding: 1.5rem;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    overflow: hidden;
    display: flex;
    align-items: center;
    gap: 1.25rem;
}

.league-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transition: left 0.6s ease;
}

.league-card:hover::before {
    left: 100%;
}

.league-card:hover {
    background: rgba(var(--accent-primary), 0.08);
    border-color: rgba(var(--accent-primary), 0.4);
    transform: translateY(-3px) scale(1.02);
    box-shadow: 0 8px 25px rgba(var(--accent-primary), 0.2);
}

.league-card.selected {
    background: rgba(var(--accent-primary), 0.15);
    border-color: var(--accent-primary);
    box-shadow: 0 0 0 2px rgba(var(--accent-primary), 0.3);
}

.league-card-flag {
    font-size: 2.5rem;
    line-height: 1;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    flex-shrink: 0;
}

.league-card-info {
    flex: 1;
    min-width: 0;
}

.league-card-name {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 0.25rem 0;
    line-height: 1.3;
}

.league-card-subtitle {
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin: 0;
    font-weight: 500;
}

.league-card-arrow {
    color: var(--text-muted);
    font-size: 1rem;
    transition: all 0.3s ease;
    opacity: 0.6;
    flex-shrink: 0;
}

.league-card:hover .league-card-arrow {
    color: var(--accent-primary);
    opacity: 1;
    transform: translateX(-3px);
}

.league-card.selected .league-card-arrow {
    color: var(--accent-primary);
    opacity: 1;
}

/* Header Box - Compact Design */
.header-box {
    background: var(--gradient-card);
    border: 1px solid var(--border-primary);
    padding: 12px 16px;
    border-radius: 12px;
    margin-bottom: 16px;
    font-size: 16px;
    font-weight: 700;
    color: var(--text-primary);
    text-align: center;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    backdrop-filter: blur(10px);
}

/* League Container */
.league-container {
    margin-bottom: 20px;
}

/* Team Container - Compact Design */
.team-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin: 3px auto;
    padding: 8px 12px;
    background-color: rgba(255, 255, 255, 0.03);
    border: 1px solid var(--border-primary);
    border-radius: 10px;
    width: 100%;
    max-width: 600px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    position: relative;
    height: 50px;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
}

.team-container:hover {
    background-color: rgba(var(--accent-primary), 0.05);
    border-color: rgba(var(--accent-primary), 0.3);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.team-info {
    display: flex;
    align-items: center;
    width: 100%;
    direction: rtl;
    gap: 8px;
}

.team-position {
    font-size: 14px;
    font-weight: bold;
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 6px;
    background: rgba(var(--accent-primary), 0.15);
    color: var(--accent-primary);
    flex-shrink: 0;
}

.team-logo {
    width: 28px;
    height: 28px;
    border-radius: 6px;
    object-fit: cover;
    border: 1px solid rgba(255, 255, 255, 0.1);
    flex-shrink: 0;
}

.team-name {
    font-weight: 600;
    font-size: 14px;
    color: var(--text-primary);
    flex: 1;
    min-width: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.loading {
    margin-top: 20px;
    font-size: 16px;
    color: #4CAF50;
    text-align: center;
    padding: 20px;
}

.error {
    color: #ff4444;
    font-size: 16px;
    text-align: center;
    padding: 20px;
    background: rgba(255, 68, 68, 0.1);
    border-radius: 8px;
    margin: 10px 0;
}

.stats-container {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-right: auto;
}

.stat-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    min-width: 24px;
}

.stat-label {
    font-size: 10px;
    color: var(--text-muted);
    font-weight: 500;
    margin-bottom: 2px;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.stat-value {
    font-size: 13px;
    font-weight: 700;
    line-height: 1;
}

.stat-value.wins {
    color: #22c55e;
}

.stat-value.losses {
    color: #ef4444;
}

.stat-value.points {
    color: var(--accent-primary);
    font-size: 14px;
}

/* ألوان الترتيب للمراكز */
.team-container.champions .team-position {
    background: linear-gradient(135deg, #22c55e, #16a34a);
    color: white;
    box-shadow: 0 2px 8px rgba(34, 197, 94, 0.3);
}

.team-container.europa .team-position {
    background: linear-gradient(135deg, #f59e0b, #d97706);
    color: white;
    box-shadow: 0 2px 8px rgba(245, 158, 11, 0.3);
}

.team-container.relegation .team-position {
    background: linear-gradient(135deg, #ef4444, #dc2626);
    color: white;
    box-shadow: 0 2px 8px rgba(239, 68, 68, 0.3);
}

.league-stats-header {
    background: var(--gradient-card);
    border: 1px solid var(--border-primary);
    border-radius: 20px;
    padding: 2.5rem;
    margin-bottom: 2rem;
    text-align: center;
    position: relative;
    overflow: hidden;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

.league-stats-header::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
}

.league-title-section {
    display: flex;
    align-items: center;
    gap: 2rem;
    justify-content: center;
}

.league-stats-icon {
    width: 80px;
    height: 80px;
    border-radius: 20px;
    background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #000;
    font-size: 2.2rem;
    box-shadow: 0 8px 25px rgba(var(--accent-primary), 0.3);
    flex-shrink: 0;
}

.league-title-content {
    text-align: right;
}

.league-stats-title {
    font-size: 2.2rem;
    font-weight: 800;
    color: var(--text-primary);
    margin: 0 0 0.5rem 0;
    line-height: 1.2;
}

.league-stats-subtitle {
    color: var(--text-secondary);
    font-size: 1.1rem;
    margin: 0;
    line-height: 1.4;
}

.advanced-league-selector {
    background: var(--gradient-card);
    border: 1px solid var(--border-primary);
    border-radius: 20px;
    padding: 2rem;
    margin-bottom: 2rem;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
}

.selector-header {
    text-align: center;
    margin-bottom: 2rem;
}

.selector-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 0.5rem 0;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.75rem;
}

.selector-title i {
    color: var(--accent-primary);
    font-size: 1.3rem;
}

.selector-description {
    color: var(--text-secondary);
    font-size: 0.95rem;
    margin: 0;
}

.leagues-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1rem;
}

.league-card {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid var(--border-primary);
    border-radius: 16px;
    padding: 1.5rem;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    overflow: hidden;
    display: flex;
    align-items: center;
    gap: 1.25rem;
}

.league-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
    transition: left 0.6s ease;
}

.league-card:hover::before {
    left: 100%;
}

.league-card:hover {
    background: rgba(var(--accent-primary), 0.08);
    border-color: rgba(var(--accent-primary), 0.4);
    transform: translateY(-3px) scale(1.02);
    box-shadow: 0 8px 25px rgba(var(--accent-primary), 0.2);
}

.league-card.selected {
    background: rgba(var(--accent-primary), 0.15);
    border-color: var(--accent-primary);
    box-shadow: 0 0 0 2px rgba(var(--accent-primary), 0.3);
}

.league-card-flag {
    font-size: 2.5rem;
    line-height: 1;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    flex-shrink: 0;
}

.league-card-info {
    flex: 1;
    min-width: 0;
}

.league-card-name {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 0.25rem 0;
    line-height: 1.3;
}

.league-card-subtitle {
    font-size: 0.85rem;
    color: var(--text-secondary);
    margin: 0;
    font-weight: 500;
}

.league-card-arrow {
    color: var(--text-muted);
    font-size: 1rem;
    transition: all 0.3s ease;
    opacity: 0.6;
    flex-shrink: 0;
}

.league-card:hover .league-card-arrow {
    color: var(--accent-primary);
    opacity: 1;
    transform: translateX(-3px);
}

.league-card.selected .league-card-arrow {
    color: var(--accent-primary);
    opacity: 1;
}

.league-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 3rem;
    padding: 2rem;
    background: var(--gradient-card);
    border: 1px solid var(--border-primary);
    border-radius: 20px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

.league-title-group {
    display: flex;
    align-items: center;
    gap: 1.5rem;
}

.league-icon {
    width: 80px;
    height: 80px;
    border-radius: 20px;
    background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #000;
    font-size: 2.5rem;
    box-shadow: 0 8px 25px rgba(var(--accent-primary), 0.3);
}

.league-title {
    font-size: 2.5rem;
    font-weight: 800;
    color: var(--text-primary);
    margin: 0 0 0.5rem 0;
    line-height: 1.2;
}

.league-subtitle {
    color: var(--text-secondary);
    font-size: 1.1rem;
    margin: 0;
}

.league-logo {
    width: 100px;
    height: 100px;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
}

.league-logo img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.stats-section {
    background: var(--gradient-card);
    border: 1px solid var(--border-primary);
    border-radius: 20px;
    padding: 2rem;
    margin-bottom: 2rem;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
}

.stats-section-header {
    margin-bottom: 2rem;
}

.stats-section-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text-primary);
    display: flex;
    align-items: center;
    gap: 1rem;
    margin: 0;
}

.stats-section-title i {
    color: var(--accent-primary);
    font-size: 1.3rem;
}

/* League Table Styles */
.league-table-container {
    overflow-x: auto;
    border-radius: 12px;
    border: 1px solid var(--border-primary);
}

.league-table {
    width: 100%;
    border-collapse: collapse;
    background: var(--secondary-bg);
}

.league-table th,
.league-table td {
    padding: 1rem;
    text-align: left;
    border-bottom: 1px solid var(--border-primary);
}

.league-table th {
    background: var(--tertiary-bg);
    color: var(--accent-primary);
    font-weight: 700;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.league-table td {
    color: var(--text-primary);
    font-weight: 500;
}

.league-table tr:hover {
    background: rgba(var(--accent-primary), 0.05);
}

.team-info {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.team-badge {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background: var(--accent-primary);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #000;
    font-weight: 700;
    font-size: 0.8rem;
}

.team-name {
    font-weight: 600;
}

.position-badge {
    width: 25px;
    height: 25px;
    border-radius: 50%;
    background: var(--accent-primary);
    color: #000;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 0.8rem;
}

.position-badge.champions {
    background: #2ed573;
}

.position-badge.europa {
    background: #ff6b35;
}

.position-badge.relegation {
    background: #ff4757;
}

/* Top Scorers Grid */
.top-scorers-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
}

.scorer-card {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid var(--border-primary);
    border-radius: 12px;
    padding: 1.5rem;
    display: flex;
    align-items: center;
    gap: 1rem;
    transition: all 0.3s ease;
}

.scorer-card:hover {
    background: rgba(var(--accent-primary), 0.05);
    border-color: var(--accent-primary);
    transform: translateY(-2px);
}

.scorer-rank {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: var(--accent-primary);
    color: #000;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 1.1rem;
}

.scorer-info {
    flex: 1;
}

.scorer-name {
    font-weight: 700;
    color: var(--text-primary);
    font-size: 1.1rem;
    margin-bottom: 0.25rem;
}

.scorer-team {
    color: var(--text-secondary);
    font-size: 0.9rem;
}

.scorer-goals {
    font-size: 1.5rem;
    font-weight: 800;
    color: var(--accent-primary);
}

/* Recent Matches Grid */
.recent-matches-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 1.5rem;
}

.match-card {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid var(--border-primary);
    border-radius: 12px;
    padding: 1.5rem;
    transition: all 0.3s ease;
}

.match-card:hover {
    background: rgba(var(--accent-primary), 0.05);
    border-color: var(--accent-primary);
    transform: translateY(-2px);
}

.match-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

.match-date {
    color: var(--text-secondary);
    font-size: 0.85rem;
    font-weight: 600;
}

.match-status {
    background: var(--accent-primary);
    color: #000;
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 600;
}

.match-teams {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.match-team {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    flex: 1;
}

.match-team.away {
    flex-direction: row-reverse;
    text-align: right;
}

.match-team-badge {
    width: 35px;
    height: 35px;
    border-radius: 50%;
    background: var(--accent-primary);
    display: flex;
    align-items: center;
    justify-content: center;
    color: #000;
    font-weight: 700;
    font-size: 0.9rem;
}

.match-team-name {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 0.95rem;
}

.match-score-section {
    text-align: center;
    margin: 0 1rem;
}

.match-score {
    font-size: 1.8rem;
    font-weight: 900;
    color: var(--accent-primary);
    line-height: 1;
}

/* Enhanced Mobile Responsive Styles */
@media (max-width: 768px) {
    .league-stats-container {
        padding: 1rem;
    }

    .league-stats-header {
        padding: 2rem 1.5rem;
    }

    .league-title-section {
        flex-direction: column;
        gap: 1.5rem;
        text-align: center;
    }

    .league-stats-icon {
        width: 70px;
        height: 70px;
        font-size: 2rem;
    }

    .league-title-content {
        text-align: center;
    }

    .league-stats-title {
        font-size: 1.8rem;
    }

    .league-stats-subtitle {
        font-size: 1rem;
    }

    .advanced-league-selector {
        padding: 1.5rem;
    }

    .leagues-grid {
        grid-template-columns: 1fr;
        gap: 0.75rem;
    }

    .league-card {
        padding: 1.25rem;
    }

    .league-card-flag {
        font-size: 2.2rem;
    }

    .league-card-name {
        font-size: 1rem;
    }

    .league-card-subtitle {
        font-size: 0.8rem;
    }

    .league-table th,
    .league-table td {
        padding: 0.75rem 0.5rem;
        font-size: 0.85rem;
    }

    .top-scorers-grid,
    .recent-matches-grid {
        grid-template-columns: 1fr;
    }

    .match-teams {
        flex-direction: column;
        gap: 1rem;
    }

    .match-team {
        width: 100%;
    }

    .match-team.away {
        flex-direction: row;
    }
}

@media (max-width: 480px) {
    .league-stats-header {
        padding: 1.5rem 1rem;
    }

    .league-stats-title {
        font-size: 1.6rem;
    }

    .league-stats-subtitle {
        font-size: 0.9rem;
    }

    .advanced-league-selector {
        padding: 1rem;
    }

    .selector-title {
        font-size: 1.3rem;
    }

    .league-card {
        padding: 1rem;
        gap: 1rem;
    }

    .league-card-flag {
        font-size: 2rem;
    }
}

/* ===== ADMIN PANEL STYLES ===== */
.admin-tab {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-primary);
    color: var(--text-primary);
    padding: 1rem 1.5rem;
    border-radius: 12px 12px 0 0;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
    border-bottom: none;
}

.admin-tab:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: var(--accent-primary);
}

.admin-tab.active {
    background: var(--accent-primary);
    color: #000;
    border-color: var(--accent-primary);
}

.admin-tab-content {
    animation: fadeIn 0.3s ease;
}

.admin-input {
    width: 100%;
    padding: 1rem;
    border: 1px solid var(--border-primary);
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.05);
    color: var(--text-primary);
    font-size: 1rem;
    transition: all 0.3s ease;
}

.admin-input:focus {
    outline: none;
    border-color: var(--accent-primary);
    background: rgba(255, 255, 255, 0.1);
    box-shadow: 0 0 20px rgba(var(--accent-primary), 0.3);
}

.admin-btn {
    padding: 1rem 2rem;
    border: none;
    border-radius: 12px;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.admin-btn.primary {
    background: var(--accent-primary);
    color: #000;
}

.admin-btn.primary:hover {
    background: var(--accent-secondary);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(var(--accent-primary), 0.4);
}

.admin-btn.secondary {
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
    border: 1px solid var(--border-primary);
}

.admin-btn.secondary:hover {
    background: rgba(255, 255, 255, 0.15);
    border-color: var(--accent-primary);
    transform: translateY(-2px);
}

.admin-btn.danger {
    background: rgba(255, 71, 87, 0.2);
    color: #ff4757;
    border: 1px solid rgba(255, 71, 87, 0.5);
}

.admin-btn.danger:hover {
    background: #ff4757;
    color: white;
    transform: translateY(-2px);
}

.category-item, .channel-item-admin {
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid var(--border-primary);
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 0.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.3s ease;
}

.category-item:hover, .channel-item-admin:hover {
    background: rgba(255, 255, 255, 0.08);
    border-color: var(--accent-primary);
}

.item-info {
    flex: 1;
}

.item-title {
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.25rem;
}

.item-subtitle {
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.item-actions {
    display: flex;
    gap: 0.5rem;
}

.action-btn {
    width: 36px;
    height: 36px;
    border-radius: 8px;
    border: 1px solid var(--border-primary);
    background: rgba(255, 255, 255, 0.05);
    color: var(--text-primary);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    font-size: 0.9rem;
}

.action-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    border-color: var(--accent-primary);
    transform: scale(1.1);
}

.action-btn.delete {
    border-color: rgba(255, 71, 87, 0.3);
    color: #ff4757;
}

.action-btn.delete:hover {
    background: rgba(255, 71, 87, 0.2);
    border-color: #ff4757;
}

/* ===== SIMPLIFIED LEAGUE STYLES ===== */
@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* ===== VIDEO PLAYER STYLES ===== */
#videoPlayerModal {
    animation: fadeInPlayer 0.3s ease-out;
}

@keyframes fadeInPlayer {
    from { opacity: 0; }
    to { opacity: 1; }
}

/* JW Player Custom Styles */
#jwPlayer .jw-label-live, #jwPlayer .jw-text-live {
    background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)) !important;
    color: #000 !important;
    border-radius: 25px !important;
    padding: 4px 12px !important;
    font-weight: bold !important;
    font-size: 14px !important;
    display: inline-flex !important;
    align-items: center;
    gap: 6px;
    text-shadow: none !important;
}

#jwPlayer .live-logo {
    display: inline-block;
    height: 1.2em;
    opacity: 0.9;
}

#jwPlayer .live-logo img {
    height: 100%;
    width: auto;
    display: block;
}

#jwPlayer .jw-settings-menu {
    background: rgba(0, 0, 0, 0.8) !important;
    backdrop-filter: blur(12px);
    border-radius: 14px !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    padding: 0 !important;
    overflow: hidden;
    animation: fadeIn 0.25s ease-in-out;
}

#jwPlayer .jw-settings-topbar {
    background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)) !important;
    color: #000 !important;
    font-weight: bold !important;
    padding: 10px !important;
    font-size: 15px !important;
    border-bottom: 1px solid rgba(255, 255, 255, 0.15);
}

#jwPlayer .jw-settings-content-item {
    color: white !important;
    font-size: 14px !important;
    padding: 8px 12px !important;
    transition: background 0.2s ease-in-out;
}

#jwPlayer .jw-settings-content-item:hover {
    background: rgba(255, 255, 255, 0.15) !important;
}

#jwPlayer .jw-settings-content-item.jw-settings-active {
    background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary)) !important;
    color: #000 !important;
    border-radius: 8px !important;
}

#jwPlayer .jw-icon {
    color: white !important;
}

#jwPlayer .jw-icon:hover {
    color: var(--accent-primary) !important;
}

#jwPlayer .jw-progress {
    background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary)) !important;
    height: 4px !important;
    border-radius: 2px !important;
    transition: width 0.2s ease-out !important;
}

#jwPlayer .jw-buffer {
    background: rgba(255, 255, 255, 0.3) !important;
    transition: width 0.3s ease-out !important;
}

#jwPlayer .jw-rail {
    background: rgba(255, 255, 255, 0.15) !important;
}

/* Mobile Responsive for Player */
@media (max-width: 768px) {
    #playerBackBtn {
        width: 45px !important;
        height: 45px !important;
        font-size: 1.1rem !important;
        top: 15px !important;
        right: 15px !important;
    }

    #jwPlayerContainer {
        padding: 70px 15px 15px !important;
    }

    #videoPlayerModal div[style*="top: 20px; left: 20px"] {
        top: 15px !important;
        left: 15px !important;
        padding: 6px 10px !important;
    }

    #videoPlayerModal div[style*="top: 20px; left: 20px"] img {
        height: 25px !important;
    }
}

/* ===== UTILITY CLASSES ===== */
.hidden {
    display: none !important;
}

.text-center {
    text-align: center;
}

/* ===== SCROLLBAR ===== */
::-webkit-scrollbar {
    width: 6px;
}

::-webkit-scrollbar-track {
    background: var(--primary-bg);
}

::-webkit-scrollbar-thumb {
    background: var(--border-primary);
    border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--accent-primary);
}

</style>
<body>
    <!-- Loading Screen -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-container">
            <div class="loading-logo">
                <img src="https://iili.io/FSF1DcG.md.png" alt="Nova Logo">
            </div>
        </div>
    </div>

    <!-- Login Page -->
    <div class="login-page" id="loginPage">
        <div class="login-container">
            <div class="dazn-login-box">
                <!-- Enhanced Logo Style -->
                <div class="dazn-logo">
                    <div class="dazn-logo-box">
                        <img src="https://iili.io/FSF1DcG.md.png" alt="شعار الموقع" class="nova-logo-img">
                    </div>
                </div>

                <!-- Title -->
                <h1 class="dazn-title">تسجيل الدخول</h1>

                <!-- Description -->
                <p class="dazn-description">
احصل على إمكانية الوصول إلى الأحداث الرياضية المباشرة، أحدث القنوات الناقلة للمباريات بجودة فائقة، والمزيد، تابع بنفسك.
                </p>

                <!-- Login Form -->
                <form id="loginForm" class="dazn-form">
                    <div class="dazn-input-group">
                        <input type="text" class="dazn-input" id="usernameInput" placeholder="اسم المستخدم" required>
                    </div>

                    <div class="dazn-input-group" id="passwordGroup" style="display: none;">
                        <input type="password" class="dazn-input" id="passwordInput" placeholder="كلمة المرور">
                    </div>

                    <button type="submit" class="dazn-continue-btn">
دخول
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div class="main-app hidden" id="mainApp">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <!-- Left side: Logo and User profile -->
                <div class="header-left">
                    <div class="logo" onclick="showSection('live')" style="margin-right: 1rem;" tabindex="0">
                        <img src="https://iili.io/FSF1DcG.md.png" alt="شعار التطبيق" style="height: 40px; width: auto; object-fit: contain;">
                    </div>
                    <div class="user-profile-simple" onclick="openProfile()" tabindex="0">
                        <div class="user-avatar-simple" id="userAvatar">ض</div>
                    </div>
                </div>

                <!-- Center: Empty space for balance -->
                <div class="header-center">
                </div>

                <!-- Right side: Menu and Premium button -->
                <div class="header-right">
                    <button class="premium-btn" onclick="showPremiumMessage()" title="Premium" tabindex="0">
                        Premium
                    </button>
                    <button class="nav-btn" onclick="toggleSidebar()" title="القائمة" tabindex="0">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Live Section -->
            <section id="liveSection" class="section">

                <!-- Enhanced Simple Welcome Section -->
                <div class="simple-welcome-section">
                    <div class="welcome-container">
                        <div class="welcome-content">
                            <div class="welcome-header">
                                <div class="app-logo">
                                    <img src="https://iili.io/FSF1DcG.md.png" alt="Nova Logo">
                                </div>
                                <h1 class="welcome-title">أهلاً بك في منصة NoVA</h1>
                                <p class="welcome-subtitle">استمتع بمشاهدة أفضل البطولات والقنوات الرياضية العالمية بجودة عالية ومتابعة حية للأحداث الرياضية المهمة</p>
                            </div>

                            <div class="welcome-action">
                                <button class="welcome-channels-btn" onclick="showSection('channels')" tabindex="0">
                                    <i class="fas fa-tv"></i>
                                    مشاهدة القنوات الرياضية
                                    <i class="fas fa-arrow-left"></i>
                                </button>
                            </div>
                        </div>

                        <div class="welcome-image-section">
                            <div class="welcome-main-image">
                                <img src="https://contentful-asset-proxy.sd.indazn.com/vhp9jnid12wf/4Y9CKHgcN3OaGfONpBxk5g/a05c374d5c91dffd47f1d5c5a9a5c78f/05-Desktop__LRD_and_Tablet_Landscape_%C3%A2___16x9_2x__1_.jpg" alt="أفضل البطولات الرياضية">
                                <div class="welcome-image-text">
                                    <h3>تابع أهم البطولات العالمية أولاً بأول</h3>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>



                <!-- Competitions Section -->
                <div class="competitions-section">
                    <div class="section-header-enhanced">
                        <div class="section-title-group">
                            <div class="section-icon">
                                <i class="fas fa-trophy"></i>
                            </div>
                            <div>
                                <h3 class="section-title">أبرز البطولات</h3>
                                <p class="section-subtitle">كُل البطولات عبر تطبيقنا!</p>
                            </div>
                        </div>
                    </div>

                    <div class="competitions-slider-container">
                        <div class="competitions-slider" id="competitionsSlider">
                            <!-- Champions League -->
                            <div class="competition-card-enhanced" onclick="showNotification('دوري أبطال أوروبا - أقوى بطولة أوروبية', 'info')" tabindex="0">
                                <div class="competition-image-wrapper">
                                    <img src="https://static.diceplatform.com/prod/original/dce.uefatv/section/UCL/UCL_square_web_medium.NYP1J.NHNqx.png" alt="Champions League">
                                </div>
                                <div class="competition-info">
                                    <h4 class="competition-name">دوري أبطال أوروبا</h4>
                                    <p class="competition-desc">البطولة الأوروبية الأقوى</p>
                                </div>
                            </div>

                            <!-- Premier League -->
                            <div class="competition-card-enhanced" onclick="showNotification('الدوري الإنجليزي الممتاز - أقوى دوري في العالم', 'info')" tabindex="0">
                                <div class="competition-image-wrapper">
                                    <img src="https://play-lh.googleusercontent.com/7fWZqkilW8bBXzlqp6NCg4-F2Qt8GKcIrWhaj0Ii7oSvDvTQg3UcYBxmA9Uq5Ojpow" alt="Premier League">
                                </div>
                                <div class="competition-info">
                                    <h4 class="competition-name">الدوري الإنجليزي</h4>
                                    <p class="competition-desc">أقوى دوري في العالم</p>
                                </div>
                            </div>

                            <!-- Serie A -->
                            <div class="competition-card-enhanced" onclick="showNotification('الدوري الإيطالي - دوري التكتيكات والمهارة', 'info')" tabindex="0">
                                <div class="competition-image-wrapper">
                                    <img src="https://play-lh.googleusercontent.com/9cNj8ixTiQx1g0hvrQ8Sh52suPWLEY0m0NZ5SfzsFfFqqGCzP2LfaY-FDl1jBKTOuSWs" alt="Serie A">
                                </div>
                                <div class="competition-info">
                                    <h4 class="competition-name">الدوري الإيطالي</h4>
                                    <p class="competition-desc">دوري التكتيكات والمهارة</p>
                                </div>
                            </div>

                            <!-- Bundesliga -->
                            <div class="competition-card-enhanced" onclick="showNotification('الدوري الألماني - دوري الجماهير والإثارة', 'info')" tabindex="0">
                                <div class="competition-image-wrapper">
                                    <img src="https://yt3.googleusercontent.com/i2WkDV4qQdzKK-xaP4wtZ2yR9fsbwqOJ6VBDAhCnbvJ01emai6lesuPbBzBlPTuxmtOWdAM5zg=s900-c-k-c0x00ffffff-no-rj" alt="Bundesliga">
                                </div>
                                <div class="competition-info">
                                    <h4 class="competition-name">الدوري الألماني</h4>
                                    <p class="competition-desc">دوري الجماهير والإثارة</p>
                                </div>
                            </div>

                            <!-- La Liga -->
                            <div class="competition-card-enhanced" onclick="showNotification('الليجا الإسبانية - دوري المهارة والفن', 'info')" tabindex="0">
                                <div class="competition-image-wrapper">
                                    <img src="https://images.seeklogo.com/logo-png/61/1/la-liga-logo-png_seeklogo-614181.png" alt="La Liga">
                                </div>
                                <div class="competition-info">
                                    <h4 class="competition-name">الليجا الإسبانية</h4>
                                    <p class="competition-desc">دوري المهارة والفن</p>
                                </div>
                            </div>

                            <!-- Ligue 1 -->
                            <div class="competition-card-enhanced" onclick="showNotification('الدوري الفرنسي - دوري المواهب الشابة', 'info')" tabindex="0">
                                <div class="competition-image-wrapper">
                                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/8c/Logo_Ligue_1_2024.jpg/1200px-Logo_Ligue_1_2024.jpg" alt="Ligue 1">
                                </div>
                                <div class="competition-info">
                                    <h4 class="competition-name">الدوري الفرنسي</h4>
                                    <p class="competition-desc">دوري المواهب الشابة</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Best of Football Section -->
                <div class="best-football-section">
                    <div class="section-header-enhanced">
                        <div class="section-title-group">
                            <div class="section-icon">
                                <i class="fas fa-futbol"></i>
                            </div>
                            <div>
                                <h3 class="section-title">الأحداث الرياضية</h3>
                                <p class="section-subtitle">أبرز المباريات والأحداث المهمة</p>
                            </div>
                        </div>
                    </div>

                    <div class="best-football-slider-container">
                        <div class="best-football-slider" id="bestOfFootballSlider">
                            <!-- First Football Event Card -->
                            <div class="football-event-card">
                                <div class="card-background" style="background-image: url('https://c.top4top.io/p_3499bjfz31.jpg'); background-size: cover; background-position: center;"></div>
                                <div class="road-lines"></div>

                                <div class="football-info">
                                    <div class="football-title">برشلونة ضد ريال مدريد</div>
                                    <div class="football-subtitle">الكلاسيكو - الدوري الإسباني</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </section>

            <!-- Channels Section -->
            <section id="channelsSection" class="section hidden">

                <!-- Main Categories -->
                <div class="channel-categories-main" id="channelCategoriesMain">
                    <!-- Search Bar for Main Categories -->
                    <div class="search-container" style="margin-bottom: 2rem;">
                        <div class="search-box">
                            <i class="fas fa-search search-icon" style="font-size: 1.2rem;"></i>
                            <input type="text" id="mainChannelSearchInput" class="search-input" placeholder="ابحث في جميع القنوات..." onkeyup="filterMainChannels()">
                            <button class="search-clear" id="mainSearchClearBtn" onclick="clearMainSearch()" style="display: none;">
                                <i class="fas fa-times-circle" style="font-size: 1.1rem;"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Search Results for Main Page -->
                    <div class="search-results" id="mainSearchResults" style="display: none;">
                        <h3 class="search-results-title">نتائج البحث</h3>
                        <div class="search-results-grid" id="mainSearchResultsGrid"></div>
                    </div>

                    <div class="channel-categories-grid" id="channelCategoriesGrid">
                        <!-- Dynamic content will be loaded here -->
                    </div>
                </div>

                <!-- Sub Pages -->
                <div class="channel-sub-page" id="channelSubPage">
                    <div class="channel-sub-header">
                        <button class="back-btn" onclick="backToChannelCategories()">
                            <i class="fas fa-chevron-right"></i>
                            رجوع
                        </button>
                        <h3 id="channelSubTitle">القنوات</h3>
                    </div>
                    <div class="channel-sub-grid" id="channelSubGrid">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </section>



            <!-- Settings Section -->
            <section id="settingsSection" class="section hidden">
                <div class="settings-container">
                    <!-- إعدادات المظهر -->
                    <div class="settings-section">
                        <div class="settings-section-header">
                            <h3 class="settings-section-title">
                                <i class="fas fa-palette"></i>
                                المظهر والألوان
                            </h3>
                        </div>



                        <div class="settings-item">
                            <div class="info">
                                <div class="title">لون التطبيق</div>
                                <div class="desc">اختر اللون المُفضل للتطبيق</div>
                                <div class="color-picker">
                                    <div class="color-option selected" style="background-color: #ca8a04;" data-color="yellow" onclick="changeThemeColor('yellow')"></div>
                                    <div class="color-option" style="background-color: #dc2626;" data-color="red" onclick="changeThemeColor('red')"></div>
                                    <div class="color-option" style="background-color: #2563eb;" data-color="blue" onclick="changeThemeColor('blue')"></div>
                                    <div class="color-option" style="background-color: #16a34a;" data-color="green" onclick="changeThemeColor('green')"></div>
                                    <div class="color-option" style="background-color: #db2777;" data-color="pink" onclick="changeThemeColor('pink')"></div>  
                                    <div class="color-option" style="background-color: #e11d48;" data-color="rose" onclick="changeThemeColor('rose')"></div>   
                                    <div class="color-option" style="background-color: #c026d3;" data-color="fuchsia" onclick="changeThemeColor('fuchsia')"></div>
                                    <div class="color-option" style="background-color: #0d9488;" data-color="teal" onclick="changeThemeColor('teal')"></div>                               
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- إعدادات الاستخدام -->
                    <div class="settings-section">
                        <div class="settings-section-header">
                            <h3 class="settings-section-title">
                                <i class="fas fa-cog"></i>
                                إعدادات الاستخدام
                            </h3>
                        </div>

                        <div class="settings-item">
                            <div class="info">
                                <div class="title">الإشعارات</div>
                                <div class="desc">تفعيل إشعارات التطبيق المهمة</div>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="notificationsSwitch" checked>
                                <span class="slider"></span>
                            </label>
                        </div>



                        <div class="settings-item">
                            <div class="info">
                                <div class="title">حفظ البيانات</div>
                                <div class="desc">تقليل استهلاك البيانات أثناء البث المباشر</div>
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="dataSaverSwitch">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>

                    <!-- Footer Section -->
                    <div class="settings-footer">
                        <div class="footer-separator"></div>
                        <div class="footer-content">
                            <div class="footer-logo">
                                <img src="https://iili.io/FSF1DcG.md.png" alt="Nova Logo" class="footer-logo-img">
                                <div class="footer-text">
                                    <h4 class="footer-app-name">Nova</h4>
                                    <p class="footer-version">الإصدار 1.0</p>
                                </div>
                            </div>
                            <div class="footer-copyright">
                                <p>جميع الحقوق محفوظة © 2025</p>
                                <p class="footer-subtitle">منصة Nova للبث الرياضي المباشر</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>



            <!-- Profile Section -->
            <section id="profileSection" class="section hidden">
                <div class="simple-profile-container">
                    <!-- Profile Card -->
                    <div class="profile-main-card">
                        <div class="profile-card-background"></div>
                        <div class="profile-card-content">
                            <div class="profile-avatar-large" id="profileMainAvatar">A</div>
                            <h2 class="profile-name" id="profileDisplayName">ضيف</h2>
                            <p class="profile-subtitle">مرحباً بك في Nova</p>

                            <div class="profile-actions">
                                <button class="edit-profile-btn" onclick="openEditProfileModal()">
                                    <i class="fas fa-edit"></i>
                                    تعديل الملف الشخصي
                                </button>
                            </div>

                            <div class="profile-stats">
                                <div class="stat-item">
                                    <div class="stat-number">1</div>
                                    <div class="stat-label">الحساب</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Quick Actions -->
                    <div class="profile-quick-actions">
                        <button class="quick-action-btn" onclick="showSection('settings')">
                            <i class="fas fa-cog"></i>
                            <span>الإعدادات</span>
                        </button>
                        <button class="quick-action-btn danger" onclick="logout(); showSection('live');">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>تسجيل الخروج</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- League Statistics Section -->
            <section id="leagueStatsSection" class="section hidden">
                <div class="league-stats-container">
                    <!-- Advanced League Selector -->
                    <div class="advanced-league-selector">
                        <div class="selector-header">
                            <h3 class="selector-title">
                                <i class="fas fa-trophy"></i>
                                اختر الدوري
                            </h3>
                            <p class="selector-description">انقر على الدوري المُفضل لعرض الترتيب والإحصائيات</p>
                        </div>

                        <div class="leagues-grid">
                            <div class="league-card" data-league="premier" onclick="selectLeague('premier')">
                                <div class="league-card-flag">
                                    <img src="https://h.top4top.io/p_34975mkyl1.jpg" alt="Premier League" style="width: 50px; height: 50px; object-fit: cover; border-radius: 12px; border: 2px solid rgba(255, 255, 255, 0.2); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);" onerror="this.outerHTML=''">
                                </div>
                                <div class="league-card-info">
                                    <div class="league-card-name">الدوري الإنجليزي الممتاز</div>
                                    <div class="league-card-subtitle">Premier League</div>
                                </div>
                                <div class="league-card-arrow">
                                    <i class="fas fa-chevron-left"></i>
                                </div>
                            </div>

                            <div class="league-card" data-league="laliga" onclick="selectLeague('laliga')">
                                <div class="league-card-flag">
                                    <img src="https://j.top4top.io/p_3497ngtro1.jpg" alt="La Liga" style="width: 50px; height: 50px; object-fit: cover; border-radius: 12px; border: 2px solid rgba(255, 255, 255, 0.2); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);" onerror="this.outerHTML=''">
                                </div>
                                <div class="league-card-info">
                                    <div class="league-card-name">الدوري الإسباني</div>
                                    <div class="league-card-subtitle">La Liga</div>
                                </div>
                                <div class="league-card-arrow">
                                    <i class="fas fa-chevron-left"></i>
                                </div>
                            </div>

                            <div class="league-card" data-league="bundesliga" onclick="selectLeague('bundesliga')">
                                <div class="league-card-flag">
                                    <img src="https://k.top4top.io/p_3497agxyp1.jpg" alt="Bundesliga" style="width: 50px; height: 50px; object-fit: cover; border-radius: 12px; border: 2px solid rgba(255, 255, 255, 0.2); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);" onerror="this.outerHTML=''">
                                </div>
                                <div class="league-card-info">
                                    <div class="league-card-name">الدوري الألماني</div>
                                    <div class="league-card-subtitle">Bundesliga</div>
                                </div>
                                <div class="league-card-arrow">
                                    <i class="fas fa-chevron-left"></i>
                                </div>
                            </div>

                            <div class="league-card" data-league="ligue1" onclick="selectLeague('ligue1')">
                                <div class="league-card-flag">
                                    <img src="https://i.top4top.io/p_3497u5dp71.jpg" alt="Ligue 1" style="width: 50px; height: 50px; object-fit: cover; border-radius: 12px; border: 2px solid rgba(255, 255, 255, 0.2); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);" onerror="this.outerHTML=''">
                                </div>
                                <div class="league-card-info">
                                    <div class="league-card-name">الدوري الفرنسي</div>
                                    <div class="league-card-subtitle">Ligue 1</div>
                                </div>
                                <div class="league-card-arrow">
                                    <i class="fas fa-chevron-left"></i>
                                </div>
                            </div>

                            <div class="league-card" data-league="seriea" onclick="selectLeague('seriea')">
                                <div class="league-card-flag">
                                    <img src="https://l.top4top.io/p_3497wdn4s1.jpg" alt="Serie A" style="width: 50px; height: 50px; object-fit: cover; border-radius: 12px; border: 2px solid rgba(255, 255, 255, 0.2); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);" onerror="this.outerHTML=''">
                                </div>
                                <div class="league-card-info">
                                    <div class="league-card-name">الدوري الإيطالي</div>
                                    <div class="league-card-subtitle">Serie A</div>
                                </div>
                                <div class="league-card-arrow">
                                    <i class="fas fa-chevron-left"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Loading State -->
                    <div id="statsLoading" style="display: none; text-align: center; padding: 3rem; color: var(--accent-primary);">
                        <i class="fas fa-spinner" style="font-size: 2rem; margin-bottom: 1rem; animation: spin 1s linear infinite;"></i>
                        <p style="font-size: 1.1rem; font-weight: 600; margin: 0;">جاري تحميل البيانات...</p>
                    </div>

                    <!-- Error State -->
                    <div id="statsError" style="display: none; text-align: center; padding: 2rem; background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 12px; color: #ef4444;">
                        <i class="fas fa-exclamation-triangle" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                        <p style="font-weight: 600; margin: 0;">حدث خطأ أثناء جلب البيانات!</p>
                        <p style="opacity: 0.8; font-size: 0.9rem; margin-top: 0.5rem;">يرجى المحاولة مرة أخرى لاحقاً</p>
                    </div>

                    <!-- Stats Content -->
                    <div id="statsContent" style="display: none;">
                        <div style="background: var(--secondary-bg); border: 1px solid var(--border-primary); border-radius: 20px; overflow: hidden; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15);">
                            <!-- League Header -->
                            <div class="league-header-modern" id="leagueHeaderModern">
                                <h3 id="leagueTitle" style="margin: 0; color: var(--text-primary); font-size: 1.6rem; font-weight: 800; display: flex; align-items: center; justify-content: center; gap: 1rem;">
                                    <span class="league-flag-large" style="font-size: 2.5rem;"></span>
                                    <span>ترتيب الدوري</span>
                                </h3>
                            </div>

                            <!-- Modern Table Header -->
                            <div class="modern-table-header">
                                <div class="header-cell position-header">#</div>
                                <div class="header-cell team-header">فريق</div>
                                <div class="header-cell stats-header">ن</div>
                                <div class="header-cell stats-header">فرق</div>
                                <div class="header-cell stats-header">نقاط</div>
                            </div>

                            <!-- Teams List -->
                            <div id="teamsList" class="modern-teams-list"></div>
                        </div>
                    </div>


                </div>
            </section>

        <!-- Admin Section -->
            <section id="adminSection" class="section hidden">
                <div style="max-width: 800px; margin: 0 auto;">
                    <!-- Admin Data Management Section -->
                    <div style="background: rgba(255, 255, 255, 0.05); border: 1px solid var(--border-primary); border-radius: 12px; padding: 1.5rem; margin-bottom: 2rem;">
                        <h3 style="color: var(--text-primary); margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-database"></i>
                            إدارة البيانات
                        </h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                            <button onclick="autoSaveAllChanges()" style="
                                background: linear-gradient(135deg, #10b981 0%, #047857 100%);
                                border: none;
                                border-radius: 8px;
                                color: white;
                                padding: 0.75rem 1rem;
                                font-size: 0.9rem;
                                font-weight: 600;
                                cursor: pointer;
                                transition: all 0.3s ease;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                gap: 0.5rem;
                            " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 15px rgba(16, 185, 129, 0.4)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';">
                                <i class="fas fa-save"></i>
                                حفظ تلقائي
                            </button>

                            <button onclick="downloadBackupData()" style="
                                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                                border: none;
                                border-radius: 8px;
                                color: white;
                                padding: 0.75rem 1rem;
                                font-size: 0.9rem;
                                font-weight: 600;
                                cursor: pointer;
                                transition: all 0.3s ease;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                gap: 0.5rem;
                            " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 15px rgba(102, 126, 234, 0.4)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';">
                                <i class="fas fa-download"></i>
                                تحميل نسخة احتياطية
                            </button>

                            <button onclick="importBackupData()" style="
                                background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
                                border: none;
                                border-radius: 8px;
                                color: white;
                                padding: 0.75rem 1rem;
                                font-size: 0.9rem;
                                font-weight: 600;
                                cursor: pointer;
                                transition: all 0.3s ease;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                gap: 0.5rem;
                            " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 15px rgba(240, 147, 251, 0.4)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';">
                                <i class="fas fa-upload"></i>
                                استيراد البيانات
                            </button>

                            <button onclick="resetToDefault()" style="
                                background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
                                border: none;
                                border-radius: 8px;
                                color: white;
                                padding: 0.75rem 1rem;
                                font-size: 0.9rem;
                                font-weight: 600;
                                cursor: pointer;
                                transition: all 0.3s ease;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                gap: 0.5rem;
                            " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 15px rgba(255, 107, 107, 0.4)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';">
                                <i class="fas fa-redo"></i>
                                إعادة تعيين
                            </button>
                        </div>
                    </div>

                    <div style="text-align: center; margin</div>-bottom: 2rem;">
                        <h2 style="font-size: 2rem; font-weight: 700; color: var(--accent-primary); margin-bottom: 1rem;">
                            <i class="fas fa-shield-alt" style="margin-left: 1rem;"></i>
                            لوحة التحكم
                        </h2>
                        <p style="color: var(--text-secondary); font-size: 1.1rem;">
                            إدارة القنوات والفئات في التطبيق
                        </p>
                    </div>

                    <!-- Admin Tabs -->
                    <div style="display: flex; gap: 1rem; margin-bottom: 2rem; border-bottom: 1px solid var(--border-primary); flex-wrap: wrap;">
                        <button class="admin-tab active" onclick="switchAdminTab('events')" data-tab="events">
                            <i class="fas fa-futbol"></i>
                            إدارة الأحداث الرياضية
                        </button>
                        <button class="admin-tab" onclick="switchAdminTab('backup')" data-tab="backup">
                            <i class="fas fa-cog"></i>
                            إدارة النظام
                        </button>
                    </div>



                    <!-- Events Management -->
                    <div id="adminEventsTab" class="admin-tab-content">
                        <div style="background: var(--gradient-card); border: 1px solid var(--border-primary); border-radius: 16px; padding: 2rem; margin-bottom: 2rem;">
                            <h3 style="color: var(--text-primary); margin-bottom: 1rem;">إضافة حدث رياضي جديد</h3>
                            <div style="display: grid; gap: 1rem; margin-bottom: 1rem;">
                                <input type="text" id="newEventTitle" placeholder="عنوان الحدث (مثل: برشلونة ضد ريال مدريد)" class="admin-input">
                                <input type="text" id="newEventSubtitle" placeholder="الوصف (مثل: الكلاسيكو - الدوري الإسباني)" class="admin-input">
                                <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
                                    <input type="url" id="newEventImage" placeholder="رابط صورة الحدث أو ارفع صورة" class="admin-input" style="flex: 1;">
                                    <input type="file" id="newEventImageFile" accept="image/*" style="display: none;" onchange="handleEventImageUpload(event)">
                                    <button type="button" onclick="document.getElementById('newEventImageFile').click()" class="admin-btn secondary" style="padding: 1rem; white-space: nowrap;">
                                        <i class="fas fa-upload"></i>
                                        رفع صورة
                                    </button>
                                </div>
                                <div style="display: flex; gap: 1rem; align-items: center;">
                                    <div id="newEventImagePreview" style="width: 60px; height: 60px; border-radius: 8px; background: var(--border-primary); display: none; overflow: hidden;">
                                        <img id="newEventImagePreviewImg" style="width: 100%; height: 100%; object-fit: cover;" alt="معاينة">
                                    </div>
                                    <div style="flex: 1;">
                                        <div style="color: var(--text-secondary); font-size: 0.9rem;">معاينة صورة الحدث ستظهر هنا</div>
                                    </div>
                                </div>
                                <div style="display: grid; grid-template-columns: 1fr auto; gap: 1rem; align-items: end;">
                                    <input type="text" id="newEventLink" placeholder="رابط الحدث الخاص (مثل: go:500)" class="admin-input">
                                    <button type="button" onclick="generateEventNumber()" class="admin-btn secondary" style="padding: 1rem; white-space: nowrap;">
                                        <i class="fas fa-magic"></i>
                                        رقم تلقائي
                                    </button>
                                </div>
                                <div style="color: var(--text-muted); font-size: 0.85rem; margin-top: -0.5rem;">
                                    <i class="fas fa-info-circle"></i>
                                    استخدم التنسيق go:رقم لإنشاء رابط خاص (مثل: go:500)
                                </div>
                                <label style="color: var(--text-primary); font-weight: 600; margin-bottom: 0.5rem;">حالة الحدث:</label>
                                <select id="newEventStatus" class="admin-input">
                                    <option value="upcoming">قادم</option>
                                    <option value="live">مباشر</option>
                                    <option value="finished">انتهى</option>
                                </select>
                            </div>
                            <button onclick="addNewEvent()" class="admin-btn primary">
                                <i class="fas fa-plus"></i>
                                إضافة حدث
                            </button>
                        </div>

                        <div style="background: var(--gradient-card); border: 1px solid var(--border-primary); border-radius: 16px; padding: 2rem;">
                            <h3 style="color: var(--text-primary); margin-bottom: 1rem;">الأحداث الرياضية الحالية</h3>
                            <div id="eventsList"></div>
                        </div>

                        <!-- Edit Event Modal -->
                        <div id="editEventModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 5000; align-items: center; justify-content: center;">
                            <div style="background: var(--secondary-bg); border: 1px solid var(--border-primary); border-radius: 16px; padding: 2rem; max-width: 500px; width: 90%; max-height: 90vh; overflow-y: auto;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                                    <h3 style="color: var(--text-primary); margin: 0;">تعديل الحدث الرياضي</h3>
                                    <button onclick="closeEditEventModal()" style="background: none; border: none; color: var(--text-secondary); font-size: 1.5rem; cursor: pointer;">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div style="display: grid; gap: 1rem;">
                                    <input type="hidden" id="editEventIndex">
                                    <input type="text" id="editEventTitle" placeholder="عنوان الحدث" class="admin-input">
                                    <input type="text" id="editEventSubtitle" placeholder="الوصف" class="admin-input">
                                    <input type="url" id="editEventImage" placeholder="رابط صورة الحدث" class="admin-input">
                                    <div style="display: flex; gap: 1rem; align-items: center;">
                                        <div id="editEventImagePreview" style="width: 80px; height: 80px; border-radius: 8px; background: var(--border-primary); display: none; overflow: hidden;">
                                            <img id="editEventImagePreviewImg" style="width: 100%; height: 100%; object-fit: cover;" alt="معاينة">
                                        </div>
                                        <div style="flex: 1;">
                                            <div style="color: var(--text-secondary); font-size: 0.9rem;">معاينة صورة الحدث</div>
                                        </div>
                                    </div>
                                    <div style="display: grid; grid-template-columns: 1fr auto; gap: 1rem; align-items: end;">
                                        <input type="text" id="editEventLink" placeholder="رابط الحدث (مثل: go:500)" class="admin-input">
                                        <button type="button" onclick="generateEditEventNumber()" class="admin-btn secondary" style="padding: 1rem; white-space: nowrap;">
                                            <i class="fas fa-magic"></i>
                                            رقم تلقائي
                                        </button>
                                    </div>
                                    <select id="editEventStatus" class="admin-input">
                                        <option value="upcoming">قادم</option>
                                        <option value="live">مباشر</option>
                                        <option value="finished">انتهى</option>
                                    </select>
                                    <button onclick="saveEventChanges()" class="admin-btn primary">
                                        <i class="fas fa-save"></i>
                                        حفظ التغييرات
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- System Management -->
                    <div id="adminBackupTab" class="admin-tab-content hidden">
                        <div style="display: grid; gap: 2rem;">
                            <div style="background: rgba(255, 71, 87, 0.1); border: 1px solid rgba(255, 71, 87, 0.3); border-radius: 16px; padding: 2rem;">
                                <h3 style="color: #ff4757; margin-bottom: 1rem;">إعادة تعيين البيانات</h3>
                                <p style="color: var(--text-secondary); margin-bottom: 1rem; font-size: 0.9rem;">
                                    حذف جميع البيانات والعودة للإعدادات الافتراضية
                                </p>
                                <button onclick="resetToDefault()" class="admin-btn danger">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    إعادة تعيين للافتراضي
                                </button>
                            </div>
                        </div>
                    </div>
           <!-- System Management -->
                    <div id="adminBackupTab" class="admin-tab-content hidden">
                        <div style="display: grid; gap: 2rem;">
                            <div style="background: rgba(255, 71, 87, 0.1); border: 1px solid rgba(255, 71, 87, 0.3); border-radius: 16px; padding: 2rem;">
                                <h3 style="color: #ff4757; margin-bottom: 1rem;">إعادة تعيين البيانات</h3>
                                <p style="color: var(--text-secondary); margin-bottom: 1rem; font-size: 0.9rem;">
                                    حذف جميع البيانات والعودة للإعدادات الافتراضية
                                </p>
                                <button onclick="resetToDefault()" class="admin-btn danger">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    إعادة تعيين للافتراضي
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h3 class="sidebar-title">القائمة</h3>
            <button class="close-btn" onclick="toggleSidebar()">
                <i class="fas fa-times" style="font-size: 1.2rem;"></i>
            </button>
        </div>

        <nav>
            <ul class="sidebar-menu">
                <li>
                    <a href="#" onclick="showSection('live'); closeSidebar();">
                        <i class="fas fa-home icon"></i>
                        الواجهة الرئيسية
                    </a>
                </li>
                <li>
                    <a href="#" onclick="showSection('channels'); closeSidebar();">
                        <i class="fas fa-tv icon"></i>
                        القنوات الرياضية
                    </a>
                </li>
                 <li>
                    <a href="#" onclick="showSection('leagueStats'); closeSidebar();">
                        <i class="fas fa-chart-line icon"></i>
                        إحصائيات الدوريات
                    </a>
                </li>
                <li>
                    <a href="#" onclick="showSection('profile'); closeSidebar();">
                        <i class="fas fa-user-circle icon"></i>
                        الملف الشخصي
                    </a>
                </li>
                <li>
                    <a href="#" onclick="showSection('settings'); closeSidebar();">
                        <i class="fas fa-cog icon"></i>
                        الإعدادات
                    </a>
                </li>
                <li id="adminMenuItem" style="display: none;">
                    <a href="#" onclick="showSection('admin'); closeSidebar();">
                        <i class="fas fa-shield-alt icon"></i>
                        لوحة التحكم
                    </a>
                </li>
            </ul>

            <!-- Separator Line -->
            <div style="height: 1px; background: var(--border-primary); margin: 1rem 0; opacity: 0.5;"></div>

            <!-- Customer Service Section -->
            <div class="customer-service-section">
                <h4 style="color: var(--text-primary); font-size: 0.9rem; font-weight: 600; margin-bottom: 1rem; text-align: center;">خدمة العملاء</h4>
                <div class="social-links">
                    <a href="https://t.me/NovaSporrt" target="_blank" rel="noopener noreferrer" class="social-link telegram" title="تليجرام">
                        <i class="fab fa-telegram-plane"></i>
                        <span>تليجرام</span>
                    </a>
                    <a href="https://t.me/NovaSporrt" target="_blank" rel="noopener noreferrer" class="social-link youtube" title="يوتيوب">
                        <i class="fab fa-youtube"></i>
                        <span>يوتيوب</span>
                    </a>
                    <a href="https://t.me/NovaSporrt" target="_blank" rel="noopener noreferrer" class="social-link instagram" title="انستجرام">
                        <i class="fab fa-instagram"></i>
                        <span>انستجرام</span>
                    </a>
                </div>
            </div>
        </nav>
    </aside>

    <!-- Profile Modal -->
    <div class="profile-overlay" id="profileOverlay">
        <div class="profile-container">
            <!-- Profile Header with Close Button -->
            <div class="profile-header-bar">
                <div class="profile-header-title">الملف الشخصي</div>
                <button class="profile-close" onclick="closeProfile()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Main Profile Content -->
            <div class="profile-main-content">
                <!-- Profile Info Section -->
                <div class="profile-info-section">
                    <div class="profile-avatar-container">
                        <div class="profile-avatar-large" id="profileAvatarLarge">ض</div>
                    </div>

                    <h2 class="profile-name" id="profileName">ضيف</h2>

                    <!-- Edit Profile Button -->
                    <button class="edit-profile-btn">
                        تعديل الملف الشخصي
                    </button>

                    <p class="profile-edit-description">
                        تعديل عنوان البريد الإلكتروني وكلمة المرور
                    </p>
                </div>

                <!-- Boost Experience Section -->
                <div class="boost-experience-section">
                    <h3 class="boost-title">تحسين تجربة Nova</h3>
                    <p class="boost-description">
                        أكمل ملفك الشخصي لمشاهدة المزيد مما تحب، حافظ على أمان حسابك والمزيد.
                    </p>

                    <div class="progress-container">
                        <div class="progress-circle">
                            <svg class="progress-svg" viewBox="0 0 120 120">
                                <circle cx="60" cy="60" r="50" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="8"/>
                                <circle cx="60" cy="60" r="50" fill="none" stroke="var(--accent-primary)" stroke-width="8" 
                                        stroke-dasharray="314" stroke-dashoffset="188" stroke-linecap="round"/>
                            </svg>
                            <div class="progress-text">
                                <span class="progress-number">2</span>
                                <span class="progress-total">/ 5</span>
                            </div>
                        </div>

                        <button class="get-started-btn">
                            ابدأ الآن
                        </button>
                    </div>
                </div>

                <!-- Logout Section -->
                <div class="profile-logout-section">
                    <button onclick="logout(); closeProfile();" class="logout-btn">
                        <i class="fas fa-sign-out-alt"></i>
                        تسجيل الخروج
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div class="edit-profile-overlay" id="editProfileOverlay" style="display: none;">
        <div class="edit-profile-container">
            <div class="edit-profile-header">
                <h2>تعديل الملف الشخصي</h2>
                <button class="edit-profile-close" onclick="closeEditProfileModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="edit-profile-content">
                <!-- Profile Picture Section -->
                <div class="edit-avatar-section">
                    <div class="current-avatar-display">
                        <div class="current-avatar" id="editProfileAvatar">A</div>
                        <div class="avatar-edit-overlay" onclick="selectProfileImage()">
                            <i class="fas fa-camera"></i>
                        </div>
                        <button class="avatar-remove-btn" id="avatarRemoveBtn" onclick="removeProfileImage()" style="display: none;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    <input type="file" id="profileImageInput" accept="image/*" style="display: none;" onchange="handleProfileImageSelect(event)">



                    <div class="avatar-help-section">
                        <p class="avatar-help-text">انقر على الصورة لتغييرها</p>
                        <p class="avatar-size-info">الحد الأقصى: 5 ميجابايت</p>
                    </div>
                </div>

                <!-- Profile Form -->
                <form class="edit-profile-form" onsubmit="saveProfileChanges(event)">
                    <div class="form-group">
                        <label class="form-label">الاسم الكامل</label>
                        <input type="text" id="editProfileName" class="form-input" placeholder="أدخل اسمك الكامل" required maxlength="50">
                        <div class="character-count">
                            <span id="nameCharCount">0</span>/50 حرف
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn-cancel" onclick="closeEditProfileModal()">إلغاء</button>
                        <button type="submit" class="btn-save">حفظ التغييرات</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div class="notification-container" id="notificationContainer">
        <!-- Notifications will be dynamically added here -->
    </div>

    

    <script>

// معالجة النقر على الروابط
        function handleChannelClick(event, url, drmKeys = null) {
            event.preventDefault();

            try {
                console.log('النقر على الرابط:', url);

                if (!url) {
                    showNotification('رابط غير صالح', 'error');
                    return;
                }

                // جميع الروابط تفتح في نافذة جديدة
                console.log('فتح الرابط في نافذة جديدة');
                window.open(url, '_blank');

            } catch (error) {
                console.error('خطأ في معالجة النقر:', error);
                showNotification('خطأ في فتح الرابط', 'error');
            }
        }

        // ===== FIREBASE CONFIGURATION =====
        // إعدادات Firebase الصحيحة
        const firebaseConfig = {
            apiKey: "AIzaSyDY3v5WMeJMMKEh0LATA8_bUy9Bx9DnMcI",
            authDomain: "novaagoaldata.firebaseapp.com",
            databaseURL: "https://novaagoaldata-default-rtdb.firebaseio.com",
            projectId: "novaagoaldata",
            storageBucket: "novaagoaldata.firebasestorage.app",
            messagingSenderId: "1039435605690",
            appId: "1:1039435605690:web:46ee4cd6eeab511d604483",
            measurementId: "G-6NXXZB3Z4X"
        };

        // Initialize Firebase
        let database;
        let storage = null;
        let firebaseAvailable = false;

        // Initialize Firebase connection
        function initializeFirebase() {
            try {
                if (typeof firebase !== 'undefined') {
                    firebase.initializeApp(firebaseConfig);
                    database = firebase.database();
                    storage = firebase.storage();
                    firebaseAvailable = true;
                    console.log('Firebase initialized successfully');
                    return true;
                } else {
                    console.log('Firebase SDK not available, using localStorage fallback');
                    firebaseAvailable = false;
                    return false;
                }
            } catch (error) {
                console.warn('Firebase initialization failed, using localStorage fallback:', error);
                firebaseAvailable = false;
                return false;
            }
        }

        // Global Variables
        let currentUser = null;
        let isAdmin = false;

        let currentThemeColor = localStorage.getItem('Nova_color') || 'yellow';
        let settings = JSON.parse(localStorage.getItem('Nova_settings')) || {
            notifications: true,
            autoplay: false,
            quality: 'auto',
            sound: true
        };

        // Admin credentials
        const ADMIN_USERNAME = 'nova_admin';
        const ADMIN_PASSWORD = 'admin2008';

        // Global Variables
        let searchTimeout;



        // Load channel data from Firebase or localStorage
        let channelData = {};

        // Sports Events Data
        let sportsEvents = [];

        // Default sports events
        const defaultSportsEvents = [
            {
                id: "default_1",
                title: "لا توجد أحداث",
                subtitle: "Error",
                image: "",
                link: "go:500",
                status: "upcoming",
                timestamp: Date.now(),
                permanent: true
            }
        ];

        // Default channel data
        const defaultChannelData = {
            'bein-hd': {
                title: 'beIN SPORTS HD',
                baseNumber: 100,
                image: 'https://c.top4top.io/p_3408jzbg31.jpg',
                channels: [
                    { 
                        name: 'beIN Sports 1 HD', 
                        image: null, 
                        url: 'https://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4'
                    },
                    { 
                        name: 'beIN Sports 2 HD', 
                        image: null, 
                        url: 'https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8'
                    },
                    { 
                        name: 'beIN Sports 3 HD', 
                        image: null, 
                        url: 'https://example.com/bein3.m3u8',
                        drm: {
                            keyId: "47f0ab58f5a81c20b5b69dc494cbe102",
                            key: "1e0719da653c2b4652f0b0bf84d96c74"
                        }
                    },
                    { 
                        name: 'beIN Sports 4 HD', 
                        image: null, 
                        url: 'https://example.com/bein4.m3u8',
                        drm: {
                            keyId: "47f0ab58f5a81c20b5b69dc494cbe102",
                            key: "1e0719da653c2b4652f0b0bf84d96c74"
                        }
                    },
                    { 
                        name: 'beIN Sports 5 HD', 
                        image: null, 
                        url: 'https://example.com/bein5.m3u8',
                        drm: {
                            keyId: "47f0ab58f5a81c20b5b69dc494cbe102",
                            key: "1e0719da653c2b4652f0b0bf84d96c74"
                        }
                    },
                    { 
                        name: 'beIN Sports 6 HD', 
                        image: null, 
                        url: 'https://example.com/bein6.m3u8',
                        drm: {
                            keyId: "47f0ab58f5a81c20b5b69dc494cbe102",
                            key: "1e0719da653c2b4652f0b0bf84d96c74"
                        }
                    },
                    { 
                        name: 'beIN Sports 7 HD', 
                        image: null, 
                        url: 'https://example.com/bein7.m3u8',
                        drm: {
                            keyId: "47f0ab58f5a81c20b5b69dc494cbe102",
                            key: "1e0719da653c2b4652f0b0bf84d96c74"
                        }
                    },
                    { 
                        name: 'beIN Sports 8 HD', 
                        image: null, 
                        url: 'https://example.com/bein8.m3u8',
                        drm: {
                            keyId: "47f0ab58f5a81c20b5b69dc494cbe102",
                            key: "1e0719da653c2b4652f0b0bf84d96c74"
                        }
                    },
                    { 
                        name: 'beIN Sports 9 HD', 
                        image: null, 
                        url: 'https://example.com/bein9.m3u8',
                        drm: {
                            keyId: "47f0ab58f5a81c20b5b69dc494cbe102",
                            key: "1e0719da653c2b4652f0b0bf84d96c74"
                        }
                    },
                    { 
                        name: 'beIN Sports Global HD', 
                        image: null, 
                        url: 'https://example.com/beinglobal.m3u8',
                        drm: {
                            keyId: "47f0ab58f5a81c20b5b69dc494cbe102",
                            key: "1e0719da653c2b4652f0b0bf84d96c74"
                        }
                    },
                    { 
                        name: 'beIN Sports News HD', 
                        image: null, 
                        url: 'https://example.com/beinnews.m3u8',
                        drm: {
                            keyId: "47f0ab58f5a81c20b5b69dc494cbe102",
                            key: "1e0719da653c2b4652f0b0bf84d96c74"
                        }
                    }
                ]
            },
            'fjr-s': {
                title: 'FAJER HD',
                baseNumber: 200,
                image: 'https://l.top4top.io/p_34951cu721.jpg',
                channels: [
                    { name: 'FaJER 1 HD', image: null, url: 'https://example.com/fajer1.m3u8' },
                    { name: 'FaJER 2 HD', image: null, url: 'https://example.com/fajer2.m3u8' },
                    { name: 'FaJER 3 HD', image: null, url: 'https://example.com/fajer3.m3u8' },
                    { name: 'FaJER 4 HD', image: null, url: 'https://example.com/fajer4.m3u8' },
                    { name: 'FaJER 5 HD', image: null, url: 'https://example.com/fajer5.m3u8' }
                ]
            },
            'sports-general': {
                title: 'القنوات الرياضية',
                baseNumber: 300,
                image: 'https://c.top4top.io/p_3499bjfz31.jpg',
                channels: [
                    { name: 'NRT SPORTS', image: null, url: 'https://example.com/nrt.m3u8' },
                    { name: 'AVA SPORTS', image: null, url: 'https://example.com/ava.m3u8' },
                    { name: 'LD SPORTS', image: null, url: 'https://example.com/ld.m3u8' },
                    { name: 'ASTERA SPORTS', image: null, url: 'https://example.com/astera.m3u8' },
                    { name: 'DUHOK SPORTS', image: null, url: 'https://example.com/duhok.m3u8' },
                    { name: 'DAISYNA SPORTS', image: null, url: 'https://example.com/daisyna.m3u8' }
                ]
            },
            'c-alwanhd': {
                title: 'Alwan Sports HD',
                baseNumber: 400,
                image: 'https://l.top4top.io/p_34951cu721.jpg',
                channels: [
                    { name: 'Alwan 1 HD', image: null, url: 'https://example.com/alwan1.m3u8' },
                    { name: 'Alwan 2 HD', image: null, url: 'https://example.com/alwan2.m3u8' },
                    { name: 'Alwan 3 HD', image: null, url: 'https://example.com/alwan3.m3u8' },
                    { name: 'Alwan 4 HD', image: null, url: 'https://example.com/alwan4.m3u8' },
                    { name: 'Alwan 5 HD', image: null, url: 'https://example.com/alwan5.m3u8' },
                    { name: 'Alwan 6 HD', image: null, url: 'https://example.com/alwan6.m3u8' }                    
                ]
            },
             'cc-thmanyah': {
                title: 'Thmanyah Sports HD',
                baseNumber: 500,
                image: 'https://thmanyah.com/_next/image?url=%2Fimages%2Ffootball-cover-sm-2.webp&w=1200&q=100',
                channels: [
                    { name: 'Thmanyah 1 HD', image: null, url: '' },
                    { name: 'Thmanyah 2 HD', image: null, url: '' },
                    { name: 'Thmanyah 3 HD', image: null, url: '' }
                ]
            },
        };

        // Firebase Realtime Functions
        let channelDataListener = null;
        let eventsListener = null;
        let connectionState = {
            firebase: false,
            retryCount: 0,
            maxRetries: 3
        };

        // Firebase Authentication Functions
        async function initializeFirebaseAuth() {
            if (!firebaseAvailable || !firebase.auth) {
                console.log('Firebase Auth غير متاح');
                return false;
            }

            try {
                // مراقبة حالة المصادقة
                firebase.auth().onAuthStateChanged(async (user) => {
                    if (user) {
                        console.log('المستخدم مسجل دخول:', user.uid);
                        currentUser = user;

                        // تحقق من صلاحيات الإدارة
                        const token = await user.getIdTokenResult();
                        isAdmin = token.claims.admin === true || user.uid === 'nova_admin';

                        // سجل عملية الدخول
                        await logUserAction('login', `المستخدم ${user.uid} سجل دخول`);

                    } else {
                        console.log('المستخدم غير مسجل دخول');
                        currentUser = null;
                        isAdmin = false;
                    }

                    updateUIBasedOnAuth();
                });

                return true;
            } catch (error) {
                console.error('خطأ في تهيئة Firebase Auth:', error);
                return false;
            }
        }

        // تسجيل الدخول للإدارة
        async function adminLogin(username, password) {
            if (username === ADMIN_USERNAME && password === ADMIN_PASSWORD) {
                try {
                    // إنشاء مستخدم مؤقت للإدارة
                    const adminUser = {
                        uid: 'nova_admin',
                        displayName: 'Nova Admin'
                    };

                    currentUser = adminUser;
                    isAdmin = true;

                    await logUserAction('admin_login', 'تسجيل دخول إدارة ناجح');

                    return true;
                } catch (error) {
                    console.error('خطأ في تسجيل دخول الإدارة:', error);
                    return false;
                }
            }
            return false;
        }

        // تسجيل الأنشطة
        async function logUserAction(action, details = null) {
            if (!firebaseAvailable || !database || !currentUser) {
                return;
            }

            try {
                const logEntry = {
                    timestamp: Date.now(),
                    action: action,
                    userId: currentUser.uid,
                    details: details
                };

                await database.ref('systemLogs').push(logEntry);
            } catch (error) {
                console.warn('خطأ في تسجيل النشاط:', error);
            }
        }

        // تحديث واجهة المستخدم حسب حالة المصادقة
        function updateUIBasedOnAuth() {
            const adminElements = document.querySelectorAll('.admin-only');
            adminElements.forEach(element => {
                element.style.display = isAdmin ? 'block' : 'none';
            });
        }

        // تحسين نظام مراقبة تغييرات القنوات في الوقت الفعلي
        let syncInProgress = false; // منع التداخل في عمليات المزامنة
        let lastSyncTimestamp = 0; // تتبع آخر عملية حفظ

        function enableChannelDataRealtimeSync() {
            if (!firebaseAvailable || !database) {
                console.log('Firebase غير متاح للمراقبة المباشرة');
                return;
            }

            try {
                // إزالة المستمع السابق إن وجد
                if (channelDataListener) {
                    database.ref('channelData').off('value', channelDataListener);
                    channelDataListener = null;
                }

                // إضافة مستمع جديد للتغييرات مع منع التداخل
                channelDataListener = database.ref('channelData').on('value', (snapshot) => {
                    try {
                        // منع التداخل أثناء عمليات الحفظ
                        if (syncInProgress) {
                            console.log('تجاهل التحديث أثناء عملية المزامنة');
                            return;
                        }

                        const data = snapshot.val();

                        if (data && typeof data === 'object' && Object.keys(data).length > 0) {
                            console.log('تم تحديث بيانات القنوات في الوقت الفعلي');

                            // تحقق من صحة البيانات قبل التحديث
                            let isValidData = true;
                            for (const categoryId in data) {
                                const category = data[categoryId];
                                if (!category || !category.title || !category.baseNumber || !Array.isArray(category.channels)) {
                                    isValidData = false;
                                    break;
                                }
                            }

                            if (isValidData) {
                                // تحديث البيانات المحلية فقط إذا كانت مختلفة
                                const oldChannelData = JSON.stringify(channelData);
                                const newChannelData = JSON.stringify(data);

                                if (oldChannelData !== newChannelData) {
                                    channelData = data;
                                    localStorage.setItem('Nova_channelData', JSON.stringify(channelData));

                                    // تحديث العرض
                                    refreshChannelsDisplayIfActive();
                                    refreshAdminDisplayIfActive();

                                    // عرض إشعار فقط للأدمن وإذا لم يكن هذا تحديث من العملية الحالية
                                    const now = Date.now();
                                    if (now - lastSyncTimestamp > 2000 && isAdminMode()) {
                                        showNotification('تم تحديث البيانات من الخادم', 'info', 3000);
                                    }
                                }

                                connectionState.firebase = true;
                                connectionState.retryCount = 0;
                            } else {
                                console.warn('تم تجاهل بيانات غير صحيحة من Firebase');
                            }
                        }
                    } catch (error) {
                        console.error('خطأ في معالجة تحديث القنوات:', error);
                    }
                }, (error) => {
                    console.error('خطأ في مراقبة تغييرات القنوات:', error);
                    connectionState.firebase = false;

                    // إعادة المحاولة مع تأخير متزايد
                    if (connectionState.retryCount < connectionState.maxRetries) {
                        connectionState.retryCount++;
                        const retryDelay = connectionState.retryCount * 2000;
                        console.log(`إعادة محاولة الاتصال بـ Firebase بعد ${retryDelay}ms`);
                        setTimeout(() => {
                            enableChannelDataRealtimeSync();
                        }, retryDelay);
                    }
                });

                console.log('تم تفعيل المراقبة المحسنة في الوقت الفعلي للقنوات');
            } catch (error) {
                console.error('خطأ في تفعيل المراقبة في الوقت الفعلي:', error);
                connectionState.firebase = false;
            }
        }

        // تفعيل مراقبة تغييرات الأحداث في الوقت الفعلي
        function enableEventsRealtimeSync() {
            if (!firebaseAvailable || !database) return;

            try {
                // إزالة المستمع السابق إن وجد
                if (eventsListener) {
                    database.ref('sportsEvents').off('value', eventsListener);
                }

                // إضافة مستمع جديد للتغييرات
                eventsListener = database.ref('sportsEvents').on('value', (snapshot) => {
                    const data = snapshot.val();

                    if (data && Array.isArray(data)) {
                        console.log('تم تحديث الأحداث الرياضية في الوقت الفعلي');

                        // تحديث البيانات المحلية
                        sportsEvents = data;
                        localStorage.setItem('Nova_sportsEvents', JSON.stringify(sportsEvents));

                        // تحديث عرض الأحداث
                        updateSportsEventsDisplay();
                    }
                }, (error) => {
                    console.error('خطأ في مراقبة تغييرات الأحداث:', error);
                });

                console.log('تم تفعيل المراقبة في الوقت الفعلي للأحداث');
            } catch (error) {
                console.error('خطأ في تفعيل المراقبة في الوقت الفعلي:', error);
            }
        }

        // إيقاف المراقبة في الوقت الفعلي
        function disableRealtimeSync() {
            if (database) {
                if (channelDataListener) {
                    database.ref('channelData').off('value', channelDataListener);
                    channelDataListener = null;
                }
                if (eventsListener) {
                    database.ref('sportsEvents').off('value', eventsListener);
                    eventsListener = null;
                }
                console.log('تم إيقاف المراقبة في الوقت الفعلي');
            }
        }

        // تحديث عرض القنوات إذا كانت الصفحة مفتوحة
        function refreshChannelsDisplayIfActive() {
            const channelsSection = document.getElementById('channelsSection');
            if (channelsSection && !channelsSection.classList.contains('hidden')) {
                // إعادة تحميل الفئات إذا كانت صفحة القنوات مفتوحة
                const channelCategoriesMain = document.getElementById('channelCategoriesMain');
                if (channelCategoriesMain && channelCategoriesMain.style.display !== 'none') {
                    // تحديث عرض الفئات مباشرة
                    updateChannelCategoriesDisplay();
                    console.log('تم تحديث عرض القنوات في الوقت الفعلي');
                }

                // تحديث صفحة فرعية للقنوات إذا كانت مفتوحة
                const channelSubPage = document.getElementById('channelSubPage');
                if (channelSubPage && channelSubPage.style.display !== 'none') {
                    const currentCategory = channelSubPage.dataset.currentCategory;
                    if (currentCategory && channelData[currentCategory]) {
                        showChannelSubPage(currentCategory);
                    }
                }
            }
        }

        // تحديث لوحة التحكم إذا كانت مفتوحة
        function refreshAdminDisplayIfActive() {
            const adminSection = document.getElementById('adminSection');
            if (adminSection && !adminSection.classList.contains('hidden')) {
                // تحديث قائمة الفئات
                const categoriesTab = document.getElementById('adminCategoriesTab');
                if (categoriesTab && !categoriesTab.classList.contains('hidden')) {
                    loadCategoriesList();
                    loadChannelCategorySelects();
                }

                // تحديث قائمة القنوات
                const channelsTab = document.getElementById('adminChannelsTab');
                if (channelsTab && !channelsTab.classList.contains('hidden')) {
                    loadChannelCategorySelects();
                    const currentCategory = document.getElementById('channelListCategorySelect')?.value;
                    if (currentCategory) {
                        loadChannelsForCategory();
                    }
                }

                console.log('تم تحديث لوحة التحكم في الوقت الفعلي');
            }
        }

        // تتبع الصفحة الفرعية الحالية للقنوات
        function showChannelSubPage(categoryId) {
            const category = channelData[categoryId];
            if (!category) {
                showNotification('الفئة غير موجودة', 'error');
                return;
            }

            // إخفاء الصفحة الرئيسية وإظهار الصفحة الفرعية
            document.getElementById('channelCategoriesMain').style.display = 'none';
            const subPage = document.getElementById('channelSubPage');
            subPage.style.display = 'block';
            subPage.dataset.currentCategory = categoryId; // حفظ الفئة الحالية

            // تحديث العنوان
            document.getElementById('channelSubTitle').textContent = category.title;

            // تحديث شبكة القنوات
            const subGrid = document.getElementById('channelSubGrid');
            let html = '';

            category.channels.forEach((channel, index) => {
                const channelName = typeof channel === 'string' ? channel : channel.name;
                const channelImage = typeof channel === 'object' ? channel.image : null;
                const channelNumber = category.baseNumber + index;

                // استخدام رابط مخصص إذا توفر، وإلا استخدام النظام التلقائي
                const channelUrl = (typeof channel === 'object' && channel.url) ? 
                    channel.url : `go:${channelNumber}`;

                // الحصول على مفاتيح DRM إذا توفرت
                const drmKeys = (typeof channel === 'object' && channel.drm) ? 
                    channel.drm : null;

                // تحويل مفاتيح DRM إلى نص JSON للتمرير في onclick
                const drmKeysStr = drmKeys ? 
                    `JSON.parse('${JSON.stringify(drmKeys).replace(/'/g, "\\'")}')` : 'null';

                html += `
                    <div class="channel-item-wrapper">
                        <div class="channel-item" onclick="handleChannelClick(event, '${channelUrl}', ${drmKeysStr})" style="cursor: pointer;">
                            <div class="channel-logo">
                                ${channelImage ? 
                                    `<img src="${channelImage}" alt="${channelName}" style="width: 100%; height: 100%; object-fit: cover;">` : 
                                    channelName.substring(0, 2)
                                }
                            </div>
                            <div class="channel-info">
                                <div class="channel-name">${channelName}</div>
                                <div class="channel-quality">HD ${drmKeys ? '<i class="fas fa-lock" style="color: var(--accent-primary); margin-right: 4px;" title="محمي بـ DRM"></i>' : ''}</div>
                            </div>
                            <div class="channel-status"></div>
                        </div>
                    </div>
                `;
            });

            subGrid.innerHTML = html;
        }

        async function loadChannelDataFromFirebase() {
            if (!firebaseAvailable || !database) {
                console.log('Firebase غير متاح، تحميل من التخزين المحلي');
                return loadChannelDataFromLocalStorage();
            }

            try {
                const snapshot = await database.ref('channelData').once('value');
                const data = snapshot.val();

                if (data && typeof data === 'object') {
                    channelData = data;
                    // تحقق من صحة البيانات
                    let isValid = true;
                    for (const categoryId in channelData) {
                        const category = channelData[categoryId];
                        if (!category.title || !category.baseNumber || !Array.isArray(category.channels)) {
                            isValid = false;
                            break;
                        }
                    }

                    if (isValid) {
                        localStorage.setItem('Nova_channelData', JSON.stringify(channelData));

                        // تفعيل المراقبة في الوقت الفعلي بعد التحميل الأول
                        enableChannelDataRealtimeSync();

                        return true;
                    }
                }

                // إذا لم توجد بيانات صحيحة، استخدم البيانات الافتراضية
                channelData = JSON.parse(JSON.stringify(defaultChannelData));
                await saveChannelDataToFirebase();
                return true;

            } catch (error) {
                console.error('خطأ في تحميل البيانات من Firebase:', error);
                loadChannelDataFromLocalStorage();
                return false;
            }
        }

        async function saveChannelDataToFirebase() {
            if (!firebaseAvailable || !database) {
                console.log('Firebase غير متاح، حفظ محلي فقط');
                return saveChannelDataToLocalStorage();
            }

            // منع التداخل في عمليات الحفظ
            if (syncInProgress) {
                console.log('عملية حفظ أخرى قيد التنفيذ، تجاهل الطلب');
                return false;
            }

            syncInProgress = true;
            lastSyncTimestamp = Date.now();

            try {
                console.log('حفظ بيانات القنوات في Firebase...');

                // تحقق من صحة البيانات قبل الحفظ
                if (!channelData || typeof channelData !== 'object') {
                    throw new Error('بيانات القنوات غير صحيحة');
                }

                // تنظيف البيانات قبل الحفظ مع التحقق المحسن
                const cleanChannelData = {};
                for (const categoryId in channelData) {
                    // تخطي قنوات SSC إذا وجدت
                    if (categoryId === 'ssc') {
                        continue;
                    }

                    const category = channelData[categoryId];
                    if (category && category.title && category.baseNumber && Array.isArray(category.channels)) {
                        cleanChannelData[categoryId] = {
                            title: category.title.trim(),
                            baseNumber: parseInt(category.baseNumber),
                            channels: category.channels.filter(channel => {
                                if (typeof channel === 'string') {
                                    return channel.trim().length > 0;
                                }
                                return channel && channel.name && channel.name.trim().length > 0;
                            }).map(channel => {
                                if (typeof channel === 'string') {
                                    return { name: channel.trim(), image: null };
                                }
                                return {
                                    name: channel.name.trim(),
                                    image: channel.image || null
                                };
                            }),
                            image: category.image || null
                        };
                    }
                }

                // التحقق من وجود بيانات صالحة للحفظ
                if (Object.keys(cleanChannelData).length === 0) {
                    console.log('استخدام البيانات الافتراضية');
                    Object.assign(cleanChannelData, defaultChannelData);
                }

                // إيقاف المراقبة مؤقتاً لتجنب التحديثات المتكررة
                if (channelDataListener) {
                    database.ref('channelData').off('value', channelDataListener);
                }

                // حفظ البيانات في Firebase مع retry mechanism محسن
                let retryCount = 0;
                const maxRetries = 3;
                let saveSuccess = false;

                while (retryCount < maxRetries && !saveSuccess) {
                    try {
                        // تحقق من الصلاحيات أولاً
                        const testRef = database.ref('channelData/test');
                        await testRef.set({ timestamp: Date.now() });
                        await testRef.remove();

                        // إذا نجح الاختبار، احفظ البيانات الحقيقية
                        await database.ref('channelData').set(cleanChannelData);
                        saveSuccess = true;
                        console.log(`تم حفظ بيانات ${Object.keys(cleanChannelData).length} فئة قنوات في Firebase بنجاح`);
                    } catch (saveError) {
                        retryCount++;
                        console.warn(`محاولة حفظ فاشلة ${retryCount}/${maxRetries}:`, saveError);

                        // إذا كان الخطأ permission_denied، توقف عن المحاولة
                        if (saveError.code === 'PERMISSION_DENIED') {
                            console.error('لا توجد صلاحيات للكتابة في Firebase - التحويل للتخزين المحلي');
                            throw new Error('PERMISSION_DENIED');
                        }

                        if (retryCount < maxRetries) {
                            await new Promise(resolve => setTimeout(resolve, 1000 * retryCount));
                        } else {
                            throw saveError;
                        }
                    }
                }

                // تحديث البيانات المحلية بعد نجاح الحفظ
                channelData = { ...cleanChannelData };
                localStorage.setItem('Nova_channelData', JSON.stringify(cleanChannelData));

                // إعادة تفعيل المراقبة بعد ثانية واحدة
                setTimeout(() => {
                    enableChannelDataRealtimeSync();
                }, 1000);

                return true;

            } catch (error) {
                console.error('خطأ في حفظ البيانات في Firebase:', error.message || error);

                // التحقق من نوع الخطأ
                if (error.message === 'PERMISSION_DENIED' || error.code === 'PERMISSION_DENIED') {
                    console.log('خطأ في الصلاحيات - التحويل للتخزين المحلي فقط');
                    showNotification('لا توجد صلاحيات للحفظ - سيتم الحفظ محلياً فقط', 'error', 4000);
                    firebaseAvailable = false; // إيقاف محاولات Firebase مؤقتاً
                } else {
                    console.log('التراجع للحفظ المحلي...');
                }

                // إعادة تفعيل المراقبة في حالة الخطأ
                setTimeout(() => {
                    if (firebaseAvailable) {
                        enableChannelDataRealtimeSync();
                    }
                }, 1000);

                // حذف قنوات SSC من البيانات المحلية أيضاً
                if (channelData.ssc) {
                    delete channelData.ssc;
                }

                return saveChannelDataToLocalStorage();
            } finally {
                syncInProgress = false;
            }
        }

        async function loadSportsEventsFromFirebase() {
            if (!firebaseAvailable || !database) {
                console.log('Firebase غير متاح، تحميل الأحداث محلياً');
                loadSportsEventsFromLocalStorage();
                updateSportsEventsDisplay();
                return false;
            }

            try {
                console.log('محاولة تحميل الأحداث الرياضية من Firebase...');
                const snapshot = await database.ref('sportsEvents').once('value');
                const data = snapshot.val();

                if (data && Array.isArray(data) && data.length > 0) {
                    // تحقق محسن من صحة البيانات مع إضافة المعرفات المفقودة
                    const validEvents = data.filter(event => 
                        event && 
                        event.title && 
                        event.subtitle && 
                        event.link && 
                        event.status
                    ).map(event => ({
                        ...event,
                        id: event.id || generateUniqueId(),
                        timestamp: event.timestamp || Date.now(),
                        permanent: event.permanent || false
                    }));

                    if (validEvents.length > 0) {
                        sportsEvents = validEvents;

                        // حفظ البيانات المحدثة محلياً وفي Firebase
                        localStorage.setItem('Nova_sportsEvents', JSON.stringify(validEvents));

                        // إعادة حفظ في Firebase إذا تم إضافة معرفات جديدة
                        const hasNewIds = validEvents.some(event => !data.find(d => d.id === event.id));
                        if (hasNewIds) {
                            await database.ref('sportsEvents').set(validEvents);
                        }

                        console.log(`تم تحميل ${validEvents.length} حدث رياضي من Firebase بنجاح`);
                        updateSportsEventsDisplay();

                        // تفعيل المراقبة في الوقت الفعلي بعد التحميل الأول
                        enableEventsRealtimeSync();

                        return true;
                    } else {
                        console.warn('البيانات المحملة من Firebase غير صالحة');
                    }
                }

                // إذا لم توجد بيانات صالحة، استخدم البيانات الافتراضية
                console.log('لا توجد أحداث صالحة في Firebase، استخدام البيانات الافتراضية');
                sportsEvents = [...defaultSportsEvents];
                await saveSportsEventsToFirebase();
                updateSportsEventsDisplay();
                return true;

            } catch (error) {
                console.error('خطأ في تحميل الأحداث من Firebase:', error.message || error);
                loadSportsEventsFromLocalStorage();
                updateSportsEventsDisplay();
                return false;
            }
        }

        async function saveSportsEventsToFirebase() {
            if (!firebaseAvailable || !database) {
                console.log('Firebase غير متاح، حفظ الأحداث محلياً فقط');
                return saveSportsEventsToLocalStorage();
            }

            try {
                console.log('حفظ الأحداث الرياضية في Firebase...');

                // تحقق من صحة بيانات الأحداث
                if (!Array.isArray(sportsEvents)) {
                    console.warn('بيانات الأحداث غير صحيحة، استخدام البيانات الافتراضية');
                    sportsEvents = [...defaultSportsEvents];
                }

                // تنظيف البيانات قبل الحفظ مع معالجة محسنة للأخطاء
                const cleanEvents = sportsEvents.filter(event => {
                    if (!event || typeof event !== 'object') return false;
                    if (!event.title || typeof event.title !== 'string' || !event.title.trim()) return false;
                    if (!event.subtitle || typeof event.subtitle !== 'string' || !event.subtitle.trim()) return false;
                    if (!event.link || typeof event.link !== 'string' || !event.link.trim()) return false;
                    if (!event.status || typeof event.status !== 'string') return false;
                    return true;
                }).map(event => ({
                    id: event.id || generateUniqueId(),
                    title: event.title.trim(),
                    subtitle: event.subtitle.trim(),
                    image: event.image || null,
                    link: event.link.trim(),
                    status: event.status,
                    timestamp: event.timestamp || Date.now(),
                    category: event.category || 'general',
                    permanent: event.permanent || false,
                    lastModified: Date.now()
                }));

                if (cleanEvents.length === 0) {
                    console.warn('لا توجد أحداث صالحة للحفظ، استخدام البيانات الافتراضية');
                    cleanEvents.push(...defaultSportsEvents.map(event => ({
                        ...event,
                        id: event.id || generateUniqueId(),
                        timestamp: event.timestamp || Date.now(),
                        category: event.category || 'general',
                        permanent: true,
                        lastModified: Date.now()
                    })));
                }

                // حفظ باستخدام set مع retry mechanism
                let retryCount = 0;
                const maxRetries = 3;

                while (retryCount < maxRetries) {
                    try {
                        await database.ref('sportsEvents').set(cleanEvents);
                        break;
                    } catch (setError) {
                        retryCount++;
                        if (retryCount >= maxRetries) throw setError;
                        console.log(`محاولة إعادة الحفظ ${retryCount}/${maxRetries}`);
                        await new Promise(resolve => setTimeout(resolve, 1000 * retryCount));
                    }
                }

                // تحديث المتغير المحلي والتخزين المحلي
                sportsEvents = cleanEvents;
                localStorage.setItem('Nova_sportsEvents', JSON.stringify(cleanEvents));

                // إضافة نسخة احتياطية إضافية
                localStorage.setItem('Nova_sportsEvents_backup', JSON.stringify({
                    data: cleanEvents,
                    timestamp: Date.now(),
                    version: '2.0'
                }));

                console.log(`تم حفظ ${cleanEvents.length} حدث رياضي في Firebase بنجاح`);

                // تحديث العرض
                updateSportsEventsDisplay();
                return true;

            } catch (error) {
                console.error('خطأ في حفظ الأحداث في Firebase:', error.message || error);
                console.log('التراجع للحفظ المحلي...');
                return saveSportsEventsToLocalStorage();
            }
        }

        // تحويل الصورة إلى Base64 بدلاً من Firebase Storage
        async function convertImageToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result);
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }

        // رفع الصور - تحويل إلى Base64 أو استخدام روابط خارجية
        async function uploadImageToFirebase(file, path) {
            try {
                // إذا كان Firebase Storage متاحاً، استخدمه
                if (firebaseAvailable && storage) {
                    const storageRef = storage.ref().child(path);
                    const uploadTask = await storageRef.put(file);
                    const downloadURL = await uploadTask.ref.getDownloadURL();
                    return downloadURL;
                }

                // البديل: تحويل الصورة إلى Base64
                console.log('استخدام Base64 بدلاً من Firebase Storage');
                const base64 = await convertImageToBase64(file);
                return base64;

            } catch (error) {
                console.error('خطأ في رفع الصورة:', error);
                // البديل الثاني: تحويل إلى Base64
                try {
                    const base64 = await convertImageToBase64(file);
                    return base64;
                } catch (base64Error) {
                    console.error('خطأ في تحويل الصورة:', base64Error);
                    throw new Error('فشل في معالجة الصورة');
                }
            }
        }

        // Fallback functions for localStorage
        function loadChannelDataFromLocalStorage() {
            try {
                const savedData = localStorage.getItem('Nova_channelData');
                if (savedData) {
                    const parsedData = JSON.parse(savedData);
                    if (parsedData && typeof parsedData === 'object') {
                        channelData = parsedData;

                        // حذف قنوات SSC إذا وجدت
                        if (channelData.ssc) {
                            console.log('تم حذف قنوات SSC من البيانات المحلية');
                            delete channelData.ssc;
                            saveChannelDataToLocalStorage();
                        }

                        for (const categoryId in channelData) {
                            const category = channelData[categoryId];
                            if (!category.title || !category.baseNumber || !Array.isArray(category.channels)) {
                                console.warn(`بيانات غير صحيحة للفئة ${categoryId}، استخدام البيانات الافتراضية`);
                                channelData = JSON.parse(JSON.stringify(defaultChannelData));
                                saveChannelDataToLocalStorage();
                                break;
                            }
                            category.channels = category.channels.map(channel => {
                                if (typeof channel === 'string') {
                                    return { name: channel, image: null };
                                }
                                return channel;
                            });
                        }
                    } else {
                        throw new Error('بيانات غير صحيحة');
                    }
                } else {
                    channelData = JSON.parse(JSON.stringify(defaultChannelData));
                    saveChannelDataToLocalStorage();
                }
            } catch (e) {
                console.warn('خطأ في تحميل بيانات القنوات، استخدام البيانات الافتراضية:', e);
                channelData = JSON.parse(JSON.stringify(defaultChannelData));
                saveChannelDataToLocalStorage();
            }
        }

        function loadSportsEventsFromLocalStorage() {
            try {
                // محاولة تحميل البيانات الأساسية أولاً
                const savedEvents = localStorage.getItem('Nova_sportsEvents');

                if (savedEvents) {
                    const parsedEvents = JSON.parse(savedEvents);
                    if (Array.isArray(parsedEvents) && parsedEvents.length > 0) {
                        // إضافة معرفات فريدة للأحداث التي لا تحتوي عليها
                        sportsEvents = parsedEvents.map(event => ({
                            ...event,
                            id: event.id || generateUniqueId(),
                            timestamp: event.timestamp || Date.now(),
                            permanent: event.permanent || false
                        }));

                        console.log(`تم تحميل ${sportsEvents.length} حدث من التخزين المحلي`);
                    } else {
                        throw new Error('بيانات غير صحيحة أو فارغة');
                    }
                } else {
                    // محاولة استعادة النسخة الاحتياطية
                    const backupData = localStorage.getItem('Nova_sportsEvents_backup');
                    if (backupData) {
                        const backup = JSON.parse(backupData);
                        if (backup.data && Array.isArray(backup.data)) {
                            console.log('استعادة البيانات من النسخة الاحتياطية');
                            sportsEvents = backup.data;
                            // إعادة حفظ البيانات المستعادة
                            localStorage.setItem('Nova_sportsEvents', JSON.stringify(sportsEvents));
                        } else {
                            throw new Error('نسخة احتياطية غير صالحة');
                        }
                    } else {
                        throw new Error('لا توجد بيانات محفوظة');
                    }
                }

                // تحديث العرض مباشرة بعد التحميل
                updateSportsEventsDisplay();

            } catch (e) {
                console.warn('خطأ في تحميل بيانات الأحداث، استخدام البيانات الافتراضية:', e);
                sportsEvents = [...defaultSportsEvents.map(event => ({
                    ...event,
                    id: event.id || generateUniqueId(),
                    timestamp: event.timestamp || Date.now(),
                    permanent: true
                }))];
                saveSportsEventsToLocalStorage();
                updateSportsEventsDisplay();
            }
        }

        function saveSportsEventsToLocalStorage() {
            try {
                // التأكد من وجود معرفات فريدة لجميع الأحداث
                const eventsWithIds = sportsEvents.map(event => ({
                    ...event,
                    id: event.id || generateUniqueId(),
                    timestamp: event.timestamp || Date.now(),
                    lastModified: Date.now()
                }));

                // حفظ البيانات الأساسية
                localStorage.setItem('Nova_sportsEvents', JSON.stringify(eventsWithIds));

                // حفظ نسخة احتياطية
                localStorage.setItem('Nova_sportsEvents_backup', JSON.stringify({
                    data: eventsWithIds,
                    timestamp: Date.now(),
                    version: '2.0'
                }));

                // تحديث البيانات في الذاكرة
                sportsEvents = eventsWithIds;

                console.log(`تم حفظ ${eventsWithIds.length} حدث محلياً مع النسخة الاحتياطية`);
                return true;

            } catch (e) {
                console.error('خطأ في حفظ بيانات الأحداث:', e);
                return false;
            }
        }

        function saveChannelDataToLocalStorage() {
            try {
                // حذف قنوات SSC إذا وجدت قبل الحفظ
                const dataToSave = { ...channelData };
                if (dataToSave.ssc) {
                    delete dataToSave.ssc;
                }

                localStorage.setItem('Nova_channelData', JSON.stringify(dataToSave));
                channelData = dataToSave; // تحديث البيانات في الذاكرة
                console.log('تم حفظ البيانات محلياً بنجاح');
                return true;
            } catch (e) {
                console.error('خطأ في حفظ بيانات القنوات:', e);
                return false;
            }
        }

        // Unified functions that use Firebase when available
        async function loadChannelData() {
            await loadChannelDataFromFirebase();
        }

        async function saveChannelData() {
            return await saveChannelDataToFirebase();
        }

        async function loadSportsEvents() {
            await loadSportsEventsFromFirebase();
        }

        async function saveSportsEvents() {
            return await saveSportsEventsToFirebase();
        }

        // وظيفة لإعادة الاتصال بـ Firebase في حالة انقطاع الاتصال
        async function reconnectToFirebase() {
            if (!firebaseAvailable) return false;

            try {
                console.log('محاولة إعادة الاتصال بـ Firebase...');
                const isConnected = await testFirebaseConnection();

                if (isConnected) {
                    enableChannelDataRealtimeSync();
                    enableEventsRealtimeSync();
                    console.log('تم إعادة الاتصال بـ Firebase بنجاح');
                    showNotification('تم إعادة الاتصال بقاعدة البيانات', 'success', 3000);
                    return true;
                }
                return false;
            } catch (error) {
                console.error('فشل في إعادة الاتصال:', error);
                return false;
            }
        }

        // مراقبة حالة الاتصال بالإنترنت
        function setupConnectionMonitoring() {
            window.addEventListener('online', async () => {
                console.log('تم استعادة الاتصال بالإنترنت');
                showNotification('تم استعادة الاتصال بالإنترنت', 'info', 2000);

                // محاولة إعادة الاتصال بـ Firebase
                setTimeout(async () => {
                    await reconnectToFirebase();
                }, 1000);
            });

            window.addEventListener('offline', () => {
                console.log('تم فقدان الاتصال بالإنترنت');
                showNotification('تم فقدان الاتصال - سيتم استخدام البيانات المحلية', 'error', 3000);
            });
        }

        // وظيفة للتحقق من صحة اتصال Firebase
        async function testFirebaseConnection() {
            if (!firebaseAvailable || !database) {
                return false;
            }

            try {
                console.log('اختبار الاتصال بـ Firebase...');
                await database.ref('.info/connected').once('value');
                console.log('تم الاتصال بـ Firebase بنجاح');
                return true;
            } catch (error) {
                console.error('فشل في الاتصال بـ Firebase:', error);
                return false;
            }
        }



        // Initialize Firebase and load data
        async function initializeApp() {
            try {
                console.log('بدء تهيئة التطبيق...');

                // Initialize Firebase first
                initializeFirebase();

                // اختبار الاتصال بـ Firebase أولاً
                if (firebaseAvailable) {
                    const isConnected = await testFirebaseConnection();
                    if (!isConnected) {
                        console.warn('لا يمكن الاتصال بـ Firebase، سيتم استخدام التخزين المحلي فقط');
                        firebaseAvailable = false;
                    } else {
                        // اختبار صلاحيات الكتابة
                        try {
                            const testRef = database.ref('permissions_test');
                            await testRef.set({ test: true });
                            await testRef.remove();
                            console.log('صلاحيات الكتابة متاحة');
                        } catch (permError) {
                            console.warn('لا توجد صلاحيات كتابة - وضع القراءة فقط');
                            showNotification('تم الاتصال بقاعدة البيانات - وضع القراءة فقط', 'info', 3000);
                        }
                    }
                }

                // Load data regardless of Firebase status
                await loadChannelData();
                await loadSportsEvents();

                // إعداد مراقبة الاتصال
                setupConnectionMonitoring();

                if (firebaseAvailable) {
                    console.log('تم تحميل البيانات بنجاح من Firebase');
                } else {
                    console.log('تم تحميل البيانات من التخزين المحلي');
                    showNotification('وضع التشغيل المحلي - قد لا تظهر التحديثات المباشرة', 'info', 3000);
                }
                return true;
            } catch (error) {
                console.error('خطأ في تهيئة التطبيق:', error);
                // Fallback to localStorage
                loadChannelDataFromLocalStorage();
                loadSportsEventsFromLocalStorage();
                showNotification('خطأ في الاتصال بقاعدة البيانات - استخدام البيانات المحلية', 'error', 4000);
                return false;
            }
        }





        // Initialize app properly
        async function startApp() {
            try {
                await initializeApp();
                // ضمان تحديث عرض الأحداث الرياضية
                updateSportsEventsDisplay();
                // تحديث عرض فئات القنوات
                updateChannelCategoriesDisplay();
                console.log('تم تهيئة التطبيق بنجاح');
            } catch (error) {
                console.error('خطأ في بدء التطبيق:', error);
                // Force fallback to localStorage
                loadChannelDataFromLocalStorage();
                loadSportsEventsFromLocalStorage();
                // تحديث العرض حتى مع استخدام localStorage
                updateSportsEventsDisplay();
                updateChannelCategoriesDisplay();
            }
        }

        // تنظيف المراقبة عند إغلاق الصفحة
        window.addEventListener('beforeunload', () => {
            disableRealtimeSync();
        });

        // تنظيف المراقبة عند فقدان التركيز لفترة طويلة
        let visibilityTimeout;
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                // إيقاف المراقبة بعد 5 دقائق من عدم النشاط
                visibilityTimeout = setTimeout(() => {
                    disableRealtimeSync();
                    console.log('تم إيقاف المراقبة في الوقت الفعلي بسبب عدم النشاط');
                }, 5 * 60 * 1000);
            } else {
                // إعادة تفعيل المراقبة عند العودة
                if (visibilityTimeout) {
                    clearTimeout(visibilityTimeout);
                }
                if (firebaseAvailable && database) {
                    enableChannelDataRealtimeSync();
                    enableEventsRealtimeSync();
                    console.log('تم إعادة تفعيل المراقبة في الوقت الفعلي');
                    if (isAdminMode()) {
                        showNotification('تم إعادة تفعيل المزامنة التلقائية', 'info', 2000);
                    }
                }
            }
        });

        // توليد رقم تلقائي للأحداث
        function generateEventNumber() {
            // العثور على أعلى رقم مستخدم
            let highestNumber = 499; // البداية من 500

            sportsEvents.forEach(event => {
                if (event.link && event.link.startsWith('go:')) {
                    const number = parseInt(event.link.replace('go:', ''));
                    if (!isNaN(number) && number > highestNumber) {
                        highestNumber = number;
                    }
                }
            });

            const newNumber = highestNumber + 1;
            const eventLinkInput = document.getElementById('newEventLink');
            if (eventLinkInput) {
                eventLinkInput.value = `go:${newNumber}`;
                showNotification(`تم توليد الرقم: go:${newNumber}`, 'success');
            }
        }

        // توليد رقم تلقائي للأحداث في التعديل
        function generateEditEventNumber() {
            let highestNumber = 499;

            sportsEvents.forEach(event => {
                if (event.link && event.link.startsWith('go:')) {
                    const number = parseInt(event.link.replace('go:', ''));
                    if (!isNaN(number) && number > highestNumber) {
                        highestNumber = number;
                    }
                }
            });

            const newNumber = highestNumber + 1;
            const eventLinkInput = document.getElementById('editEventLink');
            if (eventLinkInput) {
                eventLinkInput.value = `go:${newNumber}`;
                showNotification(`تم توليد الرقم: go:${newNumber}`, 'success');
            }
        }

        // تحميل نسخة احتياطية من الأحداث الرياضية فقط (للأدمن فقط)
        function downloadBackupData() {
            if (!isAdminMode()) {
                showNotification('هذه الميزة متاحة للمشرفين فقط', 'error');
                return;
            }

            try {
                const backupData = {
                    sportsEvents: sportsEvents,
                    timestamp: new Date().toISOString(),
                    version: '1.0'
                };

                const dataStr = JSON.stringify(backupData, null, 2);
                const dataBlob = new Blob([dataStr], {type: 'application/json'});

                const link = document.createElement('a');
                link.href = URL.createObjectURL(dataBlob);
                link.download = `nova-events-backup-${new Date().toISOString().slice(0,10)}.json`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);

                showNotification('تم تحميل النسخة الاحتياطية للأحداث الرياضية بنجاح', 'success');
            } catch (error) {
                console.error('خطأ في تحميل البيانات:', error);
                showNotification('فشل في تحميل النسخة الاحتياطية', 'error');
            }
        }

        // استيراد الأحداث الرياضية من ملف (للأدمن فقط)
        function importBackupData() {
            if (!isAdminMode()) {
                showNotification('هذه الميزة متاحة للمشرفين فقط', 'error');
                return;
            }

            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(event) {
                const file = event.target.files[0];
                if (!file) return;

                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const importedData = JSON.parse(e.target.result);

                        if (importedData.sportsEvents) {
                            const confirmImport = confirm('هل تريد استيراد الأحداث الرياضية؟ سيتم استبدال الأحداث الحالية.');

                            if (confirmImport) {
                                sportsEvents = importedData.sportsEvents;
                                localStorage.setItem('Nova_sportsEvents', JSON.stringify(sportsEvents));

                                if (firebaseAvailable && database) {
                                    saveSportsEventsToFirebase();
                                }

                                updateSportsEventsDisplay();
                                loadEventsList();
                                showNotification('تم استيراد الأحداث الرياضية بنجاح', 'success');
                            }
                        } else {
                            showNotification('ملف البيانات غير صحيح أو لا يحتوي على أحداث رياضية', 'error');
                        }
                    } catch (error) {
                        console.error('خطأ في استيراد البيانات:', error);
                        showNotification('فشل في قراءة ملف البيانات', 'error');
                    }
                };
                reader.readAsText(file);
            };
            input.click();
        }

        // التحقق من وضع الأدمن
        function isAdminMode() {
            return document.getElementById('adminSection') && !document.getElementById('adminSection').classList.contains('hidden');
        }

        // وظيفة الحفظ التلقائي للأحداث الرياضية فقط
        async function autoSaveAllChanges() {
            if (!isAdminMode()) {
                showNotification('هذه الميزة متاحة للمشرفين فقط', 'error');
                return;
            }

            // إظهار مؤشر الحفظ
            const button = event.target;
            const originalContent = button.innerHTML;
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> جاري الحفظ...';
            button.disabled = true;

            try {
                // حفظ الأحداث الرياضية فقط
                if (sportsEvents && sportsEvents.length > 0) {
                    console.log('حفظ الأحداث الرياضية...');

                    const success = await saveSportsEventsToFirebase();

                    if (success) {
                        showNotification('تم حفظ الأحداث الرياضية بنجاح في Firebase', 'success', 4000);
                        await logUserAction('auto_save', 'تم الحفظ التلقائي للأحداث الرياضية');
                        updateSportsEventsDisplay();
                    } else {
                        throw new Error('فشل في حفظ الأحداث الرياضية');
                    }
                } else {
                    showNotification('لا توجد أحداث رياضية للحفظ', 'info', 3000);
                }

            } catch (error) {
                console.error('خطأ في الحفظ التلقائي:', error);
                showNotification(`فشل في الحفظ التلقائي: ${error.message}`, 'error', 5000);

                // محاولة الحفظ المحلي كبديل
                try {
                    saveSportsEventsToLocalStorage();
                    showNotification('تم الحفظ محلياً كبديل للأحداث الرياضية', 'info', 3000);
                } catch (localError) {
                    console.error('فشل أيضاً في الحفظ المحلي:', localError);
                    showNotification('فشل في الحفظ بالكامل', 'error', 4000);
                }
            } finally {
                // إعادة تعيين حالة الزر
                button.innerHTML = originalContent;
                button.disabled = false;
            }
        }

        // إعادة تعيين الأحداث الرياضية للافتراضي
        async function resetToDefault() {
            if (!isAdminMode()) {
                showNotification('هذه الميزة متاحة للمشرفين فقط', 'error');
                return;
            }

            const confirmText = 'إعادة تعيين';
            const userInput = prompt(`تحذير: هذا سيحذف جميع الأحداث الرياضية المخصصة ويعيدها للإعدادات الافتراضية.\n\nلتأكيد العملية، اكتب: ${confirmText}`);

            if (userInput !== confirmText) {
                showNotification('تم إلغاء العملية', 'info');
                return;
            }

            showNotification('جاري إعادة تعيين الأحداث الرياضية...', 'info');

            try {
                // إعادة تعيين الأحداث الرياضية فقط
                sportsEvents = [...defaultSportsEvents];

                // حفظ البيانات الافتراضية
                if (firebaseAvailable && database) {
                    try {
                        await database.ref('sportsEvents').set(sportsEvents);
                        console.log('تم حفظ الأحداث الافتراضية في Firebase');
                    } catch (firebaseError) {
                        console.error('خطأ في حفظ Firebase:', firebaseError);
                    }
                }

                // حفظ محلي
                localStorage.setItem('Nova_sportsEvents', JSON.stringify(sportsEvents));

                // تحديث العروض
                loadEventsList();
                updateSportsEventsDisplay();

                showNotification('تم إعادة تعيين الأحداث الرياضية بنجاح', 'success');
                console.log('تم إعادة تعيين الأحداث الرياضية للافتراضي');

            } catch (error) {
                console.error('خطأ في إعادة التعيين:', error);
                showNotification('فشل في إعادة التعيين: ' + error.message, 'error');
            }
        }

        // تحديث عرض فئات القنوات الرئيسية
        function updateChannelCategoriesDisplay() {
            const categoriesGrid = document.getElementById('channelCategoriesGrid');
            if (!categoriesGrid) {
                console.warn('عنصر categoriesGrid غير موجود');
                return;
            }

            console.log('تحديث عرض فئات القنوات:', Object.keys(channelData).length, 'فئة');

            let html = '';
            for (const categoryId in channelData) {
                const category = channelData[categoryId];
                if (!category) continue;

                const categoryImage = category.image || 'https://c.top4top.io/p_3499bjfz31.jpg';
                const channelCount = category.channels ? category.channels.length : 0;

                html += `
                    <div class="channel-category-card" onclick="showChannelSubPage('${categoryId}')">
                        <div style="width: 100%; height: 100px; border-radius: 10px; margin-bottom: 1rem; position: relative; overflow: hidden; background: url('${categoryImage}') center/cover;">
                            <div style="position: absolute; bottom: 10px; left: 10px; z-index: 2; color: white;">
                            </div>
                        </div>
                        <div class="channel-category-name">${category.title}</div>
                        <div class="channel-category-desc">الرقم الأساسي: ${category.baseNumber}</div>
                        <div class="channel-category-badge">
                            <i class="fas fa-video" style="font-size: 1.1rem;"></i>
                            <span>${channelCount} قناة</span>
                        </div>
                    </div>
                `;
            }

            categoriesGrid.innerHTML = html;
            console.log('تم تحديث عرض الفئات بنجاح');

            // إضافة تحديث للبحث إذا كان نشطاً
            const searchInput = document.getElementById('mainChannelSearchInput');
            if (searchInput && searchInput.value.trim()) {
                filterMainChannels();
            }
        }

        // وظائف رفع الصور المحسنة
        async function handleChannelImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            if (!file.type.startsWith('image/')) {
                showNotification('يرجى اختيار ملف صورة صالح', 'error');
                return;
            }

            if (file.size > 5 * 1024 * 1024) {
                showNotification('حجم الصورة كبير جداً. الحد الأقصى 5 ميجابايت', 'error');
                return;
            }

            try {
                showNotification('جاري رفع الصورة...', 'info');
                const fileName = `channels/${Date.now()}_${file.name}`;
                const imageUrl = await uploadImageToFirebase(file, fileName);

                const imageInput = document.getElementById('newChannelImage');
                if (imageInput) {
                    imageInput.value = imageUrl;
                    updateImagePreview('newChannelImage', 'newChannelImagePreview', 'newChannelImagePreviewImg');
                }
                showNotification('تم رفع الصورة بنجاح', 'success');
            } catch (error) {
                console.error('خطأ في رفع الصورة:', error);
                showNotification('فشل في رفع الصورة', 'error');
            }
        }

        async function handleEventImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            if (!file.type.startsWith('image/')) {
                showNotification('يرجى اختيار ملف صورة صالح', 'error');
                return;
            }

            if (file.size > 5 * 1024 * 1024) {
                showNotification('حجم الصورة كبير جداً. الحد الأقصى 5 ميجابايت', 'error');
                return;
            }

            try {
                showNotification('جاري رفع الصورة...', 'info');
                const fileName = `events/${Date.now()}_${file.name}`;
                const imageUrl = await uploadImageToFirebase(file, fileName);

                const imageInput = document.getElementById('newEventImage');
                if (imageInput) {
                    imageInput.value = imageUrl;
                    updateImagePreview('newEventImage', 'newEventImagePreview', 'newEventImagePreviewImg');
                }
                showNotification('تم رفع الصورة بنجاح', 'success');
            } catch (error) {
                console.error('خطأ في رفع الصورة:', error);
                showNotification('فشل في رفع الصورة', 'error');
            }
        }

        function updateImagePreview(inputId, previewId, imgId) {
            const input = document.getElementById(inputId);
            const preview = document.getElementById(previewId);
            const img = document.getElementById(imgId);

            if (input && preview && img) {
                const imageUrl = input.value.trim();

                if (imageUrl) {
                    img.src = imageUrl;
                    preview.style.display = 'block';

                    // إضافة معالج للأخطاء
                    img.onerror = function() {
                        preview.style.display = 'none';
                        showNotification('فشل في تحميل معاينة الصورة', 'error');
                    };

                    img.onload = function() {
                        preview.style.display = 'block';
                    };
                } else {
                    preview.style.display = 'none';
                }
            }
        }

        // إضافة وظيفة معاينة صورة القناة الجديدة
        function updateChannelImagePreview() {
            updateImagePreview('newChannelImage', 'newChannelImagePreview', 'newChannelImagePreviewImg');
        }

        // ===== وظائف لوحة التحكم المحسنة =====

        // تحميل بيانات لوحة التحكم
        async function loadAdminData() {
            try {
                loadEventsList();
                showNotification('تم تحميل بيانات لوحة التحكم', 'success');
            } catch (error) {
                console.error('خطأ في تحميل بيانات لوحة التحكم:', error);
                showNotification('خطأ في تحميل بيانات لوحة التحكم', 'error');
            }
        }

        // تبديل التبويبات في لوحة التحكم
        function switchAdminTab(tabName) {
            // إخفاء جميع التبويبات
            document.querySelectorAll('.admin-tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });

            // إزالة الحالة النشطة من جميع الأزرار
            document.querySelectorAll('.admin-tab').forEach(btn => {
                btn.classList.remove('active');
            });

            // إظهار التبويب المحدد
            const targetTab = document.getElementById(`admin${tabName.charAt(0).toUpperCase() + tabName.slice(1)}Tab`);
            if (targetTab) {
                targetTab.classList.remove('hidden');
            }

            // تفعيل الزر المحدد
            const activeBtn = document.querySelector(`[data-tab="${tabName}"]`);
            if (activeBtn) {
                activeBtn.classList.add('active');
            }

            // تحميل البيانات حسب التبويب
            switch(tabName) {
                case 'events':
                    loadEventsList();
                    break;
            }
        }

        // تحميل قائمة الأحداث
        function loadEventsList() {
            const eventsList = document.getElementById('eventsList');
            if (!eventsList) return;

            let html = '';
            sportsEvents.forEach((event, index) => {
                const statusText = {
                    'upcoming': 'قادم',
                    'live': 'مباشر',
                    'finished': 'انتهى'
                };

                html += `
                    <div class="category-item">
                        <div class="item-info">
                            <div class="item-title">${event.title}</div>
                            <div class="item-subtitle">${event.subtitle} | الحالة: ${statusText[event.status]} | الرابط: ${event.link}</div>
                        </div>
                        <div class="item-actions">
                            <button class="action-btn" onclick="editEvent(${index})" title="تعديل الحدث">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn delete" onclick="deleteEvent(${index})" title="حذف الحدث">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
            });

            eventsList.innerHTML = html || '<p style="text-align: center; color: var(--text-secondary);">لا توجد أحداث رياضية</p>';
        }

        // وظيفة توليد معرف فريد
        function generateUniqueId() {
            return Date.now().toString(36) + Math.random().toString(36).substring(2);
        }

        // إضافة حدث رياضي جديد مع تحسينات
        async function addNewEvent() {
            const title = document.getElementById('newEventTitle')?.value.trim();
            const subtitle = document.getElementById('newEventSubtitle')?.value.trim();
            const image = document.getElementById('newEventImage')?.value.trim();
            const link = document.getElementById('newEventLink')?.value.trim();
            const status = document.getElementById('newEventStatus')?.value;

            // التحقق من صحة البيانات
            if (!title || !subtitle || !link || !status) {
                showNotification('يرجى ملء جميع الحقول المطلوبة', 'error');
                return;
            }

            // التحقق من صحة الرابط
            if (!link.startsWith('go:') && !link.startsWith('http')) {
                showNotification('الرابط يجب أن يبدأ بـ go: أو http', 'error');
                return;
            }

            // التحقق من عدم تكرار الحدث
            const eventExists = sportsEvents.some(event => 
                event.title === title && event.subtitle === subtitle
            );

            if (eventExists) {
                showNotification('حدث بنفس العنوان والوصف موجود بالفعل', 'error');
                return;
            }

            showNotification('جاري إضافة الحدث...', 'info');

            try {
                const newEvent = {
                    id: generateUniqueId(),
                    title: title,
                    subtitle: subtitle,
                    image: image || null,
                    link: link,
                    status: status,
                    timestamp: Date.now(),
                    category: 'general',
                    permanent: false,
                    lastModified: Date.now()
                };

                console.log('محاولة إضافة حدث رياضي جديد:', newEvent);

                // إضافة الحدث للمصفوفة
                sportsEvents.push(newEvent);

                // حفظ البيانات مع معالجة محسنة للأخطاء
                const saved = await saveSportsEvents();

                if (saved) {
                    // تنظيف النموذج
                    clearAddEventForm();

                    // تحديث العروض
                    loadEventsList();
                    updateSportsEventsDisplay();

                    console.log('تم إضافة الحدث بنجاح:', title);
                    showNotification('تم إضافة الحدث بنجاح وحفظه بشكل آمن', 'success');
                } else {
                    // إزالة الحدث إذا فشل الحفظ
                    sportsEvents.pop();
                    showNotification('فشل في حفظ الحدث - يرجى المحاولة مرة أخرى', 'error');
                }

            } catch (error) {
                console.error('خطأ في إضافة الحدث:', error);
                // إزالة الحدث إذا حدث خطأ
                if (sportsEvents.length > 0 && sportsEvents[sportsEvents.length - 1].title === title) {
                    sportsEvents.pop();
                }
                showNotification('فشل في إضافة الحدث: ' + error.message, 'error');
            }
        }

        // تنظيف نموذج إضافة الحدث
        function clearAddEventForm() {
            const fields = ['newEventTitle', 'newEventSubtitle', 'newEventImage', 'newEventLink'];
            fields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) field.value = '';
            });

            const statusField = document.getElementById('newEventStatus');
            if (statusField) statusField.value = 'upcoming';

            const preview = document.getElementById('newEventImagePreview');
            if (preview) preview.style.display = 'none';
        }

        // تعديل حدث رياضي
        function editEvent(eventIndex) {
            const event = sportsEvents[eventIndex];
            if (!event) {
                showNotification('الحدث غير موجود', 'error');
                return;
            }

            // ملء نموذج التعديل
            document.getElementById('editEventIndex').value = eventIndex;
            document.getElementById('editEventTitle').value = event.title;
            document.getElementById('editEventSubtitle').value = event.subtitle;
            document.getElementById('editEventImage').value = event.image || '';
            document.getElementById('editEventLink').value = event.link;
            document.getElementById('editEventStatus').value = event.status;

            // إظهار معاينة الصورة إذا وجدت
            if (event.image) {
                const preview = document.getElementById('editEventImagePreview');
                const img = document.getElementById('editEventImagePreviewImg');
                if (preview && img) {
                    img.src = event.image;
                    preview.style.display = 'block';
                }
            }

            // إظهار النموذج
            document.getElementById('editEventModal').style.display = 'flex';
        }

        // إغلاق نموذج تعديل الحدث
        function closeEditEventModal() {
            document.getElementById('editEventModal').style.display = 'none';
        }

        // حفظ تغييرات الحدث
        async function saveEventChanges() {
            const eventIndex = parseInt(document.getElementById('editEventIndex')?.value);
            const title = document.getElementById('editEventTitle')?.value.trim();
            const subtitle = document.getElementById('editEventSubtitle')?.value.trim();
            const image = document.getElementById('editEventImage')?.value.trim();
            const link = document.getElementById('editEventLink')?.value.trim();
            const status = document.getElementById('editEventStatus')?.value;

            if (isNaN(eventIndex) || !title || !subtitle || !link || !status) {
                showNotification('بيانات غير صحيحة', 'error');
                return;
            }

            try {
                if (!sportsEvents[eventIndex]) {
                    showNotification('الحدث غير موجود', 'error');
                    return;
                }

                // احفظ البيانات القديمة للتراجع في حالة الخطأ
                const oldEventData = { ...sportsEvents[eventIndex] };

                // تحديث الحدث مع الاحتفاظ بالمعلومات الأساسية
                sportsEvents[eventIndex] = {
                    ...sportsEvents[eventIndex], // الاحتفاظ بالـ ID والبيانات الأساسية
                    title: title,
                    subtitle: subtitle,
                    image: image || null,
                    link: link,
                    status: status,
                    lastModified: Date.now()
                };

                const saved = await saveSportsEvents();

                if (saved) {
                    closeEditEventModal();
                    loadEventsList();
                    updateSportsEventsDisplay();
                    showNotification('تم تحديث الحدث بنجاح', 'success');
                } else {
                    // استعادة البيانات القديمة في حالة فشل الحفظ
                    sportsEvents[eventIndex] = oldEventData;
                    showNotification('فشل في حفظ التغييرات', 'error');
                }

            } catch (error) {
                console.error('خطأ في تحديث الحدث:', error);
                showNotification('فشل في تحديث الحدث: ' + error.message, 'error');
            }
        }

        // حذف حدث رياضي
        async function deleteEvent(eventIndex) {
            const event = sportsEvents[eventIndex];
            if (!event) {
                showNotification('الحدث غير موجود', 'error');
                return;
            }

            // منع حذف الأحداث الدائمة
            if (event.permanent) {
                showNotification('لا يمكن حذف الأحداث الافتراضية', 'error');
                return;
            }

            if (!confirm(`هل أنت متأكد من حذف الحدث "${event.title}"؟`)) {
                return;
            }

            try {
                // احفظ الحدث المحذوف للتراجع
                const deletedEvent = { ...event };
                const deletedIndex = eventIndex;

                // حذف الحدث
                sportsEvents.splice(eventIndex, 1);

                const saved = await saveSportsEvents();

                if (saved) {
                    loadEventsList();
                    updateSportsEventsDisplay();
                    showNotification('تم حذف الحدث بنجاح', 'success');
                } else {
                    // استعادة الحدث المحذوف في حالة فشل الحفظ
                    sportsEvents.splice(deletedIndex, 0, deletedEvent);
                    showNotification('فشل في حذف الحدث', 'error');
                }

            } catch (error) {
                console.error('خطأ في حذف الحدث:', error);
                showNotification('فشل في حذف الحدث: ' + error.message, 'error');
            }
        }

        // توليد رقم تلقائي للأحداث
        function generateEventNumber() {
            const input = document.getElementById('newEventLink');
            if (input) {
                const randomNumber = 600 + Math.floor(Math.random() * 400); // أرقام من 600-999
                input.value = `go:${randomNumber}`;
            }
        }

        function generateEditEventNumber() {
            const input = document.getElementById('editEventLink');
            if (input) {
                const randomNumber = 600 + Math.floor(Math.random() * 400); // أرقام من 600-999
                input.value = `go:${randomNumber}`;
            }
        }

        // ===== TV REMOTE CONTROL SYSTEM =====
        // نظام التحكم بالريموت للشاشات الكبيرة

        class TVRemoteController {
            constructor() {
                this.focusableElements = [];
                this.currentFocusIndex = -1;
                this.isRemoteMode = false;
                this.lastInputTime = Date.now();
                this.remoteDetectionDelay = 2000; // ثانيتان لاكتشاف استخدام الريموت
                this.isUpdating = false; // منع التحديثات المتداخلة
                this.lastUpdateTime = 0; // تتبع آخر تحديث
                this.updateThrottle = 500; // حد أدنى للوقت بين التحديثات (500ms)

                this.init();
            }

            init() {
                // إضافة مستمعات الأحداث
                document.addEventListener('keydown', this.handleKeyDown.bind(this));
                document.addEventListener('click', this.handleClick.bind(this));
                document.addEventListener('touchstart', this.handleTouch.bind(this));
                document.addEventListener('mousemove', this.handleMouseMove.bind(this));

                // تحديث العناصر القابلة للتركيز عند تغيير المحتوى بشكل محدود
                this.setupMutationObserver();

                // تحديث أولي للعناصر مع تأخير أطول
                setTimeout(() => {
                    this.updateFocusableElements();
                    this.setInitialFocus();
                }, 1500);
            }

            setupMutationObserver() {
                const observer = new MutationObserver((mutations) => {
                    // تجاهل التغييرات الطفيفة
                    const significantChange = mutations.some(mutation => 
                        mutation.type === 'childList' && 
                        (mutation.addedNodes.length > 0 || mutation.removedNodes.length > 0) ||
                        (mutation.type === 'attributes' && 
                         ['class', 'style'].includes(mutation.attributeName) &&
                         mutation.target.classList.contains('section'))
                    );

                    if (!significantChange) return;

                    clearTimeout(this.updateTimeout);
                    this.updateTimeout = setTimeout(() => {
                        if (!this.isUpdating) {
                            this.throttledUpdate();
                        }
                    }, 300); // تأخير أطول
                });

                observer.observe(document.body, {
                    childList: true,
                    subtree: true,
                    attributes: true,
                    attributeFilter: ['class', 'style']
                });
            }

            // تحديث محدود بالوقت
            throttledUpdate() {
                const now = Date.now();
                if (now - this.lastUpdateTime < this.updateThrottle) {
                    return; // تجاهل إذا كان التحديث حديثاً جداً
                }

                this.lastUpdateTime = now;
                this.updateFocusableElements();
            }

            updateFocusableElements() {
                if (this.isUpdating) return; // منع التداخل
                this.isUpdating = true;

                try {
                    // العناصر القابلة للتركيز
                    const selectors = [
                        'button:not([disabled]):not(.hidden)',
                        'a[href]:not(.hidden)',
                        '.card:not(.hidden)',
                        '.channel-item:not(.hidden)',
                        '.channel-category-card:not(.hidden)',
                        '.dazn-card:not(.hidden)',
                        '.league-card:not(.hidden)',
                        '.nav-btn:not(.hidden)',
                        '.sidebar-menu a:not(.hidden)',
                        '.settings-item:not(.hidden)',
                        '.color-option:not(.hidden)',
                        '.switch:not(.hidden)',
                        '.search-result-item:not(.hidden)',
                        '.quick-action-btn:not(.hidden)',
                        '.competition-card:not(.hidden)',
                        '.competition-card-enhanced:not(.hidden)',
                        '.football-event-card:not(.hidden)',
                        '.live-match-card:not(.hidden)',
                        '.welcome-channels-btn:not(.hidden)',
                        'input:not([disabled]):not(.hidden)',
                        'select:not([disabled]):not(.hidden)',
                        '.user-profile-simple:not(.hidden)',
                        '.premium-btn:not(.hidden)'
                    ];

                    const newElements = [];

                    selectors.forEach(selector => {
                        try {
                            const elements = document.querySelectorAll(selector);
                            elements.forEach(element => {
                                try {
                                    const computedStyle = window.getComputedStyle(element);
                                    const isVisible = computedStyle.display !== 'none' && 
                                                    computedStyle.visibility !== 'hidden' && 
                                                    computedStyle.opacity !== '0' &&
                                                    element.offsetParent !== null;

                                    if (isVisible && this.isElementInViewport(element)) {
                                        newElements.push(element);
                                        this.makeFocusable(element);
                                    }
                                } catch (e) {
                                    // تجاهل العنصر في حالة حدوث خطأ
                                }
                            });
                        } catch (e) {
                            // تجاهل المحدد في حالة حدوث خطأ
                        }
                    });

                    // تحديث العناصر فقط إذا كان هناك تغيير كبير
                    if (Math.abs(newElements.length - this.focusableElements.length) > 1) {
                        this.focusableElements = newElements;

                        // ترتيب العناصر حسب الموقع
                        this.focusableElements.sort((a, b) => {
                            try {
                                const rectA = a.getBoundingClientRect();
                                const rectB = b.getBoundingClientRect();

                                if (Math.abs(rectA.top - rectB.top) > 50) {
                                    return rectA.top - rectB.top; // ترتيب عمودي
                                }
                                return rectA.left - rectB.left; // ترتيب أفقي
                            } catch (e) {
                                return 0;
                            }
                        });

                        // طباعة الرسالة فقط عند التغيير الكبير
                        console.log(`تم تحديث العناصر: ${this.focusableElements.length} عنصر قابل للتركيز`);
                    }

                } catch (error) {
                    console.warn('خطأ في تحديث العناصر القابلة للتركيز:', error);
                } finally {
                    this.isUpdating = false;
                }
            }

            isElementInViewport(element) {
                const rect = element.getBoundingClientRect();
                return (
                    rect.top >= 0 &&
                    rect.left >= 0 &&
                    rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) + 200 &&
                    rect.right <= (window.innerWidth || document.documentElement.clientWidth)
                );
            }

            makeFocusable(element) {
                if (!element.hasAttribute('tabindex') && element.tagName !== 'INPUT' && element.tagName !== 'SELECT') {
                    element.setAttribute('tabindex', '0');
                }
                element.classList.add('focusable');
            }

            setInitialFocus() {
                if (this.focusableElements.length > 0 && this.currentFocusIndex === -1) {
                    this.currentFocusIndex = 0;
                    if (this.isRemoteMode) {
                        this.focusElement(this.focusableElements[0]);
                    }
                }
            }

            handleKeyDown(event) {
                // اكتشاف استخدام الريموت
                const remoteKeys = ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'Enter', 'Space'];
                if (remoteKeys.includes(event.key)) {
                    this.enableRemoteMode();
                }

                if (!this.isRemoteMode) return;

                // تحديث العناصر إذا لزم الأمر
                if (this.focusableElements.length === 0) {
                    this.updateFocusableElements();
                }

                switch (event.key) {
                    case 'ArrowDown':
                        event.preventDefault();
                        this.moveVertically(1);
                        break;
                    case 'ArrowUp':
                        event.preventDefault();
                        this.moveVertically(-1);
                        break;
                    case 'ArrowRight':
                        event.preventDefault();
                        this.moveHorizontally(1);
                        break;
                    case 'ArrowLeft':
                        event.preventDefault();
                        this.moveHorizontally(-1);
                        break;
                    case 'Enter':
                    case ' ':
                        event.preventDefault();
                        this.activateCurrentElement();
                        break;
                    case 'Escape':
                        event.preventDefault();
                        this.handleEscape();
                        break;
                }
            }

            moveVertically(direction) {
                if (this.focusableElements.length === 0) return;

                const currentElement = this.focusableElements[this.currentFocusIndex];
                if (!currentElement) {
                    this.currentFocusIndex = 0;
                    this.focusElement(this.focusableElements[0]);
                    return;
                }

                const currentRect = currentElement.getBoundingClientRect();
                let bestMatch = null;
                let bestDistance = Infinity;

                this.focusableElements.forEach((element, index) => {
                    if (index === this.currentFocusIndex) return;

                    const rect = element.getBoundingClientRect();
                    const verticalDistance = (rect.top - currentRect.top) * direction;
                    const horizontalDistance = Math.abs(rect.left - currentRect.left);

                    if (verticalDistance > 20) { // التحرك في الاتجاه الصحيح
                        const totalDistance = verticalDistance + (horizontalDistance * 0.3);
                        if (totalDistance < bestDistance) {
                            bestDistance = totalDistance;
                            bestMatch = index;
                        }
                    }
                });

                if (bestMatch !== null) {
                    this.currentFocusIndex = bestMatch;
                } else {
                    // الانتقال للطرف الآخر
                    this.currentFocusIndex = direction > 0 ? 0 : this.focusableElements.length - 1;
                }

                this.focusElement(this.focusableElements[this.currentFocusIndex]);
            }

            moveHorizontally(direction) {
                if (this.focusableElements.length === 0) return;

                const currentElement = this.focusableElements[this.currentFocusIndex];
                if (!currentElement) {
                    this.currentFocusIndex = 0;
                    this.focusElement(this.focusableElements[0]);
                    return;
                }

                const currentRect = currentElement.getBoundingClientRect();
                let bestMatch = null;
                let bestDistance = Infinity;

                this.focusableElements.forEach((element, index) => {
                    if (index === this.currentFocusIndex) return;

                    const rect = element.getBoundingClientRect();
                    const horizontalDistance = (rect.left - currentRect.left) * direction;
                    const verticalDistance = Math.abs(rect.top - currentRect.top);

                    if (horizontalDistance > 10) { // التحرك في الاتجاه الصحيح
                        const totalDistance = horizontalDistance + (verticalDistance * 0.5);
                        if (totalDistance < bestDistance) {
                            bestDistance = totalDistance;
                            bestMatch = index;
                        }
                    }
                });

                if (bestMatch !== null) {
                    this.currentFocusIndex = bestMatch;
                } else {
                    // البحث في نفس الصف
                    this.moveInSameRow(direction, currentRect);
                }

                this.focusElement(this.focusableElements[this.currentFocusIndex]);
            }

            moveInSameRow(direction, currentRect) {
                const sameRowElements = this.focusableElements.filter((element, index) => {
                    if (index === this.currentFocusIndex) return false;
                    const rect = element.getBoundingClientRect();
                    return Math.abs(rect.top - currentRect.top) < 50;
                });

                if (sameRowElements.length > 0) {
                    const sortedElements = sameRowElements.sort((a, b) => a.getBoundingClientRect().left - b.getBoundingClientRect().left);
                    const targetElement = direction > 0 ? sortedElements[0] : sortedElements[sortedElements.length - 1];
                    this.currentFocusIndex = this.focusableElements.indexOf(targetElement);
                }
            }

            focusElement(element) {
                if (!element) return;

                // إزالة التركيز من جميع العناصر
                this.focusableElements.forEach(el => {
                    el.classList.remove('tv-focused');
                    el.blur();
                });

                // إضافة التركيز للعنصر الحالي
                element.classList.add('tv-focused');
                element.focus();

                // التمرير للعنصر إذا كان خارج الشاشة
                this.scrollToElement(element);

                console.log('تركيز على:', element.className, element.textContent?.substring(0, 30));
            }

            scrollToElement(element) {
                const rect = element.getBoundingClientRect();
                const isInView = (
                    rect.top >= 0 &&
                    rect.left >= 0 &&
                    rect.bottom <= window.innerHeight &&
                    rect.right <= window.innerWidth
                );

                if (!isInView) {
                    element.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center',
                        inline: 'center'
                    });
                }
            }

            activateCurrentElement() {
                const currentElement = this.focusableElements[this.currentFocusIndex];
                if (!currentElement) return;

                // محاكاة النقر
                const event = new MouseEvent('click', {
                    bubbles: true,
                    cancelable: true,
                    view: window
                });

                currentElement.dispatchEvent(event);
                console.log('تم تنشيط العنصر:', currentElement.className);

                // تحديث العناصر بعد التفاعل
                setTimeout(() => {
                    this.updateFocusableElements();
                }, 500);
            }

            handleEscape() {
                // التعامل مع زر الهروب - إغلاق النوافذ المنبثقة أو العودة
                const modals = document.querySelectorAll('[style*="display: flex"], [style*="display: block"]:not(.main-app)');
                const visibleModal = Array.from(modals).find(modal => {
                    const style = window.getComputedStyle(modal);
                    return style.display !== 'none' && modal.classList.contains('overlay', 'modal');
                });

                if (visibleModal) {
                    const closeBtn = visibleModal.querySelector('.close-btn, .profile-close, [onclick*="close"]');
                    if (closeBtn) {
                        closeBtn.click();
                    }
                } else {
                    // العودة للقسم الرئيسي
                    showSection('live');
                }
            }

            enableRemoteMode() {
                if (!this.isRemoteMode) {
                    this.isRemoteMode = true;
                    document.body.classList.add('remote-mode');
                    console.log('تم تفعيل وضع التحكم بالريموت');

                    this.updateFocusableElements();
                    this.setInitialFocus();
                }
                this.lastInputTime = Date.now();
            }

            handleClick(event) {
                // إيقاف وضع الريموت عند النقر بالماوس
                this.lastInputTime = Date.now();
                setTimeout(() => {
                    if (Date.now() - this.lastInputTime > this.remoteDetectionDelay) {
                        this.disableRemoteMode();
                    }
                }, this.remoteDetectionDelay);
            }

            handleTouch() {
                // إيقاف وضع الريموت عند اللمس
                this.disableRemoteMode();
            }

            handleMouseMove() {
                // إيقاف وضع الريموت عند حركة الماوس
                this.lastInputTime = Date.now();
                setTimeout(() => {
                    if (Date.now() - this.lastInputTime > this.remoteDetectionDelay) {
                        this.disableRemoteMode();
                    }
                }, this.remoteDetectionDelay);
            }

            disableRemoteMode() {
                if (this.isRemoteMode) {
                    this.isRemoteMode = false;
                    document.body.classList.remove('remote-mode');

                    // إزالة التركيز من جميع العناصر
                    this.focusableElements.forEach(el => {
                        el.classList.remove('tv-focused');
                        el.blur();
                    });

                    console.log('تم إيقاف وضع التحكم بالريموت');
                }
            }

            // إعادة تحديث العناصر عند تغيير القسم مع منع التذبذب
            onSectionChange() {
                // إيقاف التحديثات المؤقتة
                clearTimeout(this.updateTimeout);
                
                // تأخير أطول للسماح للقسم الجديد بالتحميل الكامل
                setTimeout(() => {
                    if (!this.isUpdating) {
                        this.updateFocusableElements();
                        this.setInitialFocus();
                    }
                }, 800); // تأخير أطول
            }
        }

        // إنشاء نسخة من التحكم بالريموت
        const tvRemote = new TVRemoteController();

        // ربط التحكم بالريموت مع تغيير الأقسام
        const originalShowSection = window.showSection;
        window.showSection = function(section) {
            originalShowSection(section);
            tvRemote.onSectionChange();
        };

        // Start the app
        startApp();

        // ===== ENHANCED LEAGUES SECTION =====
        const API_KEY = "f4222a8f6ae6339f59be3c7269f49324a2f9b4eeb0763e208aa8f2139fd0b68c";

        const LEAGUES = {
            premier: { id: 152, name: "الدوري الإنجليزي الممتاز", flag: "", logo: "https://h.top4top.io/p_34975mkyl1.jpg" },
            laliga: { id: 302, name: "الدوري الإسباني", flag: "", logo: "https://j.top4top.io/p_3497ngtro1.jpg" },
            bundesliga: { id: 175, name: "الدوري الألماني", flag: "", logo: "https://k.top4top.io/p_3497agxyp1.jpg" },
            ligue1: { id: 168, name: "الدوري الفرنسي", flag: "", logo: "https://i.top4top.io/p_3497u5dp71.jpg" },
            seriea: { id: 207, name: "الدوري الإيطالي", flag: "", logo: "https://l.top4top.io/p_3497wdn4s1.jpg" }
        };

        const teamNamesArabic = {
            "Arsenal": "أرسنال", "Manchester City": "مانشستر سيتي", "Liverpool": "ليفربول",
            "Chelsea": "تشيلسي", "Tottenham": "توتنهام", "Manchester Utd": "مانشستر يونايتد",
            "Newcastle": "نيوكاسل", "Brighton": "برايتون", "Aston Villa": "أستون فيلا",
            "West Ham": "وست هام", "Fulham": "فولهام", "Crystal Palace": "كريستال بالاس",
            "Real Madrid": "ريال مدريد", "Barcelona": "برشلونة", "Atl. Madrid": "أتلتيكو مدريد",
            "Athletic Bilbao": "أتلتيك بيلباو", "Real Sociedad": "ريال سوسيداد", "Villarreal": "فياريال",
            "Valencia": "فالنسيا", "Sevilla": "إشبيلية", "Real Betis": "ريال بيتيس",
            "Bayern Munich": "بايرن ميونخ", "Borussia Dortmund": "بوروسيا دورتموند", "RB Leipzig": "لايبزيغ",
            "Bayer Leverkusen": "باير ليفركوزن", "Eintracht Frankfurt": "أينتراخت فرانكفورت",
            "Juventus": "يوفنتوس", "Inter": "إنتر ميلان", "AC Milan": "ميلان", "Napoli": "نابولي",
            "Roma": "روما", "Lazio": "لاتسيو", "Atalanta": "أتالانتا", "Fiorentina": "فيورنتينا",
            "PSG": "باريس سان جيرمان", "Marseille": "مارسيليا", "Monaco": "موناكو", "Lyon": "ليون",
            "Lille": "ليل", "Nice": "نيس", "Rennes": "رين", "Strasbourg": "ستراسبورغ"
        };

        let currentSelectedLeague = null;

        function selectLeague(leagueId) {
            // Update visual selection
            document.querySelectorAll('.league-card').forEach(card => {
                card.classList.remove('selected');
            });

            const selectedCard = document.querySelector(`[data-league="${leagueId}"]`);
            if (selectedCard) {
                selectedCard.classList.add('selected');
            }

            // Store current selection
            currentSelectedLeague = leagueId;

            // Load league data
            loadSelectedLeague(leagueId);
        }

        async function loadSelectedLeague(selectedLeague) {
            // Hide league selector and show back button
            const leagueSelector = document.querySelector('.advanced-league-selector');
            const statsLoading = document.getElementById('statsLoading');
            const statsError = document.getElementById('statsError');
            const statsContent = document.getElementById('statsContent');

            if (!selectedLeague) {
                if (leagueSelector) leagueSelector.style.display = 'block';
                if (statsContent) statsContent.style.display = 'none';
                if (statsError) statsError.style.display = 'none';
                return;
            }

            // Hide selector
            if (leagueSelector) leagueSelector.style.display = 'none';
            if (statsError) statsError.style.display = 'none';
            if (statsContent) statsContent.style.display = 'none';
            if (statsLoading) statsLoading.style.display = 'block';

            try {
                const leagueInfo = LEAGUES[selectedLeague];
                if (!leagueInfo) {
                    throw new Error('معلومات الدوري غير متوفرة');
                }

                const response = await fetch(`https://apiv3.apifootball.com/?action=get_standings&league_id=${leagueInfo.id}&APIkey=${API_KEY}`);

                if (!response.ok) throw new Error('خطأ في الشبكة');

                const data = await response.json();
                if (!Array.isArray(data) || data.length === 0) throw new Error('لا توجد بيانات');

                // Create new structure with header box and team containers
                const statsContentDiv = document.getElementById('statsContent');
                if (!statsContentDiv) throw new Error('عنصر المحتوى غير موجود');

                // Sort teams by position
                data.sort((a, b) => parseInt(a.overall_league_position) - parseInt(b.overall_league_position));

                // Create back button and header
                let teamsHtml = `
                    <div style="margin-bottom: 20px;">
                        <button onclick="backToLeagueSelector()" style="
                            background: rgba(255, 255, 255, 0.1);
                            border: 1px solid var(--border-primary);
                            border-radius: 12px;
                            color: var(--text-primary);
                            padding: 0.75rem 1.5rem;
                            font-size: 1rem;
                            font-weight: 600;
                            cursor: pointer;
                            transition: all 0.3s ease;
                            display: flex;
                            align-items: center;
                            gap: 0.75rem;
                            margin-bottom: 15px;
                        " onmouseover="this.style.background='rgba(255, 255, 255, 0.15)'; this.style.borderColor='var(--accent-primary)'; this.style.transform='translateY(-2px)';" onmouseout="this.style.background='rgba(255, 255, 255, 0.1)'; this.style.borderColor='var(--border-primary)'; this.style.transform='translateY(0)';">
                            <i class="fas fa-chevron-right"></i>
                            رجوع لقائمة الدوريات
                        </button>
                    </div>
                    <div class="header-box">ترتيب ${leagueInfo.name}</div>
                    <div class="league-container">
                `;

                data.forEach((team, index) => {
                    const position = parseInt(team.overall_league_position) || (index + 1);
                    const teamName = teamNamesArabic[team.team_name] || team.team_name || 'فريق غير معروف';
                    const teamBadge = team.team_badge || 'https://via.placeholder.com/28x28?text=?';
                    const wins = team.overall_league_W || '0';
                    const losses = team.overall_league_L || '0';
                    const points = team.overall_league_PTS || '0';

                    // Position class for styling
                    let positionClass = '';
                    if (position <= 4) {
                        positionClass = 'champions';
                    } else if (position <= 6) {
                        positionClass = 'europa';
                    } else if (position >= (data.length - 2)) {
                        positionClass = 'relegation';
                    }

                    teamsHtml += `
                        <div class="team-container ${positionClass}">
                            <div class="team-info">
                                <div class="team-position">${position}</div>
                                <img class="team-logo" src="${teamBadge}" alt="${teamName}" onerror="this.src='https://via.placeholder.com/28x28?text=?'">
                                <span class="team-name">${teamName}</span>
                                <div class="stats-container">
                                    <div class="stat-item">
                                        <div class="stat-label">ف</div>
                                        <div class="stat-value wins">${wins}</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-label">خ</div>
                                        <div class="stat-value losses">${losses}</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-label">ن</div>
                                        <div class="stat-value points">${points}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `;
                });

                teamsHtml += '</div>';
                statsContentDiv.innerHTML = teamsHtml;

                // Show content
                if (statsLoading) statsLoading.style.display = 'none';
                if (statsContent) statsContent.style.display = 'block';

                // Add success notification
                showNotification(`تم تحميل ترتيب ${leagueInfo.name} بنجاح`, 'success');

            } catch (error) {
                console.error('Error loading league data:', error);
                if (statsLoading) statsLoading.style.display = 'none';
                if (statsError) {
                    statsError.innerHTML = `
                        <div style="text-align: center; padding: 2rem; background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); border-radius: 12px; color: #ef4444;">
                            <i class="fas fa-exclamation-triangle" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                            <p style="font-weight: 600; margin: 0;">حدث خطأ أثناء جلب البيانات!</p>
                            <p style="opacity: 0.8; font-size: 0.9rem; margin-top: 0.5rem;">يرجى المحاولة مرة أخرى لاحقاً</p>
                            <button onclick="backToLeagueSelector()" style="
                                margin-top: 15px;
                                background: transparent;
                                border: 1px solid #ef4444;
                                border-radius: 8px;
                                color: #ef4444;
                                padding: 0.5rem 1rem;
                                cursor: pointer;
                                transition: all 0.3s ease;
                            " onmouseover="this.style.background='rgba(239, 68, 68, 0.1)';" onmouseout="this.style.background='transparent';">
                                العودة لقائمة الدوريات
                            </button>
                        </div>
                    `;
                    statsError.style.display = 'block';
                }
                // Show league selector again on error
                if (leagueSelector) leagueSelector.style.display = 'block';
                showNotification('فشل في تحميل بيانات الدوري', 'error');
            }
        }

        // Function to go back to league selector
        function backToLeagueSelector() {
            const leagueSelector = document.querySelector('.advanced-league-selector');
            const statsContent = document.getElementById('statsContent');
            const statsError = document.getElementById('statsError');

            // Clear selection
            document.querySelectorAll('.league-card').forEach(card => {
                card.classList.remove('selected');
            });
            currentSelectedLeague = null;

            // Show selector
            if (leagueSelector) leagueSelector.style.display = 'block';
            if (statsContent) statsContent.style.display = 'none';
            if (statsError) statsError.style.display = 'none';
        }

        // Firebase connection status
        let firebaseStatus = {
            connected: false,
            lastCheck: null
        };

        // Monitor Firebase connection
        async function monitorFirebaseConnection() {
            if (firebaseAvailable && database) {
                try {
                    const snapshot = await database.ref('.info/connected').once('value');
                    const connected = snapshot.val();

                    if (connected) {
                        if (!firebaseStatus.connected) {
                            firebaseStatus.connected = true;
                            console.log('اتصال Firebase نشط');
                        }
                    } else {
                        if (firebaseStatus.connected) {
                            firebaseStatus.connected = false;
                            console.warn('انقطع اتصال Firebase');
                        }
                    }
                } catch (error) {
                    if (firebaseStatus.connected) {
                        firebaseStatus.connected = false;
                        console.warn('انقطع اتصال Firebase:', error);
                    }
                }
            }

            firebaseStatus.lastCheck = new Date();
        }

        // Check Firebase connection periodically
        setInterval(monitorFirebaseConnection, 30000); // كل 30 ثانية

        // Initialize App
        window.addEventListener('load', () => {
            try {
                // Start Firebase monitoring
                monitorFirebaseConnection();

                setTimeout(() => {
                    const loadingOverlay = document.getElementById('loadingOverlay');
                    if (loadingOverlay) {
                        loadingOverlay.style.opacity = '0';
                        setTimeout(() => {
                            loadingOverlay.style.display = 'none';
                            if (!checkSavedLogin()) {
                                const loginPage = document.getElementById('loginPage');
                                if (loginPage) {
                                    loginPage.classList.remove('hidden');
                                }
                            }
                        }, 200);
                    }
                }, 500);

                // Initialize theme with error handling
                try {
                    applyThemeColor();
                    initializeSettings();
                    initializeHeaderScroll();
                } catch (initError) {
                    console.warn('Error during initialization:', initError);
                }
            } catch (error) {
                console.error('Critical error during app load:', error);
            }
        });

        // Header Scroll Animation (Simplified)
        function initializeHeaderScroll() {
            let lastScrollTop = 0;
            let isScrolling = false;
            let hideTimeout;
            const header = document.querySelector('.header');
            const mainContent = document.querySelector('.main-content');

            if (!header) return;

            window.addEventListener('scroll', function() {
                if (!isScrolling) {
                    window.requestAnimationFrame(function() {
                        const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
                        const scrollDirection = scrollTop > lastScrollTop ? 'down' : 'up';
                        const scrollSpeed = Math.abs(scrollTop - lastScrollTop);

                        // Clear any existing timeout
                        clearTimeout(hideTimeout);

                        // إخفاء الهيدر عند السحب للأسفل بسرعة
                        if (scrollDirection === 'down' && scrollTop > 100 && scrollSpeed > 5) {
                            header.classList.add('header-hidden');
                            if (mainContent) mainContent.classList.add('header-hidden');
                        } else if (scrollDirection === 'up' || scrollTop <= 60) {
                            header.classList.remove('header-hidden');
                            if (mainContent) mainContent.classList.remove('header-hidden');
                        }

                        // إظهار الهيدر عند التوقف عن السحب
                        hideTimeout = setTimeout(() => {
                            if (scrollTop > 100) {
                                header.classList.remove('header-hidden');
                                if (mainContent) mainContent.classList.remove('header-hidden');
                            }
                        }, 2000);

                        // إضافة تأثير الخلفية عند السحب
                        if (scrollTop > 30) {
                            header.classList.add('header-scrolled');
                        } else {
                            header.classList.remove('header-scrolled');
                        }

                        lastScrollTop = scrollTop;
                        isScrolling = false;
                    });
                }
                isScrolling = true;
            }, { passive: true });

            // إظهار الهيدر عند hover في الجزء العلوي
            document.addEventListener('mousemove', function(e) {
                if (e.clientY < 60 && header.classList.contains('header-hidden')) {
                    header.classList.remove('header-hidden');
                    if (mainContent) mainContent.classList.remove('header-hidden');
                }
            });
        }



        // Initialize Settings
        function initializeSettings() {


            // Notifications switch
            const notificationsSwitch = document.getElementById('notificationsSwitch');
            if (notificationsSwitch) {
                notificationsSwitch.addEventListener('change', function() {
                    const previousSetting = settings.notifications;
                    settings.notifications = this.checked;
                    localStorage.setItem('Nova_settings', JSON.stringify(settings));

                    // إظهار إشعار واحد فقط لتأكيد التغيير (مع تجاوز إعدادات الإشعارات مؤقتاً)
                    const tempNotifications = settings.notifications;
                    settings.notifications = true; // تفعيل مؤقت لإظهار رسالة التأكيد
                    showNotification(this.checked ? 'تم تفعيل الإشعارات' : 'تم إلغاء الإشعارات', 'success');

                    // إعادة الإعداد للحالة الصحيحة
                    setTimeout(() => {
                        settings.notifications = tempNotifications;
                    }, 100);
                });
                notificationsSwitch.checked = settings.notifications;
            }

            // Data saver switch
            const dataSaverSwitch = document.getElementById('dataSaverSwitch');
            if (dataSaverSwitch) {
                dataSaverSwitch.addEventListener('change', function() {
                    settings.dataSaver = this.checked;
                    localStorage.setItem('Nova_settings', JSON.stringify(settings));
                    showNotification(this.checked ? 'الميزة لا تعمل حاليا' : 'الميزة لا تعمل حاليا', 'erorr');
                });
                dataSaverSwitch.checked = settings.dataSaver || false;
            }


        }





        // Login Functions
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const username = document.getElementById('usernameInput').value.trim();
            const password = document.getElementById('passwordInput').value;

            // Check if admin login
            if (username === ADMIN_USERNAME) {
                if (password === ADMIN_PASSWORD) {
                    login(username, true);
                } else {
                    showNotification('كلمة مرور الأدمن غير صحيحة', 'error');
                    return;
                }
            } else {
                login(username || 'ضيف', false);
            }
        });

        // Show password field when admin username is entered
        document.getElementById('usernameInput').addEventListener('input', function() {
            const passwordGroup = document.getElementById('passwordGroup');
            const passwordInput = document.getElementById('passwordInput');

            if (this.value.trim() === ADMIN_USERNAME) {
                passwordGroup.style.display = 'block';
                passwordInput.required = true;
            } else {
                passwordGroup.style.display = 'none';
                passwordInput.required = false;
                passwordInput.value = '';
            }
        });

        function login(username, adminStatus = false) {
            showNotification('جاري تسجيل الدخول...', 'success');
            setTimeout(() => {
                currentUser = username;
                isAdmin = adminStatus;
                const loginData = {
                    username: username,
                    isAdmin: adminStatus,
                    loginTime: new Date().getTime(),
                    isLoggedIn: true
                };
                localStorage.setItem('Nova_user', JSON.stringify(loginData));
                updateUserDisplay(username);
                updateAdminUI();
                document.getElementById('loginPage').classList.add('hidden');
                document.getElementById('mainApp').classList.remove('hidden');

                if (adminStatus) {
                    showNotification(`مرحباً أدمن ${username}! تم تفعيل صلاحيات الإدارة`, 'success');
                } else {
                    showNotification(`مرحباً ${username}!`, 'success');
                }
            }, 800);
        }

        function enterAsGuest() {
            login('ضيف');
        }

        function checkSavedLogin() {
            const savedUser = localStorage.getItem('Nova_user');
            if (savedUser) {
                try {
                    const loginData = JSON.parse(savedUser);
                    const currentTime = new Date().getTime();
                    const thirtyDays = 30 * 24 * 60 * 60 * 1000;

                    if (loginData.isLoggedIn && (currentTime - loginData.loginTime) < thirtyDays) {
                        currentUser = loginData.username;
                        isAdmin = loginData.isAdmin || false;
                        updateUserDisplay(loginData.username);
                        updateAdminUI();
                        document.getElementById('loginPage').classList.add('hidden');
                        document.getElementById('mainApp').classList.remove('hidden');
                        return true;
                    } else {
                        localStorage.removeItem('Nova_user');
                    }
                } catch (e) {
                    localStorage.removeItem('Nova_user');
                }
            }
            return false;
        }

        function logout() {
            // إيقاف المراقبة في الوقت الفعلي
            disableRealtimeSync();

            // Clear all user data
            localStorage.removeItem('Nova_user');
            localStorage.removeItem('Nova_profile_data');

            // Reset variables
            currentUser = null;
            isAdmin = false;
            profileData = {
                name: 'ضيف',
                avatar: null
            };

            // Reset UI
            document.getElementById('loginPage').classList.remove('hidden');
            document.getElementById('mainApp').classList.add('hidden');

            // Clear input fields
            const usernameInput = document.getElementById('usernameInput');
            const passwordInput = document.getElementById('passwordInput');
            const passwordGroup = document.getElementById('passwordGroup');

            if (usernameInput) usernameInput.value = '';
            if (passwordInput) passwordInput.value = '';
            if (passwordGroup) {
                passwordGroup.style.display = 'none';
                passwordInput.required = false;
            }

            // Update displays
            updateAllProfileDisplays();
            updateAdminUI();

            showNotification('تم تسجيل الخروج بنجاح', 'success');
        }

        function updateUserDisplay(username) {
            try {
                // Update profile data
                if (typeof profileData !== 'undefined') {
                    profileData.name = username;
                    // Save profile data
                    localStorage.setItem('Nova_profile_data', JSON.stringify(profileData));
                }

                // Update user display elements
                const userName = document.getElementById('userName');
                const userAvatar = document.getElementById('userAvatar');

                if (userName) userName.textContent = username;
                if (userAvatar) userAvatar.textContent = username.charAt(0).toUpperCase();

                // Update all displays if function exists
                if (typeof updateAllProfileDisplays === 'function') {
                    updateAllProfileDisplays();
                }
            } catch (error) {
                console.warn('Error updating user display:', error);
            }
        }

        // Admin UI Functions
        function updateAdminUI() {
            const adminMenuItem = document.getElementById('adminMenuItem');
            if (adminMenuItem) {
                adminMenuItem.style.display = isAdmin ? 'block' : 'none';
            }
        }

        // Navigation Functions
        async function showSection(section) {
            // Check admin access for admin section
            if (section === 'admin' && !isAdmin) {
                showNotification('ليس لديك صلاحية للوصول إلى لوحة التحكم', 'error');
                return;
            }

            // إيقاف تحديثات الريموت مؤقتاً أثناء التبديل
            if (tvRemote) {
                tvRemote.isUpdating = true;
                clearTimeout(tvRemote.updateTimeout);
            }

            // استخدام requestAnimationFrame لتحسين الأداء
            requestAnimationFrame(() => {
                // إخفاء جميع الأقسام
                document.querySelectorAll('.section').forEach(sec => {
                    sec.classList.add('hidden');
                });

                // إظهار القسم المحدد
                const targetSection = document.getElementById(section + 'Section');
                if (targetSection) {
                    targetSection.classList.remove('hidden');
                }

                // إعادة تعيين صفحة القنوات إلى الحالة الافتراضية
                if (section === 'channels') {
                    const categoriesMain = document.getElementById('channelCategoriesMain');
                    const subPage = document.getElementById('channelSubPage');
                    if (categoriesMain) categoriesMain.style.display = 'block';
                    if (subPage) subPage.style.display = 'none';
                }

                closeSidebar();

                // إعادة تشغيل تحديثات الريموت بعد انتهاء التبديل
                if (tvRemote) {
                    setTimeout(() => {
                        tvRemote.isUpdating = false;
                        tvRemote.onSectionChange();
                    }, 100);
                }
            });
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            if (sidebar) {
                sidebar.classList.toggle('active');
            }
        }

        function closeSidebar() {
            const sidebar = document.getElementById('sidebar');
            if (sidebar && sidebar.classList.contains('active')) {
                sidebar.classList.remove('active');
            }
        }



        // Theme Color Functions
        function changeThemeColor(color) {
            currentThemeColor = color;
            localStorage.setItem('Nova_color', color);
            applyThemeColor();

            // Update active color indicator
            document.querySelectorAll('.color-option').forEach(theme => {
                theme.classList.remove('selected');
            });
            const selectedTheme = document.querySelector(`.color-option[data-color="${color}"]`);
            if (selectedTheme) {
                selectedTheme.classList.add('selected');
            }

            showNotification(`تم تغيير اللون إلى ${getColorName(color)}`, 'success');
        }

        function applyThemeColor() {
            try {
                // Apply theme class to document
                const currentClasses = document.documentElement.className.split(' ');
                const filteredClasses = currentClasses.filter(cls => !cls.startsWith('theme-'));
                document.documentElement.className = filteredClasses.concat([`theme-${currentThemeColor}`]).join(' ');

                // Update active color indicator with delay to ensure DOM is ready
                setTimeout(() => {
                    try {
                        const colorOptions = document.querySelectorAll('.color-option');
                        colorOptions.forEach(theme => {
                            if (theme && theme.classList) {
                                theme.classList.remove('selected');
                            }
                        });

                        const activeTheme = document.querySelector(`.color-option[data-color="${currentThemeColor}"]`);
                        if (activeTheme && activeTheme.classList) {
                            activeTheme.classList.add('selected');
                        }
                    } catch (innerError) {
                        console.warn('Error updating color indicators:', innerError);
                    }
                }, 100);
            } catch (error) {
                console.warn('Error applying theme color:', error);
            }
        }

        function getColorName(color) {
            const colorNames = {
                'red': 'الأحمر',
                'blue': 'الأزرق',
                'green': 'الأخضر',
                'purple': 'البنفسجي',
                'orange': 'البرتقالي',
                'pink': 'الوردي',
                'cyan': 'السماوي',
                'yellow': 'الأصفر',
                'indigo': 'النيلي',
                'emerald': 'الزمردي',
                'teal': 'الفيروزي',
                'rose': 'الوردي الداكن',
                'violet': 'البنفسجي الفاتح',
                'amber': 'العنبري',
                'lime': 'الليموني',
                'sky': 'السماوي الفاتح',
                'fuchsia': 'الفوشيا',
                'slate': 'الرمادي الداكن'
            };
            return colorNames[color] || color;
        }

        // Settings Functions
        function toggleDaznSetting(element) {
            element.classList.toggle('active');

            // Save settings
            const settingItem = element.closest('.dazn-setting-item');
            if (settingItem) {
                const settingTitle = settingItem.querySelector('.dazn-setting-title');
                if (settingTitle) {
                    const settingName = settingTitle.textContent.trim();
                    settings[settingName] = element.classList.contains('active');
                    localStorage.setItem('Nova_settings', JSON.stringify(settings));
                }
            }

            showNotification('تم حفظ الإعداد', 'success');
        }

        function toggleSetting(element) {
            toggleDaznSetting(element);
        }

        // Profile Functions
        function openProfile() {
            updateProfileInfo();
            showSection('profile');
        }

        function closeProfile() {
            showSection('live');
        }

        function updateProfileInfo() {
            const userName = currentUser || 'ضيف';
            const userInitial = userName.charAt(0).toUpperCase();

            // Update main profile elements
            const profileDisplayName = document.getElementById('profileDisplayName');
            const profileMainAvatar = document.getElementById('profileMainAvatar');
            const profileNavAvatar = document.getElementById('profileNavAvatar');

            if (profileDisplayName) profileDisplayName.textContent = userName;
            if (profileMainAvatar) profileMainAvatar.textContent = userInitial;
            if (profileNavAvatar) profileNavAvatar.textContent = userInitial;

            // Update legacy elements if they exist
            const profileName = document.getElementById('profileName');

            if (profileName) profileName.textContent = userName;

            // Update current theme display
            const currentThemeDisplay = document.getElementById('currentThemeDisplay');
            if (currentThemeDisplay) currentThemeDisplay.textContent = getColorName(currentThemeColor);
        }



        // Get channel logo function
        function getChannelLogo(channelName, categoryId) {
            // beIN Sports channels
            if (channelName.includes('beIN Sports')) {
                if (channelName.includes('News')) return '<img src="https://e.top4top.io/p_3506no4v61.jpg" alt="Logo" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';
                return '<img src="https://d.top4top.io/p_3495cezyj1.jpg" alt="beIN" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';
            }

            // Sports General channels
            if (categoryId === 'c-alwanhd') {
                if (channelName.includes('Alwan 1 HD')) return '<img src="https://c.top4top.io/p_35061ypdb1.jpg" alt="alwan" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';
                if (channelName.includes('Alwan 2 HD')) return '<img src="https://d.top4top.io/p_3506bds121.jpg" alt="alwan" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';
                if (channelName.includes('Alwan 3 HD')) return '<img src="https://f.top4top.io/p_3506g56rs1.jpg" alt="alwan" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';
                if (channelName.includes('Alwan 4 HD')) return '<img src="https://e.top4top.io/p_3506jml4i1.jpg" alt="alwan" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';       
                if (channelName.includes('Alwan 5 HD')) return '<img src="https://g.top4top.io/p_3506jg7f11.jpg" alt="alwan" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';
                if (channelName.includes('Alwan 6 HD')) return '<img src="https://h.top4top.io/p_3506uyx4x1.jpg" alt="alwna" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';         
                return '<img src="https://j.top4top.io/p_3497y0uz51.jpg" alt="Sports" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';
            }

            // FaJER channels
            if (categoryId === 'fjr-s') {
                if (channelName.includes('FaJER 1 HD')) return '<img src="https://i.ibb.co/0cY46br/AL-FAJER-1.jpg" alt="alwan" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';
                if (channelName.includes('FaJER 2 HD')) return '<img src="https://i.ibb.co/P4CR80X/AL-FAJER-2.jpg" alt="alwan" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';
                if (channelName.includes('FaJER 3 HD')) return '<img src="https://i.ibb.co/yXf7bTT/AL-FAJER-3.jpg" alt="alwan" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';
                if (channelName.includes('FaJER 4 HD')) return '<img src="https://i.ibb.co/sFfdsqc/AL-FAJER-4.jpg" alt="alwan" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';       
                if (channelName.includes('FaJER 5 HD')) return '<img src="https://i.ibb.co/W6VV956/AL-FAJER-5.jpg" alt="alwan" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';
                return '<img src="https://j.top4top.io/p_3497y0uz51.jpg" alt="Sports" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';
            }

            // Sports General channels
            if (categoryId === 'sports-general') {
                if (channelName.includes('NRT')) return '<img src="https://f.top4top.io/p_35068pcjx1.jpg" alt="NRT" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';
                if (channelName.includes('AVA')) return '<img src="https://g.top4top.io/p_3506dl9kx1.jpg" alt="AVA" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';
                if (channelName.includes('LD')) return '<img src="https://e.top4top.io/p_3506b73rk1.jpg" alt="LD" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';
                if (channelName.includes('ASTERA')) return '<img src="https://d.top4top.io/p_3506rgu7i1.jpg" alt="ASTERA" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';       
                if (channelName.includes('DUHOK')) return '<img src="https://c.top4top.io/p_35062fdhw1.jpg" alt="DUHOK" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';
                if (channelName.includes('DAISYNA')) return '<img src="https://d.top4top.io/p_3410wcw3d1.jpg" alt="DAISYNA" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';         
                return '<img src="https://j.top4top.io/p_3497y0uz51.jpg" alt="Sports" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';
            }

                       // Thmanyah channels
            if (categoryId === 'cc-thmanyah') {
                if (channelName.includes('Thmanyah')) return '<img src="https://i.top4top.io/p_3513fvawe1.jpg" alt="alwan" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';
                return '<img src="https://j.top4top.io/p_3497y0uz51.jpg" alt="Sports" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';
            }

            // Default channel logo
            return '<img src="https://i.imgur.com/6y7JuWP.png" alt="Channel" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">';
        }

        // Channel Functions
        function showChannelSubPage(categoryId) {
            try {
                const data = channelData[categoryId];
                if (!data) {
                    console.error('Channel data not found for category:', categoryId);
                    showNotification('خطأ في تحميل بيانات القنوات', 'error');
                    return;
                }

                // Hide main search results
                const mainSearchResults = document.getElementById('mainSearchResults');
                if (mainSearchResults) {
                    mainSearchResults.style.display = 'none';
                }

                // Clear main search if active
                const mainSearchInput = document.getElementById('mainChannelSearchInput');
                if (mainSearchInput && mainSearchInput.value) {
                    mainSearchInput.value = '';
                    const mainSearchClearBtn = document.getElementById('mainSearchClearBtn');
                    if (mainSearchClearBtn) {
                        mainSearchClearBtn.style.display = 'none';
                    }
                    // Show categories grid again
                    const categoriesGrid = document.querySelector('.channel-categories-grid');
                    if (categoriesGrid) {
                        categoriesGrid.style.display = 'grid';
                    }
                }

                const categoriesMain = document.getElementById('channelCategoriesMain');
                const subPage = document.getElementById('channelSubPage');
                const subTitle = document.getElementById('channelSubTitle');
                const grid = document.getElementById('channelSubGrid');

                if (!categoriesMain || !subPage || !subTitle || !grid) {
                    console.error('Required channel page elements not found');
                    showNotification('خطأ في عناصر الصفحة', 'error');
                    return;
                }

                // Show sub page
                categoriesMain.style.display = 'none';
                subPage.style.display = 'block';
                subTitle.textContent = data.title;

                // Clear previous content
                grid.innerHTML = '';

                // Generate channel items
                const channelItems = data.channels.map((channel, index) => {
                    try {
                        const channelName = typeof channel === 'string' ? channel : channel.name;
                        const channelImage = typeof channel === 'object' ? channel.image : null;
                        const quality = channelName.includes('HD') ? 'HD' : channelName.includes('SD') ? 'SD' : 'LIVE';
                        const channelNumber = data.baseNumber + index;
                        const channelLogo = channelImage ? 
                            `<img src="${channelImage}" alt="Logo" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;" onerror="this.outerHTML='${getChannelLogo(channelName, categoryId)}'">` : 
                            getChannelLogo(channelName, categoryId);

                        return `
                            <div class="channel-item-wrapper">
                                <a href="go:${channelNumber}" class="channel-item" target="_blank" rel="noopener noreferrer">
                                    <div class="channel-status"></div>
                                    <div class="channel-logo">
                                        ${channelLogo}
                                    </div>
                                    <div class="channel-info">
                                        <div class="channel-name">${channelName}</div>
                                        <div class="channel-quality">${quality}</div>
                                    </div>
                                </a>
                            </div>
                        `;
                    } catch (itemError) {
                        console.warn('Error creating channel item:', itemError);
                        return '';
                    }
                }).filter(item => item !== '');

                // Insert content
                grid.innerHTML = channelItems.join('');

                // Add animation
                setTimeout(() => {
                    if (subPage && subPage.classList) {
                        subPage.classList.add('animate-fade-in');
                    }
                }, 50);

            } catch (error) {
                console.error('Error in showChannelSubPage:', error);
                showNotification('حدث خطأ في تحميل القنوات', 'error');
            }
        }

        function backToChannelCategories() {
            try {
                const channelCategoriesMain = document.getElementById('channelCategoriesMain');
                const channelSubPage = document.getElementById('channelSubPage');

                if (channelCategoriesMain) {
                    channelCategoriesMain.style.display = 'block';
                }

                if (channelSubPage) {
                    channelSubPage.style.display = 'none';
                    // إزالة الصفوف المتحركة
                    channelSubPage.classList.remove('animate-fade-in');
                }

            } catch (error) {
                console.error('Error in backToChannelCategories:', error);
                showNotification('خطأ في الرجوع للفئات', 'error');
            }
        }





        // Simple Notification System
        let notificationCounter = 0;

        function showNotification(message, type = 'success', duration = 3000) {
            // التحقق من إعدادات الإشعارات
            if (!settings.notifications && type !== 'error') {
                return;
            }

            notificationCounter++;
            const notificationId = `notification-${notificationCounter}`;

            // Get icon based on type
            let iconClass = 'fas fa-info-circle';
            if (type === 'success') iconClass = 'fas fa-check-circle';
            else if (type === 'error') iconClass = 'fas fa-exclamation-triangle';

            // Create notification element
            const notification = document.createElement('div');
            notification.id = notificationId;
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <div class="notification-icon">
                    <i class="${iconClass}"></i>
                </div>
                <div class="notification-text">${message}</div>
                <button class="notification-close" onclick="removeNotification('${notificationId}')">
                    <i class="fas fa-times"></i>
                </button>
            `;

            // Add to container
            const container = document.getElementById('notificationContainer');
            if (container) {
                container.appendChild(notification);

                // Show with animation
                setTimeout(() => {
                    notification.classList.add('show');
                }, 10);

                // Auto remove after duration
                setTimeout(() => {
                    removeNotification(notificationId);
                }, duration);
            }
        }

        function showPremiumMessage() {
            showNotification('قريباً!', 'info');
        }

        function removeNotification(notificationId) {
            const notification = document.getElementById(notificationId);
            if (notification) {
                notification.style.opacity = '0';
                notification.style.transform = 'translateY(-50px)';

                setTimeout(() => {
                    if (notification && notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }
        }

        // Profile data storage with error handling
        let profileData = {};
        try {
            const savedProfileData = localStorage.getItem('Nova_profile_data');
            if (savedProfileData) {
                profileData = JSON.parse(savedProfileData);
            } else {
                profileData = {
                    name: currentUser || 'ضيف',
                    avatar: null
                };
            }
        } catch (error) {
            console.warn('Error loading profile data:', error);
            profileData = {
                name: currentUser || 'ضيف',
                avatar: null
            };
        }

        // Edit Profile Modal Functions
        function openEditProfileModal() {
            const overlay = document.getElementById('editProfileOverlay');
            const editProfileName = document.getElementById('editProfileName');

            // Load current profile data
            editProfileName.value = profileData.name || '';

            // Reset temporary avatar
            delete profileData.tempAvatar;

            // Update avatar display
            updateEditProfileAvatar();

            // Show remove button if avatar exists
            const avatarRemoveBtn = document.getElementById('avatarRemoveBtn');
            if (avatarRemoveBtn) avatarRemoveBtn.style.display = profileData.avatar ? 'flex' : 'none';

            // Setup character counters
            setupCharacterCounters();

            // Update initial character counts
            const nameCount = document.getElementById('nameCharCount');
            if (nameCount) nameCount.textContent = editProfileName.value.length;

            overlay.style.display = 'flex';
            overlay.offsetHeight; // Force reflow
            overlay.style.opacity = '1';

            // Prevent body scroll
            document.body.style.overflow = 'hidden';
        }

        function closeEditProfileModal() {
            const overlay = document.getElementById('editProfileOverlay');
            overlay.style.opacity = '0';

            setTimeout(() => {
                overlay.style.display = 'none';
                document.body.style.overflow = '';
            }, 300);
        }

        function selectProfileImage() {
            document.getElementById('profileImageInput').click();
        }



        function handleProfileImageSelect(event) {
            const file = event.target.files[0];
            if (!file) return;

            // Validate file type
            if (!file.type.startsWith('image/')) {
                showNotification('يرجى اختيار ملف صورة صالح', 'error');
                return;
            }

            // Validate file size (max 5MB)
            if (file.size > 5 * 1024 * 1024) {
                showNotification('حجم الصورة كبير جداً. الحد الأقصى 5 ميجابايت', 'error');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                // Store image directly without processing
                profileData.tempAvatar = e.target.result;
                updateEditProfileAvatar();

                // Show remove button
                const avatarRemoveBtn = document.getElementById('avatarRemoveBtn');
                if (avatarRemoveBtn) avatarRemoveBtn.style.display = 'flex';

                showNotification('تم تحديد الصورة بنجاح', 'success');
            };
            reader.readAsDataURL(file);
        }



        function removeProfileImage() {
            // إزالة الصورة المؤقتة والأساسية
            delete profileData.tempAvatar;
            profileData.avatar = null;

            // Hide remove button
            const avatarRemoveBtn = document.getElementById('avatarRemoveBtn');
            if (avatarRemoveBtn) avatarRemoveBtn.style.display = 'none';

            // Reset file input
            const profileImageInput = document.getElementById('profileImageInput');
            if (profileImageInput) profileImageInput.value = '';

            updateEditProfileAvatar();
            showNotification('تم حذف الصورة', 'success');
        }

        function updateEditProfileAvatar() {
            const editProfileAvatar = document.getElementById('editProfileAvatar');
            if (!editProfileAvatar) return;

            const avatarToShow = profileData.tempAvatar !== undefined ? profileData.tempAvatar : profileData.avatar;

            if (avatarToShow) {
                editProfileAvatar.style.backgroundImage = `url(${avatarToShow})`;
                editProfileAvatar.style.backgroundSize = 'cover';
                editProfileAvatar.style.backgroundPosition = 'center';
                editProfileAvatar.textContent = '';
            } else {
                editProfileAvatar.style.backgroundImage = '';
                editProfileAvatar.style.backgroundSize = '';
                editProfileAvatar.style.backgroundPosition = '';
                editProfileAvatar.textContent = (profileData.name || 'ضيف').charAt(0).toUpperCase();
            }
        }

        function saveProfileChanges(event) {
            event.preventDefault();

            const editProfileName = document.getElementById('editProfileName');
            const newName = editProfileName.value.trim();

            if (!newName) {
                showNotification('يرجى إدخال الاسم الكامل', 'error');
                return;
            }

            if (newName.length > 50) {
                showNotification('الاسم طويل جداً (الحد الأقصى 50 حرف)', 'error');
                return;
            }

            // Save profile data
            profileData.name = newName;

            // Save avatar if changed
            if (profileData.tempAvatar !== undefined) {
                profileData.avatar = profileData.tempAvatar;
                delete profileData.tempAvatar;
            }

            // Update current user
            currentUser = newName;

            // Save to localStorage
            localStorage.setItem('Nova_profile_data', JSON.stringify(profileData));

            // Update user data in login storage
            const loginData = JSON.parse(localStorage.getItem('Nova_user')) || {};
            loginData.username = newName;
            localStorage.setItem('Nova_user', JSON.stringify(loginData));

            // Update all profile displays
            updateAllProfileDisplays();

            // Close modal
            closeEditProfileModal();

            showNotification('تم حفظ التغييرات بنجاح', 'success');
        }

        function clearProfileData() {
            if (!confirm('هل أنت متأكد من حذف جميع البيانات الشخصية؟ هذا الإجراء لا يمكن التراجع عنه.')) {
                return;
            }

            // Clear profile data
            profileData = {
                name: currentUser || 'ضيف',
                nickname: '',
                avatar: null
            };

            // Save cleared data
            localStorage.setItem('Nova_profile_data', JSON.stringify(profileData));

            // Update displays
            updateAllProfileDisplays();

            showNotification('تم مسح البيانات الشخصية بنجاح', 'success');
        }

        // Character counter functions
        function setupCharacterCounters() {
            const nameInput = document.getElementById('editProfileName');
            const nameCount = document.getElementById('nameCharCount');

            if (nameInput && nameCount) {
                nameInput.addEventListener('input', function() {
                    nameCount.textContent = this.value.length;
                    if (this.value.length > 45) {
                        nameCount.style.color = '#ff4757';
                    } else {
                        nameCount.style.color = 'var(--text-muted)';
                    }
                });
            }
        }

        function updateAllProfileDisplays() {
            try {
                const userName = (profileData && profileData.name) ? profileData.name : (currentUser || 'ضيف');
                const userAvatar = (profileData && profileData.avatar) ? profileData.avatar : null;
                const userInitial = userName.charAt(0).toUpperCase();

                // Update all name elements
                const nameElements = [
                    'userName', 'profileName', 'profileDisplayName'
                ];
                nameElements.forEach(id => {
                    try {
                        const element = document.getElementById(id);
                        if (element) element.textContent = userName;
                    } catch (error) {
                        console.warn(`Error updating element ${id}:`, error);
                    }
                });

                // Update all avatar elements
                const avatarElements = [
                    'userAvatar', 'profileAvatarLarge', 'profileMainAvatar', 'profileNavAvatar'
                ];
                avatarElements.forEach(id => {
                    try {
                        const element = document.getElementById(id);
                        if (element) {
                            if (userAvatar) {
                                element.style.backgroundImage = `url(${userAvatar})`;
                                element.style.backgroundSize = 'cover';
                                element.style.backgroundPosition = 'center';
                                element.textContent = '';
                            } else {
                                element.style.backgroundImage = '';
                                element.textContent = userInitial;
                            }
                        }
                    } catch (error) {
                        console.warn(`Error updating avatar element ${id}:`, error);
                    }
                });
            } catch (error) {
                console.error('Error in updateAllProfileDisplays:', error);
            }
        }

        // Initialize default section
        document.addEventListener('DOMContentLoaded', function() {
            // تحميل البيانات مع ضمان العرض
            Promise.all([
                loadChannelData(),
                loadSportsEvents()
            ]).then(() => {
                // ضمان تحديث العرض بعد تحميل البيانات
                updateSportsEventsDisplay();
                console.log('تم تحميل جميع البيانات وتحديث العرض');
            }).catch(error => {
                console.error('خطأ في تحميل البيانات:', error);
                // في حالة الخطأ، استخدم البيانات الافتراضية
                sportsEvents = [...defaultSportsEvents];
                updateSportsEventsDisplay();
            });

            showSection('live');
            initializeMatchesSlider();

            // Load saved profile data
            if (profileData && profileData.name && profileData.name !== 'ضيف') {
                currentUser = profileData.name;
                updateAllProfileDisplays();
            }

            // Initialize admin panel
            loadAdminData();

            // تحديث العرض مرة أخرى للتأكد
            setTimeout(() => {
                updateSportsEventsDisplay();
            }, 500);

            // Setup image previews for admin panel
            setupImagePreviews();


        });

        // ===== ADMIN PANEL FUNCTIONS =====

        async function switchAdminTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.admin-tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });

            // Remove active class from all tabs
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab content
            document.getElementById(`admin${tabName.charAt(0).toUpperCase() + tabName.slice(1)}Tab`).classList.remove('hidden');

            // Add active class to selected tab
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');

            // Load specific data for the tab with error handling
            try {
                if (tabName === 'categories') {
                    loadCategoriesList();
                } else if (tabName === 'channels') {
                    loadChannelSelectors();
                    // Clear channels list when switching to channels tab
                    const channelsList = document.getElementById('channelsList');
                    if (channelsList) {
                        channelsList.innerHTML = `
                            <div style="text-align: center; padding: 2rem; color: var(--text-muted);">
                                <i class="fas fa-tv" style="font-size: 2rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                                <p>اختر فئة لعرض قنواتها</p>
                            </div>
                        `;
                    }
                } else if (tabName === 'events') {
                    loadEventsList();
                }
            } catch (error) {
                console.error('خطأ في تحميل بيانات التبويب:', error);
                showNotification('خطأ في تحميل البيانات', 'error');
            }
        }

        async function loadAdminData() {
            // التأكد من وجود البيانات
            if (!channelData || Object.keys(channelData).length === 0) {
                console.log('تحميل بيانات القنوات الافتراضية...');
                channelData = JSON.parse(JSON.stringify(defaultChannelData));
                await saveChannelData();
            }

            if (!sportsEvents || sportsEvents.length === 0) {
                console.log('تحميل بيانات الأحداث الافتراضية...');
                sportsEvents = [...defaultSportsEvents];
                await saveSportsEvents();
            }

            // تحميل قوائم الإدارة
            loadCategoriesList();
            loadChannelSelectors();
            loadEventsList();
        }

        // ===== SPORTS EVENTS MANAGEMENT FUNCTIONS =====

        function loadEventsList() {
            const eventsList = document.getElementById('eventsList');
            if (!eventsList) return;

            if (sportsEvents.length === 0) {
                eventsList.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: var(--text-muted);">
                        <i class="fas fa-futbol" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                        <h3>لا توجد أحداث رياضية</h3>
                        <p>ابدأ بإضافة حدث رياضي جديد</p>
                    </div>
                `;
                return;
            }

            eventsList.innerHTML = sportsEvents.map((event, index) => {
                const statusIcon = event.status === 'live' ? 'fas fa-circle text-danger' : 
                                 event.status === 'finished' ? 'fas fa-check-circle text-success' : 
                                 'fas fa-clock text-warning';
                const statusText = event.status === 'live' ? 'مباشر' : 
                                 event.status === 'finished' ? 'انتهى' : 'قادم';
                const statusColor = event.status === 'live' ? '#ff4757' : 
                                  event.status === 'finished' ? '#2ed573' : '#ffa502';

                return `
                    <div class="category-item" style="align-items: flex-start;">
                        <div style="display: flex; gap: 1rem; align-items: flex-start; flex: 1;">
                            <div style="width: 80px; height: 60px; border-radius: 8px; overflow: hidden; flex-shrink: 0; background: var(--border-primary);">
                                <img src="${event.image}" alt="${event.title}" style="width: 100%; height: 100%; object-fit: cover;" onerror="this.style.display='none'">
                            </div>
                            <div class="item-info" style="flex: 1;">
                                <div class="item-title">${event.title}</div>
                                <div class="item-subtitle">${event.subtitle}</div>
                                <div style="margin-top: 0.5rem;">
                                    <span style="display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.8rem; font-weight: 600; background: rgba(${statusColor === '#ff4757' ? '255, 71, 87' : statusColor === '#2ed573' ? '46, 213, 115' : '255, 165, 2'}, 0.1); color: ${statusColor}; border: 1px solid rgba(${statusColor === '#ff4757' ? '255, 71, 87' : statusColor === '#2ed573' ? '46, 213, 115' : '255, 165, 2'}, 0.3);">
                                        <i class="${statusIcon}" style="font-size: 0.7rem;"></i>
                                        ${statusText}
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="item-actions">
                            <button class="action-btn" onclick="editEvent(${index})" title="تعديل">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn delete" onclick="deleteEvent(${index})" title="حذف">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        async function addNewEvent() {
            const title = document.getElementById('newEventTitle').value.trim();
            const subtitle = document.getElementById('newEventSubtitle').value.trim();
            const image = document.getElementById('newEventImage').value.trim();
            const link = document.getElementById('newEventLink').value.trim();
            const status = document.getElementById('newEventStatus').value;

            if (!title || !subtitle) {
                showNotification('يرجى ملء العنوان والوصف على الأقل', 'error');
                return;
            }

            const newEvent = {
                title: title,
                subtitle: subtitle,
                image: image || 'https://via.placeholder.com/400x250?text=حدث+رياضي',
                link: link || null,
                status: status
            };

            sportsEvents.push(newEvent);

            const saved = await saveSportsEvents();
            if (saved) {
                showNotification('تم إضافة الحدث بنجاح', 'success');

                // Clear inputs and preview
                document.getElementById('newEventTitle').value = '';
                document.getElementById('newEventSubtitle').value = '';
                document.getElementById('newEventImage').value = '';
                document.getElementById('newEventLink').value = '';
                document.getElementById('newEventStatus').value = 'upcoming';
                hideImagePreview('newEventImagePreview');

                // Refresh displays
                loadEventsList();
                updateSportsEventsDisplay();
            } else {
                showNotification('خطأ في حفظ البيانات', 'error');
            }
        }

        function editEvent(index) {
            const event = sportsEvents[index];
            if (!event) return;

            // Fill edit form
            document.getElementById('editEventIndex').value = index;
            document.getElementById('editEventTitle').value = event.title;
            document.getElementById('editEventSubtitle').value = event.subtitle;
            document.getElementById('editEventImage').value = event.image;
            document.getElementById('editEventLink').value = event.link || '';
            document.getElementById('editEventStatus').value = event.status;

            // Show image preview if available
            if (event.image) {
                showImagePreview(event.image, 'editEventImagePreview', 'editEventImagePreviewImg');
            } else {
                hideImagePreview('editEventImagePreview');
            }

            // Show modal
            const modal = document.getElementById('editEventModal');
            modal.style.display = 'flex';
        }

        function closeEditEventModal() {
            const modal = document.getElementById('editEventModal');
            modal.style.display = 'none';
        }

        async function saveEventChanges() {
            const index = parseInt(document.getElementById('editEventIndex').value);
            const title = document.getElementById('editEventTitle').value.trim();
            const subtitle = document.getElementById('editEventSubtitle').value.trim();
            const image = document.getElementById('editEventImage').value.trim();
            const link = document.getElementById('editEventLink').value.trim();
            const status = document.getElementById('editEventStatus').value;

            if (!title || !subtitle) {
                showNotification('يرجى ملء العنوان والوصف على الأقل', 'error');
                return;
            }

            sportsEvents[index] = {
                title: title,
                subtitle: subtitle,
                image: image || sportsEvents[index].image,
                link: link || null,
                status: status
            };

            if (await saveSportsEvents()) {
                showNotification('تم حفظ التغييرات بنجاح', 'success');
                closeEditEventModal();
                loadEventsList();
                updateSportsEventsDisplay();
            } else {
                showNotification('خطأ في حفظ البيانات', 'error');
            }
        }

        async function deleteEvent(index) {
            const event = sportsEvents[index];
            if (!event) return;

            if (!confirm(`هل أنت متأكد من حذف الحدث "${event.title}"؟`)) {
                return;
            }

            sportsEvents.splice(index, 1);

            if (await saveSportsEvents()) {
                showNotification('تم حذف الحدث بنجاح', 'success');
                loadEventsList();
                updateSportsEventsDisplay();
            } else {
                showNotification('خطأ في حفظ البيانات', 'error');
            }
        }

        function updateSportsEventsDisplay() {
            const slider = document.getElementById('bestOfFootballSlider');
            if (!slider) {
                console.warn('عنصر الأحداث الرياضية غير موجود');
                return;
            }

            if (!sportsEvents || sportsEvents.length === 0) {
                console.warn('لا توجد أحداث رياضية للعرض');
                slider.innerHTML = `
                    <div class="football-event-card" style="opacity: 0.7;">
                        <div class="card-background" style="background: linear-gradient(135deg, #2c5530 0%, #1e3a1f 100%);"></div>
                        <div class="football-info">
                            <div class="football-title">لا توجد أحداث متاحة حالياً</div>
                            <div class="football-subtitle">يتم تحديث الأحداث دورياً</div>
                        </div>
                    </div>
                `;
                return;
            }

            slider.innerHTML = sportsEvents.map(event => {
                const clickHandler = event.link ? `onclick="window.open('${event.link}', '_blank')" style="cursor: pointer;"` : '';
                const safeImage = event.image || 'https://via.placeholder.com/400x250?text=حدث+رياضي';

                return `
                <div class="football-event-card" ${clickHandler}>
                    <div class="card-background" style="background-image: url('${safeImage}'); background-size: cover; background-position: center;"></div>
                    <div class="road-lines"></div>
                    ${event.status === 'live' ? '<div class="live-badge-football">مباشر</div>' : ''}
                    <div class="football-info">
                        <div class="football-title">${event.title || 'حدث رياضي'}</div>
                        <div class="football-subtitle">${event.subtitle || 'وصف الحدث'}</div>
                    </div>
                </div>
            `;
            }).join('');

            console.log(`تم عرض ${sportsEvents.length} حدث رياضي`);
        }

        function loadCategoriesList() {
            const categoriesList = document.getElementById('categoriesList');
            if (!categoriesList) return;

            if (!channelData || Object.keys(channelData).length === 0) {
                categoriesList.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: var(--text-muted);">
                        <i class="fas fa-folder-open" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                        <h3>لا توجد فئات</h3>
                        <p>ابدأ بإضافة فئة جديدة للقنوات</p>
                    </div>
                `;
                return;
            }

            categoriesList.innerHTML = Object.keys(channelData).map(categoryId => {
                const category = channelData[categoryId];
                if (!category) return '';

                return `
                    <div class="category-item">
                        <div class="item-info">
                            <div class="item-title">${category.title || categoryId}</div>
                            <div class="item-subtitle">معرف: ${categoryId} | رقم أساسي: ${category.baseNumber || 0} | ${(category.channels || []).length} قناة</div>
                        </div>
                        <div class="item-actions">
                            <button class="action-btn" onclick="editCategory('${categoryId}')" title="تعديل">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="action-btn delete" onclick="deleteCategory('${categoryId}')" title="حذف">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
            }).filter(item => item !== '').join('');
        }

        function loadChannelSelectors() {
            const categorySelect = document.getElementById('channelCategorySelect');
            const listCategorySelect = document.getElementById('channelListCategorySelect');

            if (!categorySelect || !listCategorySelect) return;

            const options = Object.keys(channelData).map(categoryId => {
                return `<option value="${categoryId}">${channelData[categoryId].title}</option>`;
            }).join('');

            categorySelect.innerHTML = '<option value="">اختر الفئة</option>' + options;
            listCategorySelect.innerHTML = '<option value="">اختر الفئة لعرض قنواتها</option>' + options;
        }

        async function addNewCategory() {
            const categoryId = document.getElementById('newCategoryId').value.trim();
            const categoryTitle = document.getElementById('newCategoryTitle').value.trim();
            const baseNumber = parseInt(document.getElementById('newCategoryBaseNumber').value);

            if (!categoryId || !categoryTitle || !baseNumber) {
                showNotification('يرجى ملء جميع الحقول', 'error');
                return;
            }

            if (channelData[categoryId]) {
                showNotification('معرف الفئة موجود بالفعل', 'error');
                return;
            }

            // Check if base number is already used
            const existingBaseNumbers = Object.values(channelData).map(cat => cat.baseNumber);
            if (existingBaseNumbers.includes(baseNumber)) {
                showNotification('الرقم الأساسي مستخدم بالفعل', 'error');
                return;
            }


            // Add new channel
            channelData[categoryId].channels.push({
                name: channelName,
                image: channelImage || null
            });

            if (await saveChannelData()) {
                showNotification('تم إضافة القناة بنجاح', 'success');

                // Clear inputs and preview
                document.getElementById('newChannelName').value = '';
                document.getElementById('newChannelImage').value = '';
                hideImagePreview('newChannelImagePreview');
            }
        }

        // Image preview functions
        function setupImagePreviews() {
            // Channel image preview
            const newChannelImage = document.getElementById('newChannelImage');
            if (newChannelImage) {
                newChannelImage.addEventListener('input', function() {
                    showImagePreview(this.value, 'newChannelImagePreview', 'newChannelImagePreviewImg');
                });
            }

            // Event image preview  
            const newEventImage = document.getElementById('newEventImage');
            if (newEventImage) {
                newEventImage.addEventListener('input', function() {
                    showImagePreview(this.value, 'newEventImagePreview', 'newEventImagePreviewImg');
                });
            }

            // Edit channel image preview
            const editChannelImage = document.getElementById('editChannelImage');
            if (editChannelImage) {
                editChannelImage.addEventListener('input', function() {
                    showImagePreview(this.value, 'editChannelImagePreview', 'editChannelImagePreviewImg');
                });
            }

            // Edit event image preview
            const editEventImage = document.getElementById('editEventImage');
            if (editEventImage) {
                editEventImage.addEventListener('input', function() {
                    showImagePreview(this.value, 'editEventImagePreview', 'editEventImagePreviewImg');
                });
            }
        }

        function showImagePreview(imageUrl, previewContainerId, previewImgId) {
            const container = document.getElementById(previewContainerId);
            const img = document.getElementById(previewImgId);

            if (!container || !img) return;

            if (imageUrl && imageUrl.trim()) {
                img.src = imageUrl;
                img.onload = function() {
                    container.style.display = 'block';
                };
                img.onerror = function() {
                    container.style.display = 'none';
                };
            } else {
                container.style.display = 'none';
            }
        }

        function hideImagePreview(previewContainerId) {
            const container = document.getElementById(previewContainerId);
            if (container) {
                container.style.display = 'none';
            }
        }

        // Generate automatic numbers for events
        function generateEventNumber() {
            const linkInput = document.getElementById('newEventLink');
            if (!linkInput) return;

            // Find the highest existing event number
            let maxNumber = 500; // Start from 500
            sportsEvents.forEach(event => {
                if (event.link && event.link.startsWith('go:')) {
                    const number = parseInt(event.link.replace('go:', ''));
                    if (!isNaN(number) && number > maxNumber) {
                        maxNumber = number;
                    }
                }
            });

            // Set next available number
            linkInput.value = `go:${maxNumber + 1}`;
            showNotification(`تم توليد الرقم التلقائي: ${maxNumber + 1}`, 'success');
        }

        function generateEditEventNumber() {
            const linkInput = document.getElementById('editEventLink');
            if (!linkInput) return;

            // Find the highest existing event number
            let maxNumber = 500; // Start from 500
            sportsEvents.forEach(event => {
                if (event.link && event.link.startsWith('go:')) {
                    const number = parseInt(event.link.replace('go:', ''));
                    if (!isNaN(number) && number > maxNumber) {
                        maxNumber = number;
                    }
                }
            });

            // Set next available number
            linkInput.value = `go:${maxNumber + 1}`;
            showNotification(`تم توليد الرقم التلقائي: ${maxNumber + 1}`, 'success');
        }

        function loadChannelsForCategory() {
            const categoryId = document.getElementById('channelListCategorySelect').value;
            const channelsList = document.getElementById('channelsList');

            if (!categoryId) {
                channelsList.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: var(--text-muted);">
                        <i class="fas fa-tv" style="font-size: 2rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                        <p>اختر فئة لعرض قنواتها</p>
                    </div>
                `;
                return;
            }

            if (!channelData[categoryId]) {
                channelsList.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: var(--text-muted);">
                        <i class="fas fa-exclamation-triangle" style="font-size: 2rem; margin-bottom: 1rem; opacity: 0.5; color: #ff4757;"></i>
                        <p>الفئة غير موجودة</p>
                    </div>
                `;
                return;
            }

            const category = channelData[categoryId];

            if (!category.channels || category.channels.length === 0) {
                channelsList.innerHTML = `
                    <div style="text-align: center; padding: 2rem; color: var(--text-muted);">
                        <i class="fas fa-tv" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                        <h3>لا توجد قنوات في هذه الفئة</h3>
                        <p>ابدأ بإضافة قناة جديدة</p>
                    </div>
                `;
                return;
            }

            channelsList.innerHTML = category.channels.map((channel, index) => {
                const channelName = typeof channel === 'string' ? channel : (channel.name || 'قناة غير معروفة');
                const channelImage = typeof channel === 'object' ? channel.image : null;

                return `
                <div class="channel-item-admin">
                    <div style="display: flex; gap: 1rem; align-items: center; flex: 1;">
                        <div style="width: 58px; height: 58px; border-radius: 12px; overflow: hidden; flex-shrink: 0; box-shadow: 0 3px 12px rgba(0, 0, 0, 0.15);">
                            ${channelImage ? `<img src="${channelImage}" alt="${channelName}" style="width: 100%; height: 100%; object-fit: cover;" onerror="this.outerHTML='${getChannelLogo(channelName, categoryId)}'">` : getChannelLogo(channelName, categoryId)}
                        </div>
                        <div class="item-info">
                            <div class="item-title">${channelName}</div>
                            <div class="item-subtitle">رابط: go:${(category.baseNumber || 0) + index}${channelImage ? ' | صورة مخصصة' : ''}</div>
                        </div>
                    </div>
                    <div class="item-actions">
                        <button class="action-btn" onclick="editChannel('${categoryId}', ${index})" title="تعديل">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="action-btn delete" onclick="deleteChannel('${categoryId}', ${index})" title="حذف">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `;
            }).join('');
        }

        function editChannel(categoryId, channelIndex) {
            const channel = channelData[categoryId].channels[channelIndex];
            const channelName = typeof channel === 'string' ? channel : channel.name;
            const channelImage = typeof channel === 'object' ? channel.image : null;

            // Fill edit form
            document.getElementById('editChannelCategory').value = categoryId;
            document.getElementById('editChannelIndex').value = channelIndex;
            document.getElementById('editChannelName').value = channelName;
            document.getElementById('editChannelImage').value = channelImage || '';

            // Show image preview if available
            if (channelImage) {
                showImagePreview(channelImage, 'editChannelImagePreview', 'editChannelImagePreviewImg');
            } else {
                hideImagePreview('editChannelImagePreview');
            }

            // Show modal
            const modal = document.getElementById('editChannelModal');
            modal.style.display = 'flex';
        }

        function closeEditChannelModal() {
            const modal = document.getElementById('editChannelModal');
            modal.style.display = 'none';
        }

        async function saveChannelChanges() {
            const categoryId = document.getElementById('editChannelCategory').value;
            const channelIndex = parseInt(document.getElementById('editChannelIndex').value);
            const channelName = document.getElementById('editChannelName').value.trim();
            const channelImage = document.getElementById('editChannelImage').value.trim();

            if (!channelName) {
                showNotification('يرجى إدخال اسم القناة', 'error');
                return;
            }

            // Update channel data
            channelData[categoryId].channels[channelIndex] = {
                name: channelName,
                image: channelImage || null
            };

            if (await saveChannelData()) {
                showNotification('تم حفظ التغييرات بنجاح', 'success');
                closeEditChannelModal();
                loadCategoriesList();
                loadChannelsForCategory();
                updateChannelCategoriesDisplay();
            } else {
                showNotification('خطأ في حفظ البيانات', 'error');
            }
        }

        async function deleteChannel(categoryId, channelIndex) {
            const channel = channelData[categoryId].channels[channelIndex];
            const channelName = typeof channel === 'string' ? channel : channel.name;

            if (!confirm(`هل أنت متأكد من حذف قناة "${channelName}"؟`)) {
                return;
            }

            channelData[categoryId].channels.splice(channelIndex, 1);

            if (await saveChannelData()) {
                showNotification('تم حذف القناة بنجاح', 'success');
                loadCategoriesList();
                loadChannelsForCategory();
                updateChannelCategoriesDisplay();
            } else {
                showNotification('خطأ في حفظ البيانات', 'error');
            }
        }

        function updateChannelCategoriesDisplay() {
            // Update the main channels page display
            const categoriesGrid = document.querySelector('.channel-categories-grid');
            if (!categoriesGrid) return;

            categoriesGrid.innerHTML = Object.keys(channelData).map(categoryId => {
                const category = channelData[categoryId];
                const channelCount = category.channels.length;

                // Determine background image based on category
                let bgImage = 'https://i.imgur.com/default.jpg';
                if (categoryId.includes('bein')) bgImage = 'https://c.top4top.io/p_3408jzbg31.jpg';
                else if (categoryId.includes('fjr') || categoryId.includes('fajer')) bgImage = 'https://h.top4top.io/p_3506bqcex1.jpg';
                else if (categoryId.includes('c-alwanhd')) bgImage = 'https://i.top4top.io/p_3506uo65h1.jpg';
                else if (categoryId.includes('cc-thmanyah')) bgImage = 'https://pbs.twimg.com/card_img/1953836002222473216/dziKdJqf?format=jpg&name=medium';                
                else if (categoryId.includes('sport')) bgImage = 'https://c.top4top.io/p_3499bjfz31.jpg';

                return `
                    <div class="channel-category-card" onclick="showChannelSubPage('${categoryId}')">
                        <div style="width: 100%; height: 100px; border-radius: 10px; margin-bottom: 1rem; position: relative; overflow: hidden; background: url('${bgImage}') center/cover;">
                            <div style="position: absolute; bottom: 10px; left: 10px; z-index: 2; color: white;">
                            </div>
                        </div>
                        <div class="channel-category-name">${category.title}</div>
                        <div class="channel-category-desc">${getCategoryDescription(categoryId)}</div>
                        <div class="channel-category-badge">
                            <i class="fas fa-video" style="font-size: 1.1rem;"></i>
                            <span>${channelCount} قناة</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function getCategoryDescription(categoryId) {
            const descriptions = {
                'bein-hd': 'مجموعة قنوات الباقة البنفسجية الرياضية',
                'fjr-s': 'القنوات الفلسطينية الرياضية جميع الأحداث',
                'sports-general': 'مجموعة متنوعة من القنوات الرياضية',
                'c-alwanhd': 'أفضل باقة رياضية لمشاهدة المباريات بأعلى جودة'
            };
            return descriptions[categoryId] || 'قنوات رياضية متنوعة';
        }



        async function resetToDefault() {
            if (!confirm('هل أنت متأكد من إعادة تعيين جميع البيانات للافتراضية؟\nسيتم فقدان جميع التغييرات التي أجريتها.')) {
                return;
            }

            try {
                channelData = JSON.parse(JSON.stringify(defaultChannelData)); // نسخ عميق
                sportsEvents = JSON.parse(JSON.stringify(defaultSportsEvents)); // نسخ عميق

                const channelSaved = await saveChannelData();
                const eventsSaved = await saveSportsEvents();

                if (channelSaved && eventsSaved) {
                    showNotification('تم إعادة تعيين البيانات للافتراضية بنجاح', 'success');
                    loadAdminData();
                    updateChannelCategoriesDisplay();
                    updateSportsEventsDisplay();
                } else {
                    showNotification('خطأ في حفظ البيانات المعاد تعيينها', 'error');
                }
            } catch (error) {
                console.error('خطأ في إعادة تعيين البيانات:', error);
                showNotification('حدث خطأ أثناء إعادة التعيين', 'error');
            }
        }

        // تهيئة سلايدر المباريات مع إمكانية السحب
        function initializeMatchesSlider() {
            initializeSlider('matchesSlider');
            initializeSlider('competitionsSlider');
            initializeSlider('bestOfFootballSlider');
        }

        function initializeSlider(sliderId) {
            const slider = document.getElementById(sliderId);
            if (!slider) return;

            let isDown = false;
            let startX;
            let scrollLeft;
            let isDragging = false;

            // Mouse events
            slider.addEventListener('mousedown', (e) => {
                isDown = true;
                slider.classList.add('dragging');
                startX = e.pageX - slider.offsetLeft;
                scrollLeft = slider.scrollLeft;
                isDragging = false;
            });

            slider.addEventListener('mouseleave', () => {
                isDown = false;
                slider.classList.remove('dragging');
            });

            slider.addEventListener('mouseup', () => {
                isDown = false;
                slider.classList.remove('dragging');

                // منع النقر إذا كان هناك سحب
                if (isDragging) {
                    setTimeout(() => {
                        isDragging = false;
                    }, 100);
                }
            });

            slider.addEventListener('mousemove', (e) => {
                if (!isDown) return;
                e.preventDefault();
                isDragging = true;
                const x = e.pageX - slider.offsetLeft;
                const walk = (x - startX) * 2;
                slider.scrollLeft = scrollLeft - walk;
            });

            // Touch events للهواتف المحمولة
            let touchStartX = 0;
            let touchStartScrollLeft = 0;

            slider.addEventListener('touchstart', (e) => {
                touchStartX = e.touches[0].clientX;
                touchStartScrollLeft = slider.scrollLeft;
                slider.classList.add('dragging');
            }, { passive: true });

            slider.addEventListener('touchmove', (e) => {
                if (!touchStartX) return;

                const touchX = e.touches[0].clientX;
                const diffX = touchStartX - touchX;
                slider.scrollLeft = touchStartScrollLeft + diffX;
                isDragging = true;
            }, { passive: true });

            slider.addEventListener('touchend', () => {
                touchStartX = 0;
                slider.classList.remove('dragging');

                // منع النقر إذا كان هناك سحب
                if (isDragging) {
                    setTimeout(() => {
                        isDragging = false;
                    }, 100);
                }
            }, { passive: true });

            // منع النقر على الروابط أثناء السحب
            slider.addEventListener('click', (e) => {
                if (isDragging) {
                    e.preventDefault();
                    e.stopPropagation();
                }
            }, true);
        }

        // Search and Filter Functions for Main Categories Page
        function filterMainChannels() {
            const searchInput = document.getElementById('mainChannelSearchInput');
            const searchClearBtn = document.getElementById('mainSearchClearBtn');
            const searchValue = searchInput.value.trim();

            // Show/hide clear button
            searchClearBtn.style.display = searchValue ? 'block' : 'none';

            // Debounce search
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                performMainSearch(searchValue);
            }, 300);
        }

        function performMainSearch(searchTerm) {
            const searchResults = document.getElementById('mainSearchResults');
            const searchResultsGrid = document.getElementById('mainSearchResultsGrid');
            const categoriesGrid = document.querySelector('.channel-categories-grid');

            if (!searchTerm) {
                searchResults.style.display = 'none';
                categoriesGrid.style.display = 'grid';
                return;
            }

            // Hide categories grid and show search results
            categoriesGrid.style.display = 'none';
            searchResults.style.display = 'block';

            // Search through all channels
            const results = [];
            for (const categoryId in channelData) {
                const category = channelData[categoryId];
                category.channels.forEach((channel, index) => {
                    const channelName = typeof channel === 'string' ? channel : channel.name;
                    if (channelName.toLowerCase().includes(searchTerm.toLowerCase())) {
                        results.push({
                            name: channelName,
                            image: typeof channel === 'object' ? channel.image : null,
                            category: category.title,
                            categoryId: categoryId,
                            index: index,
                            url: `go:${category.baseNumber + index}`,
                            favoriteId: `channel_${categoryId}_${index}`
                        });
                    }
                });
            }

            displayMainSearchResults(results);
        }



        function displayMainSearchResults(results) {
            const searchResultsGrid = document.getElementById('mainSearchResultsGrid');

            if (results.length === 0) {
                searchResultsGrid.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 2rem; color: var(--text-muted);">
                        <i class="fas fa-search" style="font-size: 3rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                        <h3>لا توجد نتائج</h3>
                        <p>جرب البحث بكلمات مختلفة</p>
                    </div>
                `;
                return;
            }

            searchResultsGrid.innerHTML = results.map(result => {
                const quality = result.name.includes('HD') ? 'HD' : result.name.includes('SD') ? 'SD' : 'LIVE';
                const channelLogo = result.image ? 
                    `<img src="${result.image}" alt="Logo" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;" onerror="this.outerHTML='${getChannelLogo(result.name, result.categoryId)}'">` : 
                    getChannelLogo(result.name, result.categoryId);

                return `
                    <a href="${result.url}" class="search-result-item lazy-load" target="_blank" rel="noopener noreferrer">
                        <div class="search-result-icon">
                            ${channelLogo}
                        </div>
                        <div class="search-result-info">
                            <div class="search-result-name">${result.name}</div>
                            <div class="search-result-category">${quality} • ${result.category}</div>
                        </div>
                    </a>
                `;
            }).join('');

            // Apply lazy loading animation
            setTimeout(() => {
                document.querySelectorAll('.search-result-item.lazy-load').forEach((item, index) => {
                    setTimeout(() => {
                        item.classList.add('loaded');
                    }, index * 50);
                });
            }, 100);
        }

        function clearMainSearch() {
            const searchInput = document.getElementById('mainChannelSearchInput');
            const searchClearBtn = document.getElementById('mainSearchClearBtn');
            const searchResults = document.getElementById('mainSearchResults');
            const categoriesGrid = document.querySelector('.channel-categories-grid');

            searchInput.value = '';
            searchClearBtn.style.display = 'none';
            searchResults.style.display = 'none';
            categoriesGrid.style.display = 'grid';

            showNotification('تم مسح البحث', 'success');
        }

        // Performance Optimizations
        function optimizeImages() {
            // Lazy load images when they come into viewport
            const images = document.querySelectorAll('img[data-src]');
            const imageObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        img.removeAttribute('data-src');
                        imageObserver.unobserve(img);
                    }
                });
            });

            images.forEach(img => imageObserver.observe(img));
        }

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // Enhanced Mobile Touch Support
        function addTouchSupport() {
            if ('ontouchstart' in window) {
                document.body.classList.add('touch-device');

                // Add touch feedback
                document.addEventListener('touchstart', function(e) {
                    if (e.target.closest('.card, .channel-item, .search-result-item')) {
                        e.target.closest('.card, .channel-item, .search-result-item').style.transform = 'scale(0.98)';
                    }
                });

                document.addEventListener('touchend', function(e) {
                    if (e.target.closest('.card, .channel-item, .search-result-item')) {
                        setTimeout(() => {
                            e.target.closest('.card, .channel-item, .search-result-item').style.transform = '';
                        }, 150);
                    }
                });
            }
        }

        // Initialize performance optimizations
        document.addEventListener('DOMContentLoaded', function() {
            optimizeImages();
            addTouchSupport();

            // Preload critical resources
            const link = document.createElement('link');
            link.rel = 'preload';
            link.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css';
            link.as = 'style';
            document.head.appendChild(link);
        });

        // Online/Offline Detection
        window.addEventListener('online', function() {
            showNotification('تم استعادة الاتصال بالإنترنت', 'success');
        });

        window.addEventListener('offline', function() {
            showNotification('انقطع الاتصال بالإنترنت', 'error');
        });

        // ===== LEAGUE STATISTICS FUNCTIONS =====

        // League data with statistics
        const leaguesData = {
            'premier-league': {
                name: 'الدوري الإنجليزي الممتاز',
                subtitle: 'Premier League 2024/25',
                logo: 'https://h.top4top.io/p_34975mkyl1.jpg',
                table: [
                    { pos: 1, team: 'مانشستر سيتي', badge: 'MC', played: 20, won: 14, drawn: 4, lost: 2, gf: 45, ga: 18, gd: 27, points: 46 },
                    { pos: 2, team: 'ليفربول', badge: 'LIV', played: 20, won: 13, drawn: 5, lost: 2, gf: 42, ga: 20, gd: 22, points: 44 },
                    { pos: 3, team: 'أرسنال', badge: 'ARS', played: 20, won: 12, drawn: 6, lost: 2, gf: 38, ga: 16, gd: 22, points: 42 },
                    { pos: 4, team: 'نيوكاسل يونايتد', badge: 'NEW', played: 20, won: 11, drawn: 4, lost: 5, gf: 35, ga: 25, gd: 10, points: 37 },
                    { pos: 5, team: 'مانشستر يونايتد', badge: 'MU', played: 20, won: 10, drawn: 5, lost: 5, gf: 32, ga: 28, gd: 4, points: 35 }
                ]
            },
            'la-liga': {
                name: 'الدوري الإسباني',
                subtitle: 'La Liga 2024/25',
                logo: 'https://j.top4top.io/p_3497ngtro1.jpg',
                table: [
                    { pos: 1, team: 'ريال مدريد', badge: 'RM', played: 20, won: 16, drawn: 2, lost: 2, gf: 48, ga: 15, gd: 33, points: 50 },
                    { pos: 2, team: 'برشلونة', badge: 'BAR', played: 20, won: 14, drawn: 4, lost: 2, gf: 45, ga: 18, gd: 27, points: 46 },
                    { pos: 3, team: 'أتليتكو مدريد', badge: 'ATM', played: 20, won: 12, drawn: 5, lost: 3, gf: 38, ga: 22, gd: 16, points: 41 },
                    { pos: 4, team: 'إشبيلية', badge: 'SEV', played: 20, won: 10, drawn: 6, lost: 4, gf: 32, ga: 25, gd: 7, points: 36 },
                    { pos: 5, team: 'فياريال', badge: 'VIL', played: 20, won: 9, drawn: 7, lost: 4, gf: 30, ga: 23, gd: 7, points: 34 }
                ]
            },
            'bundesliga': {
                name: 'الدوري الألماني',
                subtitle: 'Bundesliga 2024/25',
                logo: 'https://k.top4top.io/p_3497agxyp1.jpg',
                table: [
                    { pos: 1, team: 'بايرن ميونخ', badge: 'BAY', played: 20, won: 15, drawn: 3, lost: 2, gf: 52, ga: 20, gd: 32, points: 48 },
                    { pos: 2, team: 'بوروسيا دورتموند', badge: 'BVB', played: 20, won: 13, drawn: 4, lost: 3, gf: 42, ga: 24, gd: 18, points: 43 },
                    { pos: 3, team: 'لايبزيغ', badge: 'RBL', played: 20, won: 12, drawn: 5, lost: 3, gf: 40, ga: 22, gd: 18, points: 41 },
                    { pos: 4, team: 'باير ليفركوزن', badge: 'B04', played: 20, won: 11, drawn: 4, lost: 5, gf: 35, ga: 28, gd: 7, points: 37 },
                    { pos: 5, team: 'فرايبورغ', badge: 'SCF', played: 20, won: 9, drawn: 6, lost: 5, gf: 28, ga: 25, gd: 3, points: 33 }
                ]
            },
            'ligue1': {
                name: 'الدوري الفرنسي',
                subtitle: 'Ligue 1 2024/25',
                logo: 'https://i.top4top.io/p_3497u5dp71.jpg',
                table: [
                    { pos: 1, team: 'باريس سان جيرمان', badge: 'PSG', played: 20, won: 16, drawn: 2, lost: 2, gf: 50, ga: 16, gd: 34, points: 50 },
                    { pos: 2, team: 'مارسيليا', badge: 'OM', played: 20, won: 13, drawn: 4, lost: 3, gf: 38, ga: 22, gd: 16, points: 43 },
                    { pos: 3, team: 'موناكو', badge: 'ASM', played: 20, won: 12, drawn: 5, lost: 3, gf: 35, ga: 20, gd: 15, points: 41 },
                    { pos: 4, team: 'ليون', badge: 'OL', played: 20, won: 10, drawn: 6, lost: 4, gf: 32, ga: 25, gd: 7, points: 36 },
                    { pos: 5, team: 'نيس', badge: 'NICE', played: 20, won: 9, drawn: 7, lost: 4, gf: 28, ga: 23, gd: 5, points: 34 }
                ]
            },
            'serie-a': {
                name: 'الدوري الإيطالي',
                subtitle: 'Serie A 2024/25',
                logo: 'https://l.top4top.io/p_3497wdn4s1.jpg',
                table: [
                    { pos: 1, team: 'إنتر ميلان', badge: 'INT', played: 20, won: 15, drawn: 3, lost: 2, gf: 45, ga: 18, gd: 27, points: 48 },
                    { pos: 2, team: 'يوفنتوس', badge: 'JUV', played: 20, won: 14, drawn: 4, lost: 2, gf: 42, ga: 16, gd: 26, points: 46 },
                    { pos: 3, team: 'نابولي', badge: 'NAP', played: 20, won: 12, drawn: 5, lost: 3, gf: 38, ga: 22, gd: 16, points: 41 },
                    { pos: 4, team: 'ميلان', badge: 'MIL', played: 20, won: 11, drawn: 4, lost: 5, gf: 35, ga: 25, gd: 10, points: 37 },
                    { pos: 5, team: 'لاتسيو', badge: 'LAZ', played: 20, won: 10, drawn: 5, lost: 5, gf: 32, ga: 28, gd: 4, points: 35 }
                ]
            }
        };

        // Toggle league stats submenu
        function toggleLeagueStats(event) {
            event.preventDefault();
            const expandableMenu = event.target.closest('.expandable-menu');
            const submenu = document.getElementById('leagueStatsSubmenu');

            expandableMenu.classList.toggle('expanded');
            submenu.classList.toggle('open');
        }

        // Show specific league statistics
        function showLeagueStats(leagueId) {
            const leagueData = leaguesData[leagueId];
            if (!leagueData) {
                showNotification('بيانات الدوري غير متوفرة', 'error');
                return;
            }

            // Update league header
            document.getElementById('leagueTitle').textContent = leagueData.name;
            document.getElementById('leagueSubtitle').textContent = leagueData.subtitle;
            document.getElementById('leagueLogoImg').src = leagueData.logo;

            // Load league table
            loadLeagueTable(leagueData.table);

            // Show the league stats section
            showSection('leagueStats');

            showNotification(`تم تحميل إحصائيات ${leagueData.name}`, 'success');
        }
        // Get position class for styling
        function getPositionClass(position) {
            if (position <= 4) return 'champions';
            if (position <= 6) return 'europa';
            if (position >= 18) return 'relegation';
            return '';
        }

window.onload = () => {
    // إيجاد العناصر القابلة للنقر وإضافة tabindex إذا لم يكن موجود
    const clickable = document.querySelectorAll('a, button, [onclick]');
    clickable.forEach(el => {
        if (!el.hasAttribute('tabindex')) {
            el.setAttribute('tabindex', '0');
        }
    });

    // التركيز على أول عنصر تفاعلي عند التحميل
    if (clickable.length > 0) {
        clickable[0].focus();
        scrollIntoViewIfNeeded(clickable[0]);
    }

    // دالة التمرير التلقائي
    function scrollIntoViewIfNeeded(el) {
        const rect = el.getBoundingClientRect();
        if (rect.top < 0 || rect.bottom > window.innerHeight) {
            el.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
    }

    // دعم الأسهم وEnter للريموت
    document.addEventListener('keydown', function(e) {
        let focused = document.activeElement;
        let elements = Array.from(clickable);
        let index = elements.indexOf(focused);

        switch(e.key) {
            case "ArrowUp":
            case "ArrowLeft":
                if (index > 0) {
                    elements[index - 1].focus();
                    scrollIntoViewIfNeeded(elements[index - 1]);
                }
                break;
            case "ArrowDown":
            case "ArrowRight":
                if (index < elements.length - 1) {
                    elements[index + 1].focus();
                    scrollIntoViewIfNeeded(elements[index + 1]);
                }
                break;
            case "Enter":
                if (focused && typeof focused.click === 'function') {
                    focused.click();
                }
                break;
        }
    });
};

</script>
    </body>
</html>
